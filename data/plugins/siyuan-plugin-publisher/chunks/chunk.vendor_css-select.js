import{D as _}from"./chunk.vendor_domutils.js";import{a as f}from"./chunk.vendor_boolbase.js";import{S as g,A as b,p as $}from"./chunk.vendor_css-what.js";import{n as y}from"./chunk.vendor_nth-check.js";const q=new Map([[g.Universal,50],[g.Tag,30],[g.Attribute,1],[g.Pseudo,0]]);function E(e){return!q.has(e.type)}const I=new Map([[b.Exists,10],[b.Equals,8],[b.Not,7],[b.Start,6],[b.End,6],[b.Any,5]]);function j(e){const t=e.map(L);for(let n=1;n<e.length;n++){const r=t[n];if(!(r<0))for(let i=n-1;i>=0&&r<t[i];i--){const s=e[i+1];e[i+1]=e[i],e[i]=s,t[i+1]=t[i],t[i]=r}}}function L(e){var t,n;let r=(t=q.get(e.type))!==null&&t!==void 0?t:-1;return e.type===g.Attribute?(r=(n=I.get(e.action))!==null&&n!==void 0?n:4,e.action===b.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===g.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map(i=>Math.min(...i.map(L)))),r<0&&(r=0)):r=2:r=3),r}const U=/[-[\]{}()*+?.,\\^$|#\s]/g;function F(e){return e.replace(U,"\\$&")}const W=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function h(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&W.has(e.name)}const K={equals(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return h(t,n)?(s=s.toLowerCase(),u=>{const o=r.getAttributeValue(u,i);return o!=null&&o.length===s.length&&o.toLowerCase()===s&&e(u)}):u=>r.getAttributeValue(u,i)===s&&e(u)},hyphen(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const u=s.length;return h(t,n)?(s=s.toLowerCase(),function(a){const l=r.getAttributeValue(a,i);return l!=null&&(l.length===u||l.charAt(u)==="-")&&l.substr(0,u).toLowerCase()===s&&e(a)}):function(a){const l=r.getAttributeValue(a,i);return l!=null&&(l.length===u||l.charAt(u)==="-")&&l.substr(0,u)===s&&e(a)}},element(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(/\s/.test(s))return f.falseFunc;const u=new RegExp(`(?:^|\\s)${F(s)}(?:$|\\s)`,h(t,n)?"i":"");return function(a){const l=r.getAttributeValue(a,i);return l!=null&&l.length>=s.length&&u.test(l)&&e(a)}},exists(e,{name:t},{adapter:n}){return r=>n.hasAttrib(r,t)&&e(r)},start(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const u=s.length;return u===0?f.falseFunc:h(t,n)?(s=s.toLowerCase(),o=>{const a=r.getAttributeValue(o,i);return a!=null&&a.length>=u&&a.substr(0,u).toLowerCase()===s&&e(o)}):o=>{var a;return!!(!((a=r.getAttributeValue(o,i))===null||a===void 0)&&a.startsWith(s))&&e(o)}},end(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const u=-s.length;return u===0?f.falseFunc:h(t,n)?(s=s.toLowerCase(),o=>{var a;return((a=r.getAttributeValue(o,i))===null||a===void 0?void 0:a.substr(u).toLowerCase())===s&&e(o)}):o=>{var a;return!!(!((a=r.getAttributeValue(o,i))===null||a===void 0)&&a.endsWith(s))&&e(o)}},any(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(s==="")return f.falseFunc;if(h(t,n)){const u=new RegExp(F(s),"i");return function(a){const l=r.getAttributeValue(a,i);return l!=null&&l.length>=s.length&&u.test(l)&&e(a)}}return u=>{var o;return!!(!((o=r.getAttributeValue(u,i))===null||o===void 0)&&o.includes(s))&&e(u)}},not(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return s===""?u=>!!r.getAttributeValue(u,i)&&e(u):h(t,n)?(s=s.toLowerCase(),u=>{const o=r.getAttributeValue(u,i);return(o==null||o.length!==s.length||o.toLowerCase()!==s)&&e(u)}):u=>r.getAttributeValue(u,i)!==s&&e(u)}};function v(e,t){return n=>{const r=t.getParent(n);return r!=null&&t.isTag(r)&&e(n)}}const S={contains(e,t,{adapter:n}){return function(i){return e(i)&&n.getText(i).includes(t)}},icontains(e,t,{adapter:n}){const r=t.toLowerCase();return function(s){return e(s)&&n.getText(s).toLowerCase().includes(r)}},"nth-child"(e,t,{adapter:n,equals:r}){const i=y(t);return i===f.falseFunc?f.falseFunc:i===f.trueFunc?v(e,n):function(u){const o=n.getSiblings(u);let a=0;for(let l=0;l<o.length&&!r(u,o[l]);l++)n.isTag(o[l])&&a++;return i(a)&&e(u)}},"nth-last-child"(e,t,{adapter:n,equals:r}){const i=y(t);return i===f.falseFunc?f.falseFunc:i===f.trueFunc?v(e,n):function(u){const o=n.getSiblings(u);let a=0;for(let l=o.length-1;l>=0&&!r(u,o[l]);l--)n.isTag(o[l])&&a++;return i(a)&&e(u)}},"nth-of-type"(e,t,{adapter:n,equals:r}){const i=y(t);return i===f.falseFunc?f.falseFunc:i===f.trueFunc?v(e,n):function(u){const o=n.getSiblings(u);let a=0;for(let l=0;l<o.length;l++){const c=o[l];if(r(u,c))break;n.isTag(c)&&n.getName(c)===n.getName(u)&&a++}return i(a)&&e(u)}},"nth-last-of-type"(e,t,{adapter:n,equals:r}){const i=y(t);return i===f.falseFunc?f.falseFunc:i===f.trueFunc?v(e,n):function(u){const o=n.getSiblings(u);let a=0;for(let l=o.length-1;l>=0;l--){const c=o[l];if(r(u,c))break;n.isTag(c)&&n.getName(c)===n.getName(u)&&a++}return i(a)&&e(u)}},root(e,t,{adapter:n}){return r=>{const i=n.getParent(r);return(i==null||!n.isTag(i))&&e(r)}},scope(e,t,n,r){const{equals:i}=n;return!r||r.length===0?S.root(e,t,n):r.length===1?s=>i(r[0],s)&&e(s):s=>r.includes(s)&&e(s)},hover:w("isHovered"),visited:w("isVisited"),active:w("isActive")};function w(e){return function(n,r,{adapter:i}){const s=i[e];return typeof s!="function"?f.falseFunc:function(o){return s(o)&&n(o)}}}const N={empty(e,{adapter:t}){return!t.getChildren(e).some(n=>t.isTag(n)||t.getText(n)!=="")},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return t.prevElementSibling(e)==null;const r=t.getSiblings(e).find(i=>t.isTag(i));return r!=null&&n(e,r)},"last-child"(e,{adapter:t,equals:n}){const r=t.getSiblings(e);for(let i=r.length-1;i>=0;i--){if(n(e,r[i]))return!0;if(t.isTag(r[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=0;s<r.length;s++){const u=r[s];if(n(e,u))return!0;if(t.isTag(u)&&t.getName(u)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=r.length-1;s>=0;s--){const u=r[s];if(n(e,u))return!0;if(t.isTag(u)&&t.getName(u)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const r=t.getName(e);return t.getSiblings(e).every(i=>n(e,i)||!t.isTag(i)||t.getName(i)!==r)},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every(r=>n(e,r)||!t.isTag(r))}};function P(e,t,n,r){if(n===null){if(e.length>r)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===r)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const x={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},k={};function z(e,t){return e===f.falseFunc?f.falseFunc:n=>t.isTag(n)&&e(n)}function D(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function T(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const m=(e,t,n,r,i)=>{const s=i(t,T(n),r);return s===f.trueFunc?e:s===f.falseFunc?f.falseFunc:u=>s(u)&&e(u)},C={is:m,matches:m,where:m,not(e,t,n,r,i){const s=i(t,T(n),r);return s===f.falseFunc?e:s===f.trueFunc?f.falseFunc:u=>!s(u)&&e(u)},has(e,t,n,r,i){const{adapter:s}=n,u=T(n);u.relativeSelector=!0;const o=t.some(c=>c.some(E))?[k]:void 0,a=i(t,u,o);if(a===f.falseFunc)return f.falseFunc;const l=z(a,s);if(o&&a!==f.trueFunc){const{shouldTestNextSiblings:c=!1}=a;return d=>{if(!e(d))return!1;o[0]=d;const p=s.getChildren(d),R=c?[...p,...D(d,s)]:p;return s.existsOne(l,R)}}return c=>e(c)&&s.existsOne(l,s.getChildren(c))}};function B(e,t,n,r,i){var s;const{name:u,data:o}=t;if(Array.isArray(o)){if(!(u in C))throw new Error(`Unknown pseudo-class :${u}(${o})`);return C[u](e,o,n,r,i)}const a=(s=n.pseudos)===null||s===void 0?void 0:s[u],l=typeof a=="string"?a:x[u];if(typeof l=="string"){if(o!=null)throw new Error(`Pseudo ${u} doesn't have any arguments`);const c=$(l);return C.is(e,c,n,r,i)}if(typeof a=="function")return P(a,u,o,1),c=>a(c,o)&&e(c);if(u in S)return S[u](e,o,n,r);if(u in N){const c=N[u];return P(c,u,o,2),d=>c(d,n,o)&&e(d)}throw new Error(`Unknown pseudo-class :${u}`)}function A(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function H(e,t,n,r,i){const{adapter:s,equals:u}=n;switch(t.type){case g.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case g.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case g.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),K[t.action](e,t,n)}case g.Pseudo:return B(e,t,n,r,i);case g.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:o}=t;return(!n.xmlMode||n.lowerCaseTags)&&(o=o.toLowerCase()),function(l){return s.getName(l)===o&&e(l)}}case g.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(l){let c=l;for(;c=A(c,s);)if(e(c))return!0;return!1};const o=new WeakSet;return function(l){let c=l;for(;c=A(c,s);)if(!o.has(c)){if(s.isTag(c)&&e(c))return!0;o.add(c)}return!1}}case"_flexibleDescendant":return function(a){let l=a;do if(e(l))return!0;while(l=A(l,s));return!1};case g.Parent:return function(a){return s.getChildren(a).some(l=>s.isTag(l)&&e(l))};case g.Child:return function(a){const l=s.getParent(a);return l!=null&&s.isTag(l)&&e(l)};case g.Sibling:return function(a){const l=s.getSiblings(a);for(let c=0;c<l.length;c++){const d=l[c];if(u(a,d))break;if(s.isTag(d)&&e(d))return!0}return!1};case g.Adjacent:return s.prevElementSibling?function(a){const l=s.prevElementSibling(a);return l!=null&&e(l)}:function(a){const l=s.getSiblings(a);let c;for(let d=0;d<l.length;d++){const p=l[d];if(u(a,p))break;s.isTag(p)&&(c=p)}return!!c&&e(c)};case g.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function V(e){return e.type===g.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(t=>t.some(V)))}const G={type:g.Descendant},X={type:"_flexibleDescendant"},J={type:g.Pseudo,name:"scope",data:null};function Q(e,{adapter:t},n){const r=!!(n!=null&&n.every(i=>{const s=t.isTag(i)&&t.getParent(i);return i===k||s&&t.isTag(s)}));for(const i of e){if(!(i.length>0&&E(i[0])&&i[0].type!==g.Descendant))if(r&&!i.some(V))i.unshift(G);else continue;i.unshift(J)}}function M(e,t,n){var r;e.forEach(j),n=(r=t.context)!==null&&r!==void 0?r:n;const i=Array.isArray(n),s=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)Q(e,t,s);else if(e.some(a=>a.length>0&&E(a[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let u=!1;const o=e.map(a=>{if(a.length>=2){const[l,c]=a;l.type!==g.Pseudo||l.name!=="scope"||(i&&c.type===g.Descendant?a[1]=X:(c.type===g.Adjacent||c.type===g.Sibling)&&(u=!0))}return Y(a,t,s)}).reduce(Z,f.falseFunc);return o.shouldTestNextSiblings=u,o}function Y(e,t,n){var r;return e.reduce((i,s)=>i===f.falseFunc?f.falseFunc:H(i,s,t,n,M),(r=t.rootFunc)!==null&&r!==void 0?r:f.trueFunc)}function Z(e,t){return t===f.falseFunc||e===f.trueFunc?e:e===f.falseFunc||t===f.trueFunc?t:function(r){return e(r)||t(r)}}const O=(e,t)=>e===t,ee={adapter:_,equals:O};function te(e){var t,n,r,i;const s=e??ee;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=_),(n=s.equals)!==null&&n!==void 0||(s.equals=(i=(r=s.adapter)===null||r===void 0?void 0:r.equals)!==null&&i!==void 0?i:O),s}function ne(e){return function(n,r,i){const s=te(r);return e(n,s,i)}}const oe=ne(M);function le(e,t,n=!1){return n&&(e=re(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function re(e,t){const n=Array.isArray(e)?e.slice(0):[e],r=n.length;for(let i=0;i<r;i++){const s=D(n[i],t);n.push(...s)}return n}export{oe as _,le as p};
