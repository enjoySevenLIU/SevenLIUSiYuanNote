{"ID":"20240404141329-o4wehda","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240404141329-o4wehda","title":"UM3L6——Android中嵌入Unity内容","type":"doc","updated":"20250303190612"},"Children":[{"ID":"20240404141329-xu4qn4f","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240404141329-xu4qn4f","updated":"20250303190612"},"Children":[{"Type":"NodeText","Data":"Android中嵌入Unity内容"}]},{"ID":"20240404141356-qdawhvs","Type":"NodeParagraph","Properties":{"id":"20240404141356-qdawhvs","updated":"20250303190542"},"Children":[{"Type":"NodeText","Data":"在进行 Android 开发时，可能会有需求显示 Unity 开发的 3D 内容，一开始我们启动的是 Android 应用程序中的 Activity\n通过 Activity 我们想要打开 Unity 开发的内容进行展示，这就是 Android 中嵌入 Unity 内容的意思"}]},{"ID":"20240404141359-jowo3z0","Type":"NodeBlockquote","Properties":{"id":"20240404141359-jowo3z0","style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color); --b3-parent-background: var(--b3-card-warning-background);","updated":"20250303190612"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20250303190552-ah390bt","Type":"NodeParagraph","Properties":{"id":"20250303190552-ah390bt","updated":"20250303190552"},"Children":[{"Type":"NodeText","Data":"注意："}]},{"ID":"20250303190553-bg6zikc","Type":"NodeParagraph","Properties":{"id":"20250303190553-bg6zikc","updated":"20250303190612"},"Children":[{"Type":"NodeText","Data":"Android 中嵌入 Unity存在限制问题，退出 Unity 所在的 Activity 会退出整个 App，不能达到我们想要的需求\n所以如果存在 Android 和 Unity 混合开发的情况，建议采用"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240402221641-b58hpht","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"上节课的Unity中嵌入Android"},{"Type":"NodeText","Data":" 的方式，本节课内容主要做为拓展知识"}]}]},{"ID":"20240404141730-xqzx466","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240404141730-xqzx466","updated":"20240404141924"},"Children":[{"Type":"NodeText","Data":"新建Unity测试项目"}]},{"ID":"20240404141939-li7iciv","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240404141939-li7iciv","updated":"20240404142455"},"Children":[{"ID":"20240404141941-umx9ob7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240404141941-umx9ob7","updated":"20240404142455"},"Children":[{"ID":"20240404141941-r9btq1q","Type":"NodeParagraph","Properties":{"id":"20240404141941-r9btq1q","updated":"20240404141941"},"Children":[{"Type":"NodeText","Data":"在该项目中添加一些测试内容，比如方块旋转"}]},{"ID":"20240404142259-2ns1759","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404142259-2ns1759","style":"line-height: 22px;","updated":"20240404142453"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"using UnityEngine;\n\npublic class Test : MonoBehaviour\n{\n    void Update()\n    {\n        this.transform.Rotate(Vector3.up * 20 * Time.deltaTime);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240404141941-41fyccg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240404141941-41fyccg","updated":"20240404141941"},"Children":[{"ID":"20240404141941-4k9siq4","Type":"NodeParagraph","Properties":{"id":"20240404141941-4k9siq4","updated":"20240404141941"},"Children":[{"Type":"NodeText","Data":"将该项目发布为Android工程"}]}]}]},{"ID":"20240404141950-upkjte8","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240404141950-upkjte8","updated":"20240404141953"},"Children":[{"Type":"NodeText","Data":"新建Android测试项目"}]},{"ID":"20240404142002-vif5333","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240404142002-vif5333","updated":"20240404145334"},"Children":[{"ID":"20240404142016-gxbm47t","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240404142016-gxbm47t","updated":"20240404142016"},"Children":[{"ID":"20240404142016-cxhwfi6","Type":"NodeParagraph","Properties":{"id":"20240404142016-cxhwfi6","updated":"20240404142016"},"Children":[{"Type":"NodeText","Data":"新建一个Android工程"}]}]},{"ID":"20240404142016-xaxi1x7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240404142016-xaxi1x7","updated":"20240404142016"},"Children":[{"ID":"20240404142016-kdgq6c9","Type":"NodeParagraph","Properties":{"id":"20240404142016-kdgq6c9","updated":"20240404142016"},"Children":[{"Type":"NodeText","Data":"将知识点二中导出内容中的 unityLibrary 文件夹拷贝到Android工程中"}]},{"ID":"20240404143309-qfxz1wp","Type":"NodeParagraph","Properties":{"id":"20240404143309-qfxz1wp","updated":"20240404143309"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 556px;","style":"width: 546px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404143309-qxnh3sh.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 546px;\" parent-style=\"width: 556px;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240404142016-2zy1t4e","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240404142016-2zy1t4e","updated":"20240404142016"},"Children":[{"ID":"20240404142016-ydd7hqd","Type":"NodeParagraph","Properties":{"id":"20240404142016-ydd7hqd","updated":"20240404143634"},"Children":[{"Type":"NodeText","Data":"将知识点二中导出内容中的 launcher 文件夹中的 res 中的内容拷贝到 unityLibrary 文件夹中合并（遇到同名文件请跳过）"}]},{"ID":"20240404143606-2xlb8br","Type":"NodeParagraph","Properties":{"id":"20240404143606-2xlb8br","updated":"20240404143606"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 628px;","style":"width: 618px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404143606-4izcj17.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 618px;\" parent-style=\"width: 628px;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240404142016-0eo3r1h","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240404142016-0eo3r1h","updated":"20240404142016"},"Children":[{"ID":"20240404142016-d1d4l6q","Type":"NodeParagraph","Properties":{"id":"20240404142016-d1d4l6q","updated":"20240404144101"},"Children":[{"Type":"NodeText","Data":"修改安卓工程中的 settings.gradle 文件，在最后添加 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"include ':unityLibrary'"},{"Type":"NodeText","Data":"​ 并 点击右上角同步（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Sync now"},{"Type":"NodeText","Data":"​）"}]},{"ID":"20240404143821-28ss5ab","Type":"NodeParagraph","Properties":{"id":"20240404143821-28ss5ab","updated":"20240404143821"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 677px;","style":"width: 667px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404143821-jx3vbp6.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 667px;\" parent-style=\"width: 677px;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240404142016-zbql6hw","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20240404142016-zbql6hw","updated":"20240404142016"},"Children":[{"ID":"20240404142016-zfsyy2b","Type":"NodeParagraph","Properties":{"id":"20240404142016-zfsyy2b","updated":"20240404144109"},"Children":[{"Type":"NodeText","Data":"修改安卓工程中的 gradle.properties 文件，\n在最后添加 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"unityStreamingAssets=.unity3d, google-services-desktop.json, google-services.json, GoogleService-Info.plist"},{"Type":"NodeText","Data":"​\n并点击右上角再次同步（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"try again"},{"Type":"NodeText","Data":"​）"}]},{"ID":"20240404144030-isg44v7","Type":"NodeParagraph","Properties":{"id":"20240404144030-isg44v7","updated":"20240404144030"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 928px;","style":"width: 918px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404144030-h204oft.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 918px;\" parent-style=\"width: 928px;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240404142016-n72umjq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20240404142016-n72umjq","updated":"20240404142016"},"Children":[{"ID":"20240404142016-pjz53i8","Type":"NodeParagraph","Properties":{"id":"20240404142016-pjz53i8","updated":"20240404144135"},"Children":[{"Type":"NodeText","Data":"修改安卓工程中 app 文件夹中的 build.gradle 文件，在依赖项中 添加 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"implementation project(':unityLibrary')"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240404144305-3n4lzde","Type":"NodeParagraph","Properties":{"id":"20240404144305-3n4lzde","updated":"20240404144305"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 723px;","style":"width: 713px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404144305-tr0vaf3.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 713px;\" parent-style=\"width: 723px;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240404142016-zd3cpka","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20240404142016-zd3cpka","updated":"20240404142016"},"Children":[{"ID":"20240404142016-3yglj8e","Type":"NodeParagraph","Properties":{"id":"20240404142016-3yglj8e","updated":"20240404144338"},"Children":[{"Type":"NodeText","Data":"在主Activity中添加一个用于跳转的按钮，并为该按钮添加监听事件，用于打开Unity的Activity"}]},{"ID":"20240404144850-329qpjd","Type":"NodeParagraph","Properties":{"id":"20240404144850-329qpjd","updated":"20240404144857"},"Children":[{"Type":"NodeText","Data":"布置界面："}]},{"ID":"20240404144858-oa4h9zw","Type":"NodeParagraph","Properties":{"id":"20240404144858-oa4h9zw","updated":"20240404144858"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 853px;","style":"width: 843px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404144858-po2zyde.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 843px;\" parent-style=\"width: 853px;\"}"}]},{"ID":"20240404144903-cwxhj2u","Type":"NodeParagraph","Properties":{"id":"20240404144903-cwxhj2u","updated":"20240404145041"},"Children":[{"Type":"NodeText","Data":"在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MainActivity"},{"Type":"NodeText","Data":"​为按钮添加监听方法并实现切换到Unity的Activity的逻辑"}]},{"ID":"20240404145002-440dyzy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404145002-440dyzy","style":"line-height: 22px;","updated":"20240404145014"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"package com.taikr.androidproject;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\n\nimport com.unity3d.player.UnityPlayerActivity;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //找到btnUnity按钮，并为其添加按下监听方法\n        findViewById(R.id.btnUnity).setOnClickListener(view -\u003e {\n            //打开Unity的Activity\n            Intent intent = new Intent(this, UnityPlayerActivity.class);\n            startActivity(intent);\n        });\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240404142016-ozoghie","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"OC4=","Num":8},"Properties":{"id":"20240404142016-ozoghie","updated":"20240404145334"},"Children":[{"ID":"20240404142016-4uxaodr","Type":"NodeParagraph","Properties":{"id":"20240404142016-4uxaodr","updated":"20240404142016"},"Children":[{"Type":"NodeText","Data":"修改两个 AndroidManifest.xml 文件，让主Activity的作为主Activity，删除Unity相关Activity的设置"}]},{"ID":"20240404145334-pgr251j","Type":"NodeParagraph","Properties":{"id":"20240404145334-pgr251j","updated":"20240404145334"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 835px;","style":"width: 825px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240404145334-0rz1g78.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 825px;\" parent-style=\"width: 835px;\"}"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240404144339-59h74z5","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240404144339-59h74z5","updated":"20240404145610"},"Children":[{"Type":"NodeText","Data":"打包测试"}]},{"ID":"20240404145614-5zahdrq","Type":"NodeParagraph","Properties":{"id":"20240404145614-5zahdrq","updated":"20240404150601"},"Children":[{"Type":"NodeText","Data":"设置密钥，进行打包，用模拟器或者真机进行测试，显示效果如下："}]},{"ID":"20240404150602-oidarwx","Type":"NodeParagraph","Properties":{"id":"20240404150602-oidarwx","updated":"20240404150614"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 315px;","style":"width: 305px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Screenshot_20240404_150513_com.taikr.androidproje"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Screenshot_20240404_150513_com.taikr.androidproje-20240404150602-9qigbo2.jpg"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 305px;\" parent-style=\"width: 315px;\"}"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 315px;","style":"width: 305px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Screenshot_20240404_150519_com.taikr.androidproje"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Screenshot_20240404_150519_com.taikr.androidproje-20240404150614-tjtuykr.jpg"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 305px;\" parent-style=\"width: 315px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240404150630-nuzo7lt","Type":"NodeParagraph","Properties":{"id":"20240404150630-nuzo7lt","updated":"20240404150655"},"Children":[{"Type":"NodeText","Data":"左：进入应用显示；右：点击中间按钮显示"}]}]}