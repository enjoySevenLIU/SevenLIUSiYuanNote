{"ID":"20240301211131-1zw1fns","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240301211131-1zw1fns","title":"U4S4L3——指定资源加载","type":"doc","updated":"20250114153708"},"Children":[{"ID":"20240505224518-94qjdr6","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240505224518-94qjdr6","updated":"20240505224523"},"Children":[{"Type":"NodeText","Data":"本章代码关键字"}]},{"ID":"20240505224523-5q7nvb5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240505224523-5q7nvb5","style":"line-height: 22px;","updated":"20240506131313"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"//不同的资源加载标识类\nAssetReference                \t\t//通用资源标识类 可以用来加载任意类型资源\nAssetReferenceAtlasedSprite   \t\t//图集资源标识类\nAssetReferenceGameObject      \t\t//游戏对象资源标识类\nAssetReferenceSprite          \t\t//精灵图片资源标识类\nAssetReferenceTexture         \t\t//贴图资源标识类\nAssetReferenceTexture2D\t\t\t\t//2D贴图资源标识类\nAssetReferenceTexture3D\t\t\t\t//3D贴图资源标识类\nAssetReferenceT\u003c\u003e             \t\t//指定类型标识类，通过泛型指定加载资源\n//异步加载相关\nassetReference.LoadAssetAsync\u003c\u003e()\t//通过标识类异步加载其关联的资源\nAsyncOperationHandle\u003c\u003e\t\t\t\t//异步加载处理类\nasyncOperationHandle\u003c\u003e.Status\t\t//异步加载状态，用于判断是否加载成功\nasyncOperationHandle\u003c\u003e.Result\t\t//异步加载结果，用于获取加载出来的资源\nasyncOperationHandle\u003c\u003e.Completed\t//异步加载完毕时会执行的事件，用于添加资源加载完毕的回调方法\nassetReference.Asset\t\t\t\t//标识类异步加载得到的资源\nassetReference.IsDone\t\t\t\t//标识类的资源是否加载完毕\nassetReference.LoadSceneAsync()\t\t//异步加载场景\n//其他\nassetReference.ReleaseAsset()\t\t//卸载资源\nassetReference.InstantiateAsync()\t//加载出来资源后就直接实例化\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240505220357-rp1c8fr","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240505220357-rp1c8fr","updated":"20240505220404"},"Children":[{"Type":"NodeText","Data":"资源准备"}]},{"ID":"20240505220459-thjuq74","Type":"NodeParagraph","Properties":{"id":"20240505220459-thjuq74","updated":"20240505220459"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 719px;","style":"width: 709px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240505220459-evecz0q.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 709px;\" parent-style=\"width: 719px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240301211131-1cek865","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240301211131-1cek865","name":"AssetReference","updated":"20250114153620"},"Children":[{"Type":"NodeText","Data":"Addressables中的资源标识类"}]},{"ID":"20240506122713-xw7low7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240506122713-xw7low7","updated":"20240506122716"},"Children":[{"ID":"20240506122716-038unvk","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240506122716-038unvk","updated":"20240506122716"},"Children":[{"ID":"20240506122716-erlo1kg","Type":"NodeParagraph","Properties":{"id":"20240506122716-erlo1kg","updated":"20240506122716"},"Children":[{"Type":"NodeText","Data":"我们可以根据自己的需求选择合适的标识类进行资源加载"}]}]},{"ID":"20240506122716-rn6tmrm","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240506122716-rn6tmrm","updated":"20240506122716"},"Children":[{"ID":"20240506122716-sglh7dt","Type":"NodeParagraph","Properties":{"id":"20240506122716-sglh7dt","updated":"20240506122716"},"Children":[{"Type":"NodeText","Data":"资源加载和场景加载都是通过异步进行加载"}]}]},{"ID":"20240506122716-jq2teub","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240506122716-jq2teub","updated":"20240506122716"},"Children":[{"ID":"20240506122716-6fr3g05","Type":"NodeParagraph","Properties":{"id":"20240506122716-6fr3g05","updated":"20240506122716"},"Children":[{"Type":"NodeText","Data":"需要注意异步加载资源使用时必须保证资源已经被加载成功了，否则会报错"}]}]}]},{"ID":"20240301211255-97k0r97","Type":"NodeParagraph","Properties":{"id":"20240301211255-97k0r97","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"通过不同类型标识类对象的申明 我们可以在Inspector窗口中筛选关联的资源对象"}]},{"ID":"20240301211300-nsulil1","Type":"NodeParagraph","Properties":{"id":"20240301211300-nsulil1","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"命名空间："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UnityEngine.AddressableAssets"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240301211218-xtgznaf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240301211218-xtgznaf","style":"line-height: 22px;","updated":"20240301211217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"AssetReference                //通用资源标识类 可以用来加载任意类型资源\nAssetReferenceAtlasedSprite   //图集资源标识类\nAssetReferenceGameObject      //游戏对象资源标识类\nAssetReferenceSprite          //精灵图片资源标识类\nAssetReferenceTexture         //贴图资源标识类\nAssetReferenceTexture2D\nAssetReferenceTexture3D\nAssetReferenceT\u003c\u003e             //指定类型标识类\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240505220656-n75ygo6","Type":"NodeParagraph","Properties":{"id":"20240505220656-n75ygo6","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"效果如下："}]},{"ID":"20240505221534-euh1dgu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240505221534-euh1dgu","style":"line-height: 22px;","updated":"20240301211217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"using UnityEngine;\nusing UnityEngine.AddressableAssets;\n\npublic class Lesson3 : MonoBehaviour\n{\n    public AssetReference assetReference;                           //通用资源标识类\n    public AssetReferenceAtlasedSprite asReference;                 //图集资源标识类\n    public AssetReferenceGameObject gameobjectReference;            //游戏对象资源标识类\n    public AssetReferenceSprite spriteReference;                    //精灵图片资源标识类\n    public AssetReferenceTexture textureReference;                  //贴图资源标识类\n\n    public AssetReferenceT\u003cAudioClip\u003e audioReference;               //加载音效\n    public AssetReferenceT\u003cRuntimeAnimatorController\u003e controller;   //加载动画控制器\n    public AssetReferenceT\u003cTextAsset\u003e textReference;                //加载文本\n\n    public AssetReferenceT\u003cMaterial\u003e materialRed;                   //加载材质\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240505221559-ee6la3m","Type":"NodeParagraph","Properties":{"id":"20240505221559-ee6la3m","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 531px;","style":"width: 521px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240505221559-ml5eobr.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 521px;\" parent-style=\"width: 531px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240505221602-py2gaan","Type":"NodeParagraph","Properties":{"id":"20240505221602-py2gaan","updated":"20250114153538"},"Children":[{"Type":"NodeText","Data":"其中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReference"},{"Type":"NodeText","Data":"​ 可以选择各种类型的资源"}]},{"ID":"20240505221646-9ib5wv6","Type":"NodeParagraph","Properties":{"id":"20240505221646-9ib5wv6","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 461px;","style":"width: 451px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240505221646-7g5v6nj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 451px;\" parent-style=\"width: 461px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240505221649-kl2w27d","Type":"NodeParagraph","Properties":{"id":"20240505221649-kl2w27d","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"而不同类型的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReference"},{"Type":"NodeText","Data":"​ 只能选择特定类型的资源（以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReferenceGameObject"},{"Type":"NodeText","Data":"​ 为例）"}]},{"ID":"20240505221759-lm37nrl","Type":"NodeParagraph","Properties":{"id":"20240505221759-lm37nrl","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 466px;","style":"width: 456px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240505221759-bydw09e.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 456px;\" parent-style=\"width: 466px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240301211417-y9lug9l","Type":"NodeHeading","HeadingLevel":2,"Properties":{"alias":"AsyncOperationHandle\u0026lt;\u0026gt;,asyncOperationHandle\u0026lt;\u0026gt;.Status,asyncOperationHandle\u0026lt;\u0026gt;.Result,asyncOperationHandle\u0026lt;\u0026gt;.Completed","id":"20240301211417-y9lug9l","name":"assetReference.LoadAssetAsync\u0026lt;\u0026gt;()","updated":"20250114153620"},"Children":[{"Type":"NodeText","Data":"加载资源"}]},{"ID":"20240301211433-k3r8l8d","Type":"NodeBlockquote","Properties":{"id":"20240301211433-k3r8l8d","style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color); --b3-parent-background: var(--b3-card-warning-background);","updated":"20250114153610"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20250114153552-aructl5","Type":"NodeParagraph","Properties":{"id":"20250114153552-aructl5","updated":"20250114153610"},"Children":[{"Type":"NodeText","Data":"注意：所有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Addressables"},{"Type":"NodeText","Data":"​ 加载相关都会使用"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"异步加载"}]}]},{"ID":"20240505221824-0wfk0x1","Type":"NodeParagraph","Properties":{"id":"20240505221824-0wfk0x1","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"需要引用命名空间："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UnityEngine.ResourceManagement.AsyncOperations"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240505223145-4d226hg","Type":"NodeParagraph","Properties":{"id":"20240505223145-4d226hg","updated":"20250114153544"},"Children":[{"Type":"NodeText","Data":"通过异步加载返回值 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AsyncOperationHandle\u0026lt;T\u0026gt;"},{"Type":"NodeText","Data":"​，对完成进行事件监听\n其中，监听方法要求有一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AsyncOperationHandle\u0026lt;T\u0026gt;"},{"Type":"NodeText","Data":"​ 参数"}]},{"ID":"20240301211450-j7ue4vg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240301211450-j7ue4vg","style":"line-height: 22px;","updated":"20240301211217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"using UnityEngine.ResourceManagement.AsyncOperations;\n\npublic class Lesson3 : MonoBehaviour\n{\n    public AssetReference assetReference;                           //通用资源标识类\n\n    void Start()\n    {\n        AsyncOperationHandle\u003cGameObject\u003e handle = assetReference.LoadAssetAsync\u003cGameObject\u003e();\n        handle.Completed += TestFun;\n    }\n\n    private void TestFun(AsyncOperationHandle\u003cGameObject\u003e handle)\n    {\n        if (handle.Status == AsyncOperationStatus.Succeeded)\n        {\n            Instantiate(handle.Result);\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240301211454-a87ffwh","Type":"NodeParagraph","Properties":{"id":"20240301211454-a87ffwh","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"加载成功后使用"}]},{"ID":"20240301211529-g94ylgi","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240301211529-g94ylgi","updated":"20240301211217"},"Children":[{"ID":"20240301211529-7z86ckj","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240301211529-7z86ckj","updated":"20240301211529"},"Children":[{"ID":"20240301211529-ygvmxde","Type":"NodeParagraph","Properties":{"id":"20240301211529-ygvmxde","updated":"20240301211529"},"Children":[{"Type":"NodeText","Data":"通过事件函数传入的参数判断加载是否成功 并且创建"}]}]},{"ID":"20240301211529-s64m4r4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240301211529-s64m4r4","updated":"20240505223227"},"Children":[{"ID":"20240301211529-jme08aj","Type":"NodeParagraph","Properties":{"id":"20240301211529-jme08aj","updated":"20240301211529"},"Children":[{"Type":"NodeText","Data":"通过资源标识类对象判断 并且创建"}]}]}]},{"ID":"20240505223123-pc4gv3g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240505223123-pc4gv3g","style":"line-height: 22px;","updated":"20240301211217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"private void TestFun(AsyncOperationHandle\u003cGameObject\u003e handle)\n{\n    if (handle.Status == AsyncOperationStatus.Succeeded)\n    {\n        Instantiate(handle.Result);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240301211547-z37k5z4","Type":"NodeParagraph","Properties":{"id":"20240301211547-z37k5z4","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"同样可以直接使用匿名函数来获取加载出来的内容"}]},{"ID":"20240505223423-aku5eex","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240505223423-aku5eex","style":"line-height: 22px;","updated":"20240301211217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public AssetReferenceGameObject gameobjectReference;            //游戏对象资源标识类\n\nvoid Start()\n{\n    AsyncOperationHandle\u003cGameObject\u003e handle = assetReference.LoadAssetAsync\u003cGameObject\u003e();\n    handle.Completed += TestFun;\n\n    gameobjectReference.LoadAssetAsync\u003cGameObject\u003e().Completed += (handle) =\u003e\n    {\n        if (handle.Status == AsyncOperationStatus.Succeeded)\n        {\n            Instantiate(handle.Result);\n        }\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240505223837-3bqpu9q","Type":"NodeHeading","HeadingLevel":3,"Properties":{"alias":"assetReference.IsDone","id":"20240505223837-3bqpu9q","name":"assetReference.Asset","updated":"20250114153620"},"Children":[{"Type":"NodeText","Data":"通过标识类来获取加载出来的资源"}]},{"ID":"20240505223723-krtapln","Type":"NodeParagraph","Properties":{"id":"20240505223723-krtapln","updated":"20240301211217"},"Children":[{"Type":"NodeText","Data":"我们同样可以直接通过标识类来获取加载出来的对象，但是不推荐"}]},{"ID":"20240505224150-oon90fg","Type":"NodeParagraph","Properties":{"id":"20240505224150-oon90fg","updated":"20250114153620"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assetReference.IsDone"},{"Type":"NodeText","Data":"​ 来判断是否加载完毕，但不能判断加载是否失败\n获取资源通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assetReference.assets"},{"Type":"NodeText","Data":"​ 来获取资源，并且获取到的资源需要 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"as"},{"Type":"NodeText","Data":"​ 转换为对应的类型"}]},{"ID":"20240505223750-4zgczx5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240505223750-4zgczx5","style":"line-height: 22px;","updated":"20240301211217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public AssetReference assetReference;                           //通用资源标识类\n\nvoid Start()\n{\n    AsyncOperationHandle\u003cGameObject\u003e handle = assetReference.LoadAssetAsync\u003cGameObject\u003e();\n    handle.Completed += TestFun;\n}\n\nprivate void TestFun(AsyncOperationHandle\u003cGameObject\u003e handle)\n{\n    if (assetReference.IsDone)\n    {\n        Instantiate(assetReference.Asset);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240505224201-mov2x5y","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240505224201-mov2x5y","name":"assetReference.LoadSceneAsync()","updated":"20250114153630"},"Children":[{"Type":"NodeText","Data":"加载场景"}]},{"ID":"20240506122903-f1tcx9m","Type":"NodeParagraph","Properties":{"id":"20240506122903-f1tcx9m","updated":"20250114153630"},"Children":[{"Type":"NodeText","Data":"可寻址资源可用于加载场景，但需要使用另外一个 API，而场景也没有对应的标识类去引用，因此直接使用通用标识类"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReference"},{"Type":"NodeText","Data":"​即可\n如果有加载完毕的回调函数，直接像加载资源那样添加回调函数即可"}]},{"ID":"20240506123123-auklkdv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240506123123-auklkdv","style":"line-height: 22px;","updated":"20240506123521"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public AssetReference sceneReference;                           //加载场景\n\nvoid Start()\n{\n    sceneReference.LoadSceneAsync().Completed += (handle) =\u003e\n    {\n        //初始化场景相关\n        print(\"场景加载结束\");\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240506122649-qxwbjwz","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240506122649-qxwbjwz","name":"assetReference.ReleaseAsset()","updated":"20250114153648"},"Children":[{"Type":"NodeText","Data":"释放资源"}]},{"ID":"20240506124150-0tfn536","Type":"NodeParagraph","Properties":{"id":"20240506124150-0tfn536","updated":"20240506124618"},"Children":[{"Type":"NodeText","Data":"释放资源相关API "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assetReference.ReleaseAsset()"},{"Type":"NodeText","Data":"​，注意，请务必在资源加载完毕后才卸载资源"}]},{"ID":"20240506124200-4skj2lg","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240506124200-4skj2lg","style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);","updated":"20250114153648"},"Children":[{"ID":"20240506124200-2g1xh2a","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240506124200-2g1xh2a","updated":"20250114153643"},"Children":[{"ID":"20240506124200-ygusa4p","Type":"NodeParagraph","Properties":{"id":"20240506124200-ygusa4p","updated":"20250114153637"},"Children":[{"Type":"NodeText","Data":"释放资源方法后，资源标识类中的资源会置空，但是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AsyncOperationHandle"},{"Type":"NodeText","Data":"​ 类中的对象不为空"}]},{"ID":"20240506130745-hhh52nw","Type":"NodeParagraph","Properties":{"id":"20240506130745-hhh52nw","updated":"20250114153643"},"Children":[{"Type":"NodeText","Data":"因此要注意，在将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AsyncOperationHandle"},{"Type":"NodeText","Data":"​ 作为"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"成员变量存储起来"},{"Type":"NodeText","Data":"后，想要彻底卸载资源，必须要将返回的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AsyncOperationHandle"},{"Type":"NodeText","Data":"​ 引用给置空！"}]},{"ID":"20240506130635-cpdym7x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240506130635-cpdym7x","style":"line-height: 22px;","updated":"20240506130708"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public AssetReferenceGameObject gameobjectReference;            //游戏对象资源标识类\npublic AssetReferenceT\u003cMaterial\u003e materialRed;                   //加载材质\n\nvoid Start()\n{\n    gameobjectReference.LoadAssetAsync\u003cGameObject\u003e().Completed += (handle) =\u003e\n    {\n        if (handle.Status == AsyncOperationStatus.Succeeded)\n        {\n            GameObject cube = Instantiate(handle.Result);\n            assetReference.ReleaseAsset();\n            materialRed.LoadAssetAsync\u003cMaterial\u003e().Completed += (materialhandle) =\u003e\n            {\n                cube.GetComponent\u003cMeshRenderer\u003e().material = materialhandle.Result;\n\t\t\t\t//这会导致游戏对象使用的材质丢失！！!\n                materialRed.ReleaseAsset();\n\n                print(materialRed.Asset);\n                print(materialhandle.Result);\n            };\n        }\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240506130639-vlm0dnm","Type":"NodeParagraph","Properties":{"id":"20240506130639-vlm0dnm","updated":"20240506130715"},"Children":[{"Type":"NodeText","Data":"输出结果：​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 308px;","style":"width: 298px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240506130730-blq81tn.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 298px;\" parent-style=\"width: 308px;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240506124200-m8s81ew","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240506124200-m8s81ew","updated":"20250114153648"},"Children":[{"ID":"20240506124200-d248gq2","Type":"NodeParagraph","Properties":{"id":"20240506124200-d248gq2","updated":"20240506125513"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"释放资源不会影响场景中被实例化出来的对象，但如果卸载GameObject使用的资源（例如材质），就会出现丢失问题！"}]},{"ID":"20240506130509-l6gmw7h","Type":"NodeParagraph","Properties":{"id":"20240506130509-l6gmw7h","updated":"20250114153648"},"Children":[{"Type":"NodeText","Data":"上述问题会在寻址资源的 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240301193610-f3y3j43","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"Play Mode Script"},{"Type":"NodeText","Data":" 设置为第三种也就是真实使用AB包打包的情况下出现"}]}]}]},{"ID":"20240506130509-b25pp9c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240506130509-b25pp9c","style":"line-height: 22px;","updated":"20240506130509"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public AssetReferenceGameObject gameobjectReference;            //游戏对象资源标识类\npublic AssetReferenceT\u003cMaterial\u003e materialRed;                   //加载材质\n\nvoid Start()\n{\n    gameobjectReference.LoadAssetAsync\u003cGameObject\u003e().Completed += (handle) =\u003e\n    {\n        if (handle.Status == AsyncOperationStatus.Succeeded)\n        {\n            GameObject cube = Instantiate(handle.Result);\n            assetReference.ReleaseAsset();\n            materialRed.LoadAssetAsync\u003cMaterial\u003e().Completed += (materialhandle) =\u003e\n            {\n                cube.GetComponent\u003cMeshRenderer\u003e().material = materialhandle.Result;\n\t\t\t\t//这会导致游戏对象使用的材质丢失！！!\n                materialRed.ReleaseAsset();\n            };\n        }\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240506130509-595oqnf","Type":"NodeParagraph","Properties":{"id":"20240506130509-595oqnf","updated":"20240506130509"},"Children":[{"Type":"NodeText","Data":"显示效果："}]},{"ID":"20240506130509-zf9k8cw","Type":"NodeParagraph","Properties":{"id":"20240506130509-zf9k8cw","updated":"20240506130509"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 557px;","style":"width: 547px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240506125847-fivumk4.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 547px;\" parent-style=\"width: 557px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240506130509-n8h88je","Type":"NodeParagraph","Properties":{"id":"20240506130509-n8h88je","updated":"20240506130509"},"Children":[{"Type":"NodeText","Data":"加载出来的预设体不受卸载影响，但是依附在其之上的材质因为卸载而丢失了！"}]},{"ID":"20240506130509-kau1elb","Type":"NodeParagraph","Properties":{"id":"20240506130509-kau1elb","updated":"20240506130509"},"Children":[{"Type":"NodeText","Data":"因为加载出来的预设体本质是加载了一个预设体配置文件，还需要根据该配置文件实例化游戏对象\n因此卸载预设体也只是卸载了一个配置文件，而根据该文件实例化的游戏对象是不被影响的"}]},{"ID":"20240506122631-b7l9ce9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240506122631-b7l9ce9","name":"assetReference.InstantiateAsync()","updated":"20250114153656"},"Children":[{"Type":"NodeText","Data":"直接实例化对象"}]},{"ID":"20240506130925-pd0qtcz","Type":"NodeParagraph","Properties":{"id":"20240506130925-pd0qtcz","style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);","updated":"20250114153656"},"Children":[{"Type":"NodeText","Data":"适用于 想要实例化的 对象 才会直接使用该方法 一般都是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GameObject"},{"Type":"NodeText","Data":"​ 预设体！"}]},{"ID":"20240506131113-ncs100p","Type":"NodeParagraph","Properties":{"id":"20240506131113-ncs100p","updated":"20240506131158"},"Children":[{"Type":"NodeText","Data":"该方法实例化对象时，可以同时设置这个实例化出来的对象的位置、角度，以及父子关系"}]},{"ID":"20240506130940-ecardfb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240506130940-ecardfb","style":"line-height: 22px;","updated":"20240506131227"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public AssetReferenceGameObject gameobjectReference;            //游戏对象资源标识类\n\nvoid Start()\n{\n    gameobjectReference.InstantiateAsync(Vector3.one, Quaternion.identity);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240506122659-gxq2qkl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240506122659-gxq2qkl","updated":"20250114153708"},"Children":[{"Type":"NodeText","Data":"自定义标识类"}]},{"ID":"20240506131435-qdsfn9r","Type":"NodeParagraph","Properties":{"id":"20240506131435-qdsfn9r","updated":"20250114153708"},"Children":[{"Type":"NodeText","Data":"自定义类 继承 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReferenceT\u0026lt;\u0026gt;"},{"Type":"NodeText","Data":"​ 类 即可自定义一个指定类型的标识类\n该功能主要用于 Unity 2020.1 之前，因为之前的版本不能直接使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReferenceT\u0026lt;\u0026gt;"},{"Type":"NodeText","Data":"​ 泛型字段\n或者说，旧版的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AssetReferenceT\u0026lt;\u0026gt;"},{"Type":"NodeText","Data":"​ 类字段是无法显示在 Inspector 窗口上的，因此也不能直接引用要加载的资源"}]},{"ID":"20240506131559-swtfsct","Type":"NodeParagraph","Properties":{"id":"20240506131559-swtfsct","updated":"20240506131923"},"Children":[{"Type":"NodeText","Data":"要注意，自定义的标识类必须包括一个构造函数来调用父类的有参构造函数"}]},{"ID":"20240506131923-iw0zd1q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240506131923-iw0zd1q","style":"line-height: 22px;","updated":"20240506131935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public class AssetReferenceAudio : AssetReferenceT\u003cAudioClip\u003e\n{\n    public AssetReferenceAudio(string guid) : base(guid) { }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240506131937-ppjlqng","Type":"NodeParagraph","Properties":{"id":"20240506131937-ppjlqng"}}]}