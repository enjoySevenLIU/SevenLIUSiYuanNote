{"ID":"20231223162523-vxvufy3","Spec":"1","Type":"NodeDocument","Properties":{"id":"20231223162523-vxvufy3","title":"UFL1——单例模式基类","type":"doc","updated":"20250208153249"},"Children":[{"ID":"20231223162523-eglg1u0","Type":"NodeBlockquote","Properties":{"id":"20231223162523-eglg1u0","updated":"20240415162933"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240415162920-hjb1g0x","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240415162920-hjb1g0x","updated":"20240415162932"},"Children":[{"Type":"NodeText","Data":"前置知识点"}]},{"ID":"20240415162933-hmf8klz","Type":"NodeParagraph","Properties":{"id":"20240415162933-hmf8klz","updated":"20240415162933"},"Children":[{"Type":"NodeText","Data":"大体知识体系"}]},{"ID":"20240415162933-usgeeiz","Type":"NodeList","ListData":{},"Properties":{"id":"20240415162933-usgeeiz","updated":"20240415162933"},"Children":[{"ID":"20240415162933-wivakkk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240415162933-wivakkk","updated":"20240415162933"},"Children":[{"ID":"20240415162933-fc9d2ks","Type":"NodeParagraph","Properties":{"id":"20240415162933-fc9d2ks","updated":"20240415162933"},"Children":[{"Type":"NodeText","Data":"C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"相关知识点（C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"四部曲）"}]}]}]},{"ID":"20240415162933-4e8ru2n","Type":"NodeParagraph","Properties":{"id":"20240415162933-4e8ru2n","updated":"20240415162933"},"Children":[{"Type":"NodeText","Data":"细节知识点"}]},{"ID":"20240415162933-45dxxtr","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240415162933-45dxxtr","updated":"20240415162933"},"Children":[{"ID":"20240415162933-hwz9yfm","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240415162933-hwz9yfm","updated":"20240415162933"},"Children":[{"ID":"20240415162933-5ype96z","Type":"NodeParagraph","Properties":{"id":"20240415162933-5ype96z","updated":"20240415162933"},"Children":[{"Type":"NodeText","Data":"面向对象（C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"四部曲C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"核心中）"}]}]},{"ID":"20240415162933-av026pe","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240415162933-av026pe","updated":"20240415162933"},"Children":[{"ID":"20240415162933-hpmgcip","Type":"NodeParagraph","Properties":{"id":"20240415162933-hpmgcip","updated":"20240415162933"},"Children":[{"Type":"NodeText","Data":"静态、单例模式相关知识（C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"四部曲之C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"核心中）"}]}]},{"ID":"20240415162933-ifbxja5","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240415162933-ifbxja5","updated":"20240415162933"},"Children":[{"ID":"20240415162933-av2s3bq","Type":"NodeParagraph","Properties":{"id":"20240415162933-av2s3bq","updated":"20240415162933"},"Children":[{"Type":"NodeText","Data":"泛型、泛型约束相关知识点（C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"四部曲之C"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"#"}]},{"Type":"NodeText","Data":"进阶中）"}]}]}]}]},{"ID":"20240104151732-p5vio72","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240104151732-p5vio72","updated":"20250208153249"},"Children":[{"Type":"NodeText","Data":"单例模式"}]},{"ID":"20240104151732-73bw0d0","Type":"NodeParagraph","Properties":{"id":"20240104151732-73bw0d0","updated":"20240409131539"},"Children":[{"Type":"NodeText","Data":"一般的单例模式差不多都会写类似于下面的这种形式，区别几乎只在于类名，该模式的特点是"}]},{"ID":"20240322164750-brz6k8s","Type":"NodeList","ListData":{},"Properties":{"id":"20240322164750-brz6k8s","updated":"20250208153249"},"Children":[{"ID":"20240322164751-w7x12c1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240322164751-w7x12c1","updated":"20240409131751"},"Children":[{"ID":"20240322164751-3t9newh","Type":"NodeParagraph","Properties":{"id":"20240322164751-3t9newh","updated":"20240409131751"},"Children":[{"Type":"NodeText","Data":"单例模式的类只能有一个实例化对象，由该类的静态私有变量"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"instance"},{"Type":"NodeText","Data":"​装载，外部不能实例化单例模式的类"}]}]},{"ID":"20240322164752-0cms2mt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240322164752-0cms2mt","updated":"20250208153249"},"Children":[{"ID":"20240322164752-plsct9s","Type":"NodeParagraph","Properties":{"id":"20240322164752-plsct9s","updated":"20250208153249"},"Children":[{"Type":"NodeText","Data":"单例模式类只会在程序启动时，或者第一次调用静态"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Instance"},{"Type":"NodeText","Data":"​属性时才会自己实例化一个对象，\n而静态 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Instance"},{"Type":"NodeText","Data":"​ 属性是外部唯一能够调用单例模式唯一类对象的接口"}]}]},{"ID":"20240322164753-zce361a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240322164753-zce361a","updated":"20240322164914"},"Children":[{"ID":"20240322164753-mflaqp4","Type":"NodeParagraph","Properties":{"id":"20240322164753-mflaqp4","updated":"20240322164914"},"Children":[{"Type":"NodeText","Data":"而由于单例模式类的构造函数是私有的，外部无法实例化一个对象，它保证了单例模式类对象是唯一的"}]}]}]},{"ID":"20240322164434-2k2tg56","Type":"NodeParagraph","Properties":{"id":"20240322164434-2k2tg56","updated":"20240322164434"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"单例模式的类可以在外部随时调用该类的"},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"Instance"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"属性来调用该类的唯一对象"}]},{"ID":"20240104151732-9ab9goq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240104151732-9ab9goq","style":"line-height: 22px;","updated":"20240104151732"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public class GameManager\n{\n    private static GameManager instance = new GameManager();    //为该类写一个私有静态变量，并调用私有构造函数，装载该类的唯一的实例化对象\n    public static GameManager Instance =\u003e instance;    //为该类写一个静态属性，使唯一装载该类的实例化对象的变量在外部只读，以可以调用该类的各种成员\n    private GameManager() { }    //私有的无参构造函数，确保只有该类的私有静态变量可以构造该类的实例化对象，而外部不能，在外部第一次调用静态属性时会执行\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240104151524-wdut8ng","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240104151524-wdut8ng","updated":"20240104151524"},"Children":[{"Type":"NodeText","Data":"为什么要写单例模式基类"}]},{"ID":"20240104151524-ji2ptfg","Type":"NodeParagraph","Properties":{"id":"20240104151524-ji2ptfg","updated":"20240104151524"},"Children":[{"Type":"NodeText","Data":"用面向对象的思想避免代码冗余（多余、重复）\n即"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"让使用单例模式的类直接继承该基类来复用静态私有变量的声明以及单例调用接口代码"}]},{"ID":"20240104151524-v6f0e2p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240104151524-v6f0e2p","style":"line-height: 22px;","updated":"20240104151524"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"public class TestMgr\n{\n    //装载该单例类唯一实例的静态私有变量\n    private static TestMgr instance;\n\n    //通过属性调用单例对象，与方法获取的方式任选其一\n    public static TestMgr Instance\n    {\n        get\n        {\n            //当单例不存在时，先实例化\n            if (instance == null)\n                instance = new TestMgr();\n            return instance;\n        }\n    }\n\n    //通过方法调用单例对象，与属性获取的方式任选其一\n    public static TestMgr GetInstance()\n    {\n        if (instance == null)\n            instance = new TestMgr();\n        return instance;\n    }\n\n    //私有构造函数，用于顶掉无参构造函数，防止外部去实例化这个单例类\n    private TestMgr() { }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240104145012-e6mfje0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240104145012-e6mfje0","updated":"20240104145155"},"Children":[{"Type":"NodeText","Data":"单例模式与静态类的区别"}]},{"ID":"20240104145012-fzosfve","Type":"NodeParagraph","Properties":{"id":"20240104145012-fzosfve","updated":"20240104145012"},"Children":[{"Type":"NodeText","Data":"静态类也是只能用类名调用且不能实例化的类，它和单例模式类有什么区别呢？"}]},{"ID":"20240104145012-j95pgmw","Type":"NodeList","ListData":{},"Properties":{"id":"20240104145012-j95pgmw","updated":"20240104145012"},"Children":[{"ID":"20240104145012-rrlfccy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240104145012-rrlfccy","updated":"20240104145012"},"Children":[{"ID":"20240104145012-3tnse3w","Type":"NodeParagraph","Properties":{"id":"20240104145012-3tnse3w","updated":"20240104145128"},"Children":[{"Type":"NodeText","Data":"静态类的方法适合纯数据处理，因为不依赖其它对象实例，写入参数就可以，但这也是它的限制，方法里是不可调用它的实例对象的"}]}]},{"ID":"20240104145012-1af9hf1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240104145012-1af9hf1","updated":"20240104145012"},"Children":[{"ID":"20240104145012-n96fphp","Type":"NodeParagraph","Properties":{"id":"20240104145012-n96fphp","updated":"20240104145102"},"Children":[{"Type":"NodeText","Data":"单例模式类，实际在第一次调用时它会在内部创建了实例化对象，之后都是在调用这个唯一的实例"}]}]},{"ID":"20240104145012-txsnzry","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240104145012-txsnzry","updated":"20240104145012"},"Children":[{"ID":"20240104145012-7hbbn4y","Type":"NodeParagraph","Properties":{"id":"20240104145012-7hbbn4y","updated":"20240104145136"},"Children":[{"Type":"NodeText","Data":"静态类不能过多，静态类将会一开始就需要将方法逻辑编译成本机代码（win，mac，linux）\n这就会在程序启动时形成过多cpu计算，而实例是在实例方法第一次被调用时才编译成本机代码（只编译一次）。"}]}]},{"ID":"20240104145012-bchd6ib","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240104145012-bchd6ib","updated":"20240104145012"},"Children":[{"ID":"20240104145012-th30flk","Type":"NodeParagraph","Properties":{"id":"20240104145012-th30flk","updated":"20240104145012"},"Children":[{"Type":"NodeText","Data":"所以应该尽量使用实例，有更好的内存管理gc释放，也会分散编译方法体的本机代码"}]}]}]},{"ID":"20240416211122-vxv2zqp","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240416211122-vxv2zqp","updated":"20240416211122"},"Children":[{"Type":"NodeText","Data":"单例模式基类实现"}]},{"ID":"20240416211122-ol93xep","Type":"NodeList","ListData":{},"Properties":{"id":"20240416211122-ol93xep","updated":"20240416211122"},"Children":[{"ID":"20240416211122-4j8h8nn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240416211122-4j8h8nn","updated":"20240416211122"},"Children":[{"ID":"20240416211122-9cdust5","Type":"NodeParagraph","Properties":{"id":"20240416211122-9cdust5","updated":"20240416211122"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240104151530-3axozd7","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"不继承MonoBehaviour的单例模式基类"}]}]},{"ID":"20240416211122-me5mxgj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240416211122-me5mxgj","updated":"20240416211122"},"Children":[{"ID":"20240416211122-3gsx6ec","Type":"NodeParagraph","Properties":{"id":"20240416211122-3gsx6ec","updated":"20240416211122"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240104151857-noi5xc7","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"继承MonoBehaviour的单例模式基类"}]}]},{"ID":"20240416211122-qlpyted","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240416211122-qlpyted","updated":"20240416211122"},"Children":[{"ID":"20240416211122-txw0bas","Type":"NodeParagraph","Properties":{"id":"20240416211122-txw0bas","updated":"20240416211122"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240104155311-au2yc9f","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"安全性问题解决"}]}]},{"ID":"20240416211122-ejzjvmb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240416211122-ejzjvmb","updated":"20240416211122"},"Children":[{"ID":"20240416211122-aqszmsr","Type":"NodeParagraph","Properties":{"id":"20240416211122-aqszmsr","updated":"20240416211122"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240415150008-2ba7e98","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"“饿汉”与“懒汉”单例模式"}]}]}]}]}