{
	"ID": "20240423152749-b42tntc",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240423152749-b42tntc",
		"title": "UFL11——加密工具模块",
		"type": "doc",
		"updated": "20240423204922"
	},
	"Children": [
		{
			"ID": "20240423152749-zsyyh8v",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20240423152749-zsyyh8v",
				"updated": "20240423152812"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20240423152758-7lh3jzx",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20240423152758-7lh3jzx",
						"updated": "20240423152812"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "前置知识点："
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "block-ref",
							"TextMarkBlockRefID": "20231109172904-p7r8kjc",
							"TextMarkBlockRefSubtype": "s",
							"TextMarkTextContent": "数据加密"
						},
						{
							"Type": "NodeText",
							"Data": "、异或加密 相关知识点（数据持久化之2进制中）"
						}
					]
				}
			]
		},
		{
			"ID": "20240423152826-weu1ew7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240423152826-weu1ew7",
				"updated": "20240423152833"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "加密工具模块 主要作用"
				}
			]
		},
		{
			"ID": "20240423152837-v2vq8kx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423152837-v2vq8kx",
				"updated": "20240423152845"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在游戏开发中，为了防止玩家利用修改器等工具修改游戏数据，我们往往会加入数据加密功能\n主要作用就是提高游戏安全性，防止被修改，而加密工具模块就是为了方便数据加密而存在的"
				}
			]
		},
		{
			"ID": "20240423152837-on88l7o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423152837-on88l7o",
				"updated": "20240423152852"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "加密工具模块的主要作用，就是将存储在内存中的数据进行加密，避免玩家利用修改器查找内存中数据进行修改"
				}
			]
		},
		{
			"ID": "20240423152853-trb18aq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240423152853-trb18aq",
				"updated": "20240423152858"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "加密工具模块 基本原理"
				}
			]
		},
		{
			"ID": "20240423152903-4n33123",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20240423152903-4n33123",
				"updated": "20240423152915"
			},
			"Children": [
				{
					"ID": "20240423152915-eiwo991",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240423152915-eiwo991",
						"updated": "20240423152915"
					},
					"Children": [
						{
							"ID": "20240423152915-ekvgxi9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423152915-ekvgxi9",
								"updated": "20240423152915"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "加密：将原本存储在内存中的值进行加密后变换为另一个值存储在内存中\n"
								}
							]
						}
					]
				},
				{
					"ID": "20240423152916-u679s1q",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240423152916-u679s1q"
					},
					"Children": [
						{
							"ID": "20240423152916-iyyyj9x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423152916-iyyyj9x"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "解密：将内存中存储的值进行解密后得到原始值\n"
								}
							]
						}
					]
				},
				{
					"ID": "20240423152917-czrcdsp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240423152917-czrcdsp"
					},
					"Children": [
						{
							"ID": "20240423152917-5koxiwl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423152917-5koxiwl"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "加密算法：异或加密"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240423152903-z585lqk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423152903-z585lqk",
				"updated": "20240423152922"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们将新建一个加密工具类，主要提供以下方法："
				}
			]
		},
		{
			"ID": "20240423152922-estl72z",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240423152922-estl72z",
				"updated": "20240423152922"
			},
			"Children": [
				{
					"ID": "20240423152922-1wlpt1p",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240423152922-1wlpt1p",
						"updated": "20240423152922"
					},
					"Children": [
						{
							"ID": "20240423152922-qqgp3qb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423152922-qqgp3qb",
								"updated": "20240423152922"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "获取随机密钥 方法"
								}
							]
						}
					]
				},
				{
					"ID": "20240423152922-9r41n96",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240423152922-9r41n96",
						"updated": "20240423152922"
					},
					"Children": [
						{
							"ID": "20240423152922-x4taqrt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423152922-x4taqrt",
								"updated": "20240423152922"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "加密数据 方法"
								}
							]
						}
					]
				},
				{
					"ID": "20240423152922-3gqnwo9",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20240423152922-3gqnwo9",
						"updated": "20240423152922"
					},
					"Children": [
						{
							"ID": "20240423152922-16cekuo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423152922-16cekuo",
								"updated": "20240423152922"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "解密数据 方法"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240423152903-1s7xq55",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423152903-1s7xq55",
				"updated": "20240423152903"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "只要在需要加密的地方进行相关方法调用即可"
				}
			]
		},
		{
			"ID": "20240423201335-ib45kjl",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240423201335-ib45kjl",
				"updated": "20240423201347"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "加密工具模块 具体实现"
				}
			]
		},
		{
			"ID": "20240423202451-8a9cmnx",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240423202451-8a9cmnx",
				"updated": "20240423204922"
			},
			"Children": [
				{
					"ID": "20240423202451-tjm1ndg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240423202451-tjm1ndg",
						"updated": "20240423202451"
					},
					"Children": [
						{
							"ID": "20240423202451-2xtub7f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423202451-2xtub7f",
								"updated": "20240423202451"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "获取随机密钥 方法"
								}
							]
						},
						{
							"ID": "20240423203752-i9vzarl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423203752-i9vzarl",
								"updated": "20240423203833"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如何获取随机密钥是可以自定义的"
								}
							]
						},
						{
							"ID": "20240423203743-vojfgtl",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20240423203743-vojfgtl",
								"style": "line-height: 22px;",
								"updated": "20240423203750"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "YyM="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "/// \u003csummary\u003e\n/// 获取随机密钥\n/// \u003c/summary\u003e\n/// \u003creturns\u003e生成的密钥\u003c/returns\u003e\npublic static int GetRandomKey()\n{\n    return Random.Range(0, 10000);\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20240423202451-xebqb48",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240423202451-xebqb48",
						"updated": "20240423203910"
					},
					"Children": [
						{
							"ID": "20240423202451-heoiv3j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423202451-heoiv3j",
								"updated": "20240423202451"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "加密数据 方法"
								}
							]
						},
						{
							"ID": "20240423203844-wxqe04f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423203844-wxqe04f",
								"updated": "20240423203910"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如何加密和解密数据可以是自定义的"
								}
							]
						},
						{
							"ID": "20240423203835-lcwtujo",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20240423203835-lcwtujo",
								"style": "line-height: 22px;",
								"updated": "20240423203842"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "YyM="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "/// \u003csummary\u003e\n/// 加密数据\n/// \u003c/summary\u003e\n/// \u003cparam name=\"value\"\u003e要加密的值\u003c/param\u003e\n/// \u003cparam name=\"key\"\u003e密钥\u003c/param\u003e\n/// \u003creturns\u003e加密后的值\u003c/returns\u003e\npublic static int LockValue(int value, int key)\n{\n    //主要采用异或加密，在密钥的基础上进行异或运算，可以加上部分写死的内容，这样外部即使得知密钥也不能解密\n    //加密解密的步骤是完全可以自定义的\n    value ^= (key % 9);\n    value ^= 0xADAD;\n    value ^= (1 \u003c\u003c 5);\n    value += key;\n    return value;\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20240423202451-vf2uuhe",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20240423202451-vf2uuhe",
						"updated": "20240423204922"
					},
					"Children": [
						{
							"ID": "20240423202451-07klw1k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423202451-07klw1k",
								"updated": "20240423202451"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "解密数据 方法"
								}
							]
						},
						{
							"ID": "20240423204736-vizqdd0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240423204736-vizqdd0",
								"updated": "20240423204922"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "值得一提的是，解密数据时，有可能传入的数值是0，如果是0，\n则很可能这个值是未加密的未初始化数据，此时我们不能去做解密"
								}
							]
						},
						{
							"ID": "20240423203857-q3bwu0o",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20240423203857-q3bwu0o",
								"style": "line-height: 22px;",
								"updated": "20240423203904"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "YyM="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "/// \u003csummary\u003e\n/// 解密数据\n/// \u003c/summary\u003e\n/// \u003cparam name=\"value\"\u003e要解密的值\u003c/param\u003e\n/// \u003cparam name=\"key\"\u003e密钥\u003c/param\u003e\n/// \u003creturns\u003e解密后的值\u003c/returns\u003e\npublic static int UnLockValue(int value, int key)\n{\n    //如果传入了0，可能是传入了未加密的未初始化数据，需要直接获取，此时无需解密\n    if (value == 0)\n        return value;\n    value -= key;\n    value ^= (1 \u003c\u003c 5);\n    value ^= 0xADAD;\n    value ^= (key % 9);\n    return value;\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240423203856-zqr5es1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240423203856-zqr5es1",
				"updated": "20240423203918"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "使用示例"
				}
			]
		},
		{
			"ID": "20240423203922-1lbfx5o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423203922-1lbfx5o",
				"updated": "20240423203940"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "假设要加密这个类的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "hp"
				},
				{
					"Type": "NodeText",
					"Data": "​在内存内存储的值"
				}
			]
		},
		{
			"ID": "20240423203918-s5r196m",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240423203918-s5r196m",
				"style": "line-height: 22px;",
				"updated": "20240423204613"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "public class TestPlayer\n{\n    private int hp = 0;\n    private int atk;\n\n    private readonly int key;\n\n    public TestPlayer()\n    {\n        key = EncryptionUtil.GetRandomKey();\n    }\n\n    public int HP\n    {\n        get\n        {\n            return EncryptionUtil.UnLockValue(hp, key);\n        }\n        set\n        {\n            hp = EncryptionUtil.LockValue(value, key);\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240423203954-8k0fkvl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240423203954-8k0fkvl",
				"style": "line-height: 22px;",
				"updated": "20240423204117"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "public class Main : MonoBehaviour\n{\n    void Start()\n    {\n        TestPlayer player = new TestPlayer();\n        player.HP = 100;\n        print(player.HP);\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240423204118-qsug4ks",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423204118-qsug4ks",
				"updated": "20240423204229"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通过对获取"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "hp"
				},
				{
					"Type": "NodeText",
					"Data": "​和设置"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "hp"
				},
				{
					"Type": "NodeText",
					"Data": "​语句进行断点，我们可以查看此时内存内的这个值是否被加密了"
				}
			]
		},
		{
			"ID": "20240423204233-ex0wmpy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423204233-ex0wmpy",
				"updated": "20240423204233"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "width: 521px;",
						"style": "width: 511px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240423204233-tux9h87.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 511px;\" parent-style=\"width: 521px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240423204412-ygo3c5a",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423204412-ygo3c5a",
				"updated": "20240423204545"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "运行程序，查看内存可发现内存内存储的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "hp"
				},
				{
					"Type": "NodeText",
					"Data": "​值和我们设置的值不一致，可见加密是正常工作的"
				}
			]
		},
		{
			"ID": "20240423204409-lb3znfk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423204409-lb3znfk",
				"updated": "20240423204506"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "width: 484px;",
						"style": "width: 474px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240423204409-r55hijg.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 474px;\" parent-style=\"width: 484px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240423204506-z4tl37m",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423204506-z4tl37m",
				"updated": "20240423204538"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "但是输出的获取到的值是和我们设置的是一致的，可见解密是正常工作的"
				}
			]
		},
		{
			"ID": "20240423204502-1et7fzh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240423204502-1et7fzh",
				"updated": "20240423204502"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240423204502-rt18wov.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		}
	]
}