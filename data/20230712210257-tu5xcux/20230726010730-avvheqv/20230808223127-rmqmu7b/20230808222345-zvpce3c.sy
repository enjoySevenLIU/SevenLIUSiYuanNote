{
	"ID": "20230808222345-zvpce3c",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20230808222345-zvpce3c",
		"scroll": "\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230808222345-zvpce3c\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230808235905-fqtk0wb\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230808235459-38oa7ka\u0026quot;,\u0026quot;scrollTop\u0026quot;:0\u0026#125;",
		"title": "U3L18-2——动画分层和遮罩",
		"updated": "20230809214503"
	},
	"Children": [
		{
			"ID": "20230808235905-fqtk0wb",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230808235905-fqtk0wb",
				"updated": "20230808235911"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "本章代码关键字"
				}
			]
		},
		{
			"ID": "20230808235911-oxfbx9j",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230808235911-oxfbx9j",
				"updated": "20230809000011"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "animator.GetLayerIndex()        //通过层级名字获取索引\nanimator.SetLayerWeight(,);     //设置某个层级的权重\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230808222345-1524brs",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230808222345-1524brs",
				"updated": "20230808223835"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "动画分层的主要目的"
				}
			]
		},
		{
			"ID": "20230808223843-5xsupmq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808223843-5xsupmq",
				"updated": "20230808223843"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "动画分层的作用\n游戏中会有这样的需求\n人物健康状态时播放正常动画\n人物非健康状态时播放特殊动画\n比如血量低于一定界限，人物的大部分动作将表现为虚弱状态\n我们可以利用动画分层来快速实现这样的功能"
				}
			]
		},
		{
			"ID": "20230808223843-tob2uk8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808223843-tob2uk8",
				"updated": "20230808223843"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "动画分层和动画遮罩结合使用\n3D游戏中我们常常会面对这样的需求\n人物站立时会有开枪动作\n人物跑动时会有开枪动作\n人物蹲下时会有开枪动作\n从表现上来看光是开枪动作可能就有3种\n如果要让美术同学做3种开枪动作费时又费资源"
				}
			]
		},
		{
			"ID": "20230808223843-bsbfljh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808223843-bsbfljh",
				"updated": "20230808223843"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们是否可以这样做\n比如开枪动画只影响上半身\n下半身根据实际情况播放站立，跑动，蹲下动作\n通过上下半身播放不同的动画就可以达到动画的组合播放"
				}
			]
		},
		{
			"ID": "20230808223931-3onimrh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808223931-3onimrh",
				"updated": "20230808223931"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "动画分层的主要就是达到这两个目的"
				}
			]
		},
		{
			"ID": "20230808223843-mrvqd9f",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230808223843-mrvqd9f",
				"updated": "20230808223931"
			},
			"Children": [
				{
					"ID": "20230808223931-b6z9phj",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230808223931-b6z9phj",
						"updated": "20230808223931"
					},
					"Children": [
						{
							"ID": "20230808223931-wjfbs0o",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808223931-wjfbs0o",
								"updated": "20230808223931"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "两套不同层动作的切换"
								}
							]
						}
					]
				},
				{
					"ID": "20230808223931-tmi7hkx",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230808223931-tmi7hkx",
						"updated": "20230808223931"
					},
					"Children": [
						{
							"ID": "20230808223931-0m7rkaf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808223931-0m7rkaf",
								"updated": "20230808223935"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "结合动画遮罩让两个动画叠加在一起播放"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230808223945-vy5djo6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808223945-vy5djo6",
				"updated": "20230808223945"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "提升动画多样性，节约资源"
				}
			]
		},
		{
			"ID": "20230808224107-2a1f2ju",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808224107-2a1f2ju",
				"updated": "20230808224107"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "利用动画分层我们可以做到"
				}
			]
		},
		{
			"ID": "20230808224104-mk3i00n",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230808224104-mk3i00n",
				"updated": "20230808224107"
			},
			"Children": [
				{
					"ID": "20230808224107-rkjop0s",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230808224107-rkjop0s",
						"updated": "20230808224107"
					},
					"Children": [
						{
							"ID": "20230808224107-07b7f7r",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808224107-07b7f7r",
								"updated": "20230808224107"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "上下半身播放两个动画进行组合，比如上半身扔炸弹，下半身待机移动蹲下"
								}
							]
						}
					]
				},
				{
					"ID": "20230808224107-jvwwnqd",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230808224107-jvwwnqd",
						"updated": "20230808224107"
					},
					"Children": [
						{
							"ID": "20230808224107-ylcp4mi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808224107-ylcp4mi",
								"updated": "20230808224107"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "快速制作正常状态和受伤状态的动作切换"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230808224029-0u8rea2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230808224029-0u8rea2",
				"updated": "20230808224031"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如何使用动画分层"
				}
			]
		},
		{
			"ID": "20230808224031-xj38t12",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230808224031-xj38t12",
				"updated": "20230808224045"
			},
			"Children": [
				{
					"ID": "20230808224045-92elsek",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230808224045-92elsek",
						"updated": "20230808224045"
					},
					"Children": [
						{
							"ID": "20230808224045-50la8hm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808224045-50la8hm",
								"updated": "20230808224045"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "新建一个动画层"
								}
							]
						}
					]
				},
				{
					"ID": "20230808224045-dscvmt8",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230808224045-dscvmt8",
						"updated": "20230808224045"
					},
					"Children": [
						{
							"ID": "20230808224045-iucstml",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808224045-iucstml",
								"updated": "20230808224045"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "设置动画层参数"
								}
							]
						}
					]
				},
				{
					"ID": "20230808224045-0fn5m2e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230808224045-0fn5m2e",
						"updated": "20230808224045"
					},
					"Children": [
						{
							"ID": "20230808224045-7ovq6gu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808224045-7ovq6gu",
								"updated": "20230808224045"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在该层中设置状态机（注意：结合遮罩使用时默认状态一般为Null状态）"
								}
							]
						}
					]
				},
				{
					"ID": "20230808224045-g61h4q5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20230808224045-g61h4q5",
						"updated": "20230808224045"
					},
					"Children": [
						{
							"ID": "20230808224045-nsccq0f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230808224045-nsccq0f",
								"updated": "20230808224045"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "根据需求创建动画遮罩"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230808230035-rsw6ly0",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230808230035-rsw6ly0",
				"updated": "20230808230043"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "分层参数相关"
				}
			]
		},
		{
			"ID": "20230808230057-m0eu7p9",
			"Type": "NodeSuperBlock",
			"Properties": {
				"id": "20230808230057-m0eu7p9",
				"updated": "20230809214503"
			},
			"Children": [
				{
					"Type": "NodeSuperBlockOpenMarker"
				},
				{
					"Type": "NodeSuperBlockLayoutMarker",
					"Data": "col"
				},
				{
					"ID": "20230808230044-9p6ke8p",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20230808230044-9p6ke8p",
						"updated": "20230808230058"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "​"
						},
						{
							"Type": "NodeImage",
							"Data": "span",
							"Children": [
								{
									"Type": "NodeBang"
								},
								{
									"Type": "NodeOpenBracket"
								},
								{
									"Type": "NodeLinkText",
									"Data": "image"
								},
								{
									"Type": "NodeCloseBracket"
								},
								{
									"Type": "NodeOpenParen"
								},
								{
									"Type": "NodeLinkDest",
									"Data": "assets/image-20230808230044-l1i4dw5.png"
								},
								{
									"Type": "NodeCloseParen"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "​"
						}
					]
				},
				{
					"ID": "20230808230053-oq924kg",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20230808230053-oq924kg",
						"updated": "20230809214503"
					},
					"Children": [
						{
							"ID": "20230808230053-ghap0jz",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20230808230053-ghap0jz",
								"updated": "20230808230053"
							},
							"Children": [
								{
									"ID": "20230808230053-436tj89",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230053-436tj89",
										"updated": "20230808230053"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "Weight：权重，当动画同时播放时，如果选择的是叠加状态，会根据权重决定叠加的比例"
										}
									]
								}
							]
						},
						{
							"ID": "20230808230053-p3etezm",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20230808230053-p3etezm",
								"updated": "20230808231245"
							},
							"Children": [
								{
									"ID": "20230808230053-lb6io0f",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230053-lb6io0f",
										"updated": "20230808230725"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "Mask：动画"
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "block-ref",
											"TextMarkBlockRefID": "20230808010706-xp4xz5c",
											"TextMarkBlockRefSubtype": "s",
											"TextMarkTextContent": "遮罩"
										},
										{
											"Type": "NodeText",
											"Data": "，该层动画全部都会受该遮罩的影响"
										}
									]
								},
								{
									"ID": "20230808230742-2gd0n4p",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230742-2gd0n4p",
										"updated": "20230808231245"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "可以单独编辑某个动画的遮罩\n也可以写一个遮罩文件使该层动画全部受到影响，这个方法效果更好"
										}
									]
								}
							]
						},
						{
							"ID": "20230808230053-aiawp6r",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20230808230053-aiawp6r",
								"updated": "20230808230053"
							},
							"Children": [
								{
									"ID": "20230808230053-3ta6n0a",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230053-3ta6n0a",
										"updated": "20230808230053"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "Blending：混合方式  "
										}
									]
								},
								{
									"ID": "20230808230112-umgswc9",
									"Type": "NodeList",
									"ListData": {},
									"Properties": {
										"id": "20230808230112-umgswc9"
									},
									"Children": [
										{
											"ID": "20230808230111-e7pn29a",
											"Type": "NodeListItem",
											"ListData": {
												"BulletChar": 42,
												"Marker": "Kg=="
											},
											"Properties": {
												"id": "20230808230111-e7pn29a"
											},
											"Children": [
												{
													"ID": "20230808230111-exvqkas",
													"Type": "NodeParagraph",
													"Properties": {
														"id": "20230808230111-exvqkas"
													},
													"Children": [
														{
															"Type": "NodeText",
															"Data": "Override：覆盖方式，播放该层动画时忽略其他层信息 "
														}
													]
												}
											]
										},
										{
											"ID": "20230808230114-pxe6lqr",
											"Type": "NodeListItem",
											"ListData": {
												"BulletChar": 42,
												"Marker": "Kg=="
											},
											"Properties": {
												"id": "20230808230114-pxe6lqr"
											},
											"Children": [
												{
													"ID": "20230808230114-dpfdh7x",
													"Type": "NodeParagraph",
													"Properties": {
														"id": "20230808230114-dpfdh7x"
													},
													"Children": [
														{
															"Type": "NodeText",
															"Data": "Additive：叠加方式，会和其它层动画叠加播放"
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20230808230053-iulc4yw",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20230808230053-iulc4yw",
								"updated": "20230808230053"
							},
							"Children": [
								{
									"ID": "20230808230053-m6iis4y",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230053-m6iis4y",
										"updated": "20230808230135"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "Sync：是否同步其它层\n主要用于直接从另一个层复制状态过来，在该层中进行修改\n适用于比如正常状态下有待机走路跑步等等动作，\n但是受伤状态下动作会改变，可以利用同步层方便我们进行编辑\n选择后会多一个Source Layer表示你要复制哪一层的状态"
										}
									]
								}
							]
						},
						{
							"ID": "20230808230053-0f3z0m0",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20230808230053-0f3z0m0",
								"updated": "20230808230053"
							},
							"Children": [
								{
									"ID": "20230808230053-v4a9r6g",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230053-v4a9r6g",
										"updated": "20230808230142"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "Timing：当选中Sync同步其它层时，该参数激活\n选中，会采用折中方案调整同步层上的动画时长（基于权重计算）\n不选中，动画时长将使用原始层做为母版"
										}
									]
								}
							]
						},
						{
							"ID": "20230808230053-p6lc87o",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20230808230053-p6lc87o",
								"updated": "20230809214503"
							},
							"Children": [
								{
									"ID": "20230808230053-6bi8eci",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20230808230053-6bi8eci",
										"updated": "20230809214503"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "IK Pass：反向动力学通道，如果要该层动画受到IK影响就必须要开启"
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "block-ref",
											"TextMarkBlockRefID": "20230808223334-su8bweb",
											"TextMarkBlockRefSubtype": "s",
											"TextMarkTextContent": "之后讲解IK的时候再讲解"
										}
									]
								}
							]
						}
					]
				},
				{
					"Type": "NodeSuperBlockCloseMarker"
				}
			]
		},
		{
			"ID": "20230808235450-wxkxl84",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230808235450-wxkxl84",
				"name": "animator.SetLayerWeight()",
				"updated": "20230808235459"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "代码改变权重"
				}
			]
		},
		{
			"ID": "20230808235709-ryarc92",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808235709-ryarc92",
				"updated": "20230808235805"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意！该API使用动画层级的索引作为参数，可以通过名字来获取索引"
				}
			]
		},
		{
			"ID": "20230808235743-q8bdg8p",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230808235743-q8bdg8p",
				"name": "animator.GetLayerIndex()",
				"updated": "20230808235751"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "获取层级索引"
				}
			]
		},
		{
			"ID": "20230808235752-2hpusxr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230808235752-2hpusxr",
				"updated": "20230808235838"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "animator.GetLayerIndex(\"MyLayer2\")\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230808235807-72862r8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230808235807-72862r8",
				"updated": "20230808235830"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第一个参数是层级的索引，第二个参数是修改为何种权重"
				}
			]
		},
		{
			"ID": "20230808235459-38oa7ka",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230808235459-38oa7ka",
				"updated": "20230808235707"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "animator.SetLayerWeight(animator.GetLayerIndex(\"MyLayer2\"), 1f);\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		}
	]
}