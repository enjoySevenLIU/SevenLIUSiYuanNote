{"ID":"20230813021214-jje7gts","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230813021214-jje7gts","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230813021214-jje7gts\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230814185436-d11f02i\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230815025351-qg02td9\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230814185702-sgjiqmn\u0026quot;,\u0026quot;focusStart\u0026quot;:248,\u0026quot;focusEnd\u0026quot;:248\u0026#125;","title":"UG3L13——屏幕坐标转UI相对坐标","type":"doc","updated":"20240812102704"},"Children":[{"ID":"20230814185436-d11f02i","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230814185436-d11f02i","updated":"20240812102704"},"Children":[{"Type":"NodeText","Data":"RectTransformUtility"}]},{"ID":"20230813021214-a1lcog0","Type":"NodeParagraph","Properties":{"id":"20230813021214-a1lcog0","updated":"20240807111548"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"RectTransformUtility"},{"Type":"NodeText","Data":"​ 公共类是一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"RectTransform"},{"Type":"NodeText","Data":"​ 的辅助类\n主要用于进行一些 坐标的转换等等操作\n其中对于我们目前来说 最重要的函数是 将屏幕空间上的点，转换成UI本地坐标下的点"}]},{"ID":"20230814185443-xmye1p9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230814185443-xmye1p9","name":"RectTransformUtility.ScreenPointToLocalPointInRectangle()","updated":"20240812102704"},"Children":[{"Type":"NodeText","Data":"将屏幕坐标转换为UI本地坐标系下的点"}]},{"ID":"20230815030208-c2h1jch","Type":"NodeParagraph","Properties":{"id":"20230815030208-c2h1jch","updated":"20240812102629"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"RectTransformUtility.ScreenPointToLocalPointInRectangle()"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230814185702-sgjiqmn","Type":"NodeList","ListData":{},"Properties":{"id":"20230814185702-sgjiqmn","updated":"20240812102704"},"Children":[{"ID":"20240812102632-hlarqnn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240812102632-hlarqnn","updated":"20240812102632"},"Children":[{"ID":"20240812102632-dxk2be3","Type":"NodeParagraph","Properties":{"id":"20240812102632-dxk2be3","updated":"20240812102632"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"text","TextMarkTextContent":"参数一：相对父对象的坐标系（需要RectTransform类型，"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"strong text","TextMarkTextContent":"且一定是自己的父对象，否则转换可能出现偏差！"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"text","TextMarkTextContent":"）"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeText","Data":"\n"}]}]},{"ID":"20240812102633-rt3pxhh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240812102633-rt3pxhh","updated":"20240812102704"},"Children":[{"ID":"20240812102633-2h0kw2f","Type":"NodeParagraph","Properties":{"id":"20240812102633-2h0kw2f","updated":"20240812102704"},"Children":[{"Type":"NodeText","Data":"参数二：屏幕点（要转换的相对于屏幕坐标系的点，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PointerEventData"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"position"},{"Type":"NodeText","Data":"​ 会更准确）"}]}]},{"ID":"20240812102634-jl31p6l","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240812102634-jl31p6l","updated":"20240812102653"},"Children":[{"ID":"20240812102634-ysrssrz","Type":"NodeParagraph","Properties":{"id":"20240812102634-ysrssrz","updated":"20240812102653"},"Children":[{"Type":"NodeText","Data":"参数三：摄像机（需要为UI的摄像机，可以直接用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PointerEventData"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"enterEventCamara"},{"Type":"NodeText","Data":"​）"}]}]},{"ID":"20240812102634-rgm3t11","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240812102634-rgm3t11","updated":"20240812102647"},"Children":[{"ID":"20240812102634-41jz687","Type":"NodeParagraph","Properties":{"id":"20240812102634-41jz687","updated":"20240812102647"},"Children":[{"Type":"NodeText","Data":"参数四：最终得到的点（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Vector2"},{"Type":"NodeText","Data":"​ 类型，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"out"},{"Type":"NodeText","Data":"​ 关键字，需要在使用该函数前就声明好，转换完成后该变量就会转载转换好的点）"}]}]}]},{"ID":"20240812102639-a6vrnck","Type":"NodeParagraph","Properties":{"id":"20240812102639-a6vrnck","updated":"20240812102640"},"Children":[{"Type":"NodeText","Data":"一般配合拖拽事件使用，效果远比 位置增加拖拽的变化量 更好"}]},{"ID":"20230814185631-2hr02jb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230814185631-2hr02jb","updated":"20230815030707"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"using UnityEngine;\nusing UnityEngine.EventSystems;\n\npublic class Lesson20 : MonoBehaviour, IDragHandler\n{\n    public void OnDrag(PointerEventData eventData)\n    {\n        Vector2 nowPos;\n        RectTransformUtility.ScreenPointToLocalPointInRectangle(this.transform.parent as RectTransform,\n                                                                eventData.position,\n                                                                eventData.enterEventCamera,\n                                                                out nowPos);\n        this.transform.localPosition = nowPos;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230815025351-qg02td9","Type":"NodeParagraph","Properties":{"id":"20230815025351-qg02td9"}}]}