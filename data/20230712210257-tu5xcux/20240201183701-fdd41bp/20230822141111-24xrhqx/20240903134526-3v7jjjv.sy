{"ID":"20240903134526-3v7jjjv","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240903134526-3v7jjjv","title":"CS3L16——万物之父和装箱拆箱","type":"doc","updated":"20250314114241"},"Children":[{"ID":"20240904140811-sniya83","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240904140811-sniya83","updated":"20240904140830"},"Children":[{"Type":"NodeText","Data":"本章代码关键字"}]},{"ID":"20240904140819-3lv0eff","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240904140819-3lv0eff","style":"line-height: 22px;","updated":"20240904140830"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"object\t//所有类型（包括值类型）的基类，它是一个类（引用类型）\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240903134526-vdrqc8q","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240903134526-vdrqc8q","name":"object","updated":"20240904195421"},"Children":[{"Type":"NodeText","Data":"万物之父 object"}]},{"ID":"20240903134553-wyq4mja","Type":"NodeParagraph","Properties":{"id":"20240903134553-wyq4mja","updated":"20240903140133"},"Children":[{"Type":"NodeText","Data":"关键字："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 是所有类型（包括值类型）的基类，它是一个类（引用类型）\n基于里氏替换原则，可以用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 容器装载一切类型的变量"}]},{"ID":"20240903134608-crhpfr4","Type":"NodeParagraph","Properties":{"id":"20240903134608-crhpfr4","updated":"20240903134621"},"Children":[{"Type":"NodeText","Data":"作用："}]},{"ID":"20240903134621-ibiyq78","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240903134621-ibiyq78","updated":"20240903134621"},"Children":[{"ID":"20240903134621-6xsvno2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240903134621-6xsvno2","updated":"20240903134621"},"Children":[{"ID":"20240903134621-g1t3zly","Type":"NodeParagraph","Properties":{"id":"20240903134621-g1t3zly","updated":"20240903134658"},"Children":[{"Type":"NodeText","Data":"可以利用里氏替换原则，用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 装任意类型对象"}]}]},{"ID":"20240903134621-yihcg4j","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240903134621-yihcg4j","updated":"20240903134621"},"Children":[{"ID":"20240903134621-dklqjkb","Type":"NodeParagraph","Properties":{"id":"20240903134621-dklqjkb","updated":"20240903134621"},"Children":[{"Type":"NodeText","Data":"可以用来表示不确定类型，作为函数参数类型"}]}]}]},{"ID":"20240903140113-cup1l0u","Type":"NodeParagraph","Properties":{"id":"20240903140113-cup1l0u","updated":"20240903140226"},"Children":[{"Type":"NodeText","Data":"用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 存储值类型（装箱），将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 转为值类型（拆箱），存在拆箱装箱"}]},{"ID":"20240903140154-6oq7zsc","Type":"NodeList","ListData":{},"Properties":{"id":"20240903140154-6oq7zsc","updated":"20240903140154"},"Children":[{"ID":"20240903140154-jr0k960","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903140154-jr0k960","updated":"20240903140154"},"Children":[{"ID":"20240903140154-grjxz5d","Type":"NodeParagraph","Properties":{"id":"20240903140154-grjxz5d","updated":"20240903140154"},"Children":[{"Type":"NodeText","Data":"好处：不确定类型时可以方便参数的存储和传递\n"}]}]},{"ID":"20240903140155-y11s0qv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903140155-y11s0qv","updated":"20240903140155"},"Children":[{"ID":"20240903140155-8cb9fgl","Type":"NodeParagraph","Properties":{"id":"20240903140155-8cb9fgl","updated":"20240903140202"},"Children":[{"Type":"NodeText","Data":"坏处：存在内存迁移，增加性能消耗"}]}]}]},{"ID":"20240903140205-g73znoi","Type":"NodeParagraph","Properties":{"id":"20240903140205-g73znoi","updated":"20240903140219"},"Children":[{"Type":"NodeText","Data":"因为装箱拆箱有性能损耗，所以最好慎用"}]},{"ID":"20240904195400-2d45wtp","Type":"NodeParagraph","Properties":{"id":"20240904195400-2d45wtp","updated":"20240904195421"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 自带了一些方法，详见："},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240904142216-ek0i6ab","TextMarkBlockRefSubtype":"d","TextMarkTextContent":"CS3L23——object中的方法"}]},{"ID":"20240903134710-qcrmc3p","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240903134710-qcrmc3p","updated":"20240903135154"},"Children":[{"Type":"NodeText","Data":"万物之父的使用"}]},{"ID":"20240903134941-y2rf8a0","Type":"NodeParagraph","Properties":{"id":"20240903134941-y2rf8a0","updated":"20240903135154"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 是所有类型的基类，包括所有值类型和引用类型\n将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 类型转换为其他类型时，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240903124343-rlgn1d0","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"as"},{"Type":"NodeText","Data":"​ 也可以使用"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20230614193355-yfpkyvm","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"括号强转"},{"Type":"NodeText","Data":"，引用类型建议使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"as"},{"Type":"NodeText","Data":"​，值类型需要使用括号强转"}]},{"ID":"20240903134733-cgl6x7x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240903134733-cgl6x7x","style":"line-height: 22px;","updated":"20240903134848"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"class Father { }\n\nclass Son : Father \n{\n    public void Speak() { }  \n}\n\ninternal class Program\n{\n    static void Main(string[] args)\n    {\n        //引用类型\n        object o = new Son();\n        //object可以装载任何一个对象\n        Son s = new Son();\n        o = s;\n        //用is as 转换\n        if (o is Son)\n        {\n            (o as Son).Speak();\n        }\n\n        //值类型\n        object o2 = 1;\n        object o3 = 2f;\n        //用括号强转\n        int i = (int)o2;\n        float fl = (float)o3;\n\n        //特殊的string类型\n        object str = \"123123\";\n        string str2 = str as string;\n\n        //数组\n        object arr = new int[10];\n        int[] ar = (int[])arr;\n        //但是建议使用引用类型的都使用is as方法\n        object arr2 = new int[10];\n        int[] ar2 = arr2 as int[];\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240903134828-u9g6y3l","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240903134828-u9g6y3l","updated":"20250314114241"},"Children":[{"Type":"NodeText","Data":"装箱拆箱"}]},{"ID":"20240903135228-x3fslbi","Type":"NodeParagraph","Properties":{"id":"20240903135228-x3fslbi","updated":"20240903135234"},"Children":[{"Type":"NodeText","Data":"发生条件："}]},{"ID":"20240903135234-01rieoz","Type":"NodeList","ListData":{},"Properties":{"id":"20240903135234-01rieoz","updated":"20240903135836"},"Children":[{"ID":"20240903135234-r6ddwqx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903135234-r6ddwqx","updated":"20240903135836"},"Children":[{"ID":"20240903135234-veof0gv","Type":"NodeParagraph","Properties":{"id":"20240903135234-veof0gv","updated":"20240903135238"},"Children":[{"Type":"NodeText","Data":"用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 存储值类型（装箱）"}]},{"ID":"20240903135409-a6e9pho","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240903135409-a6e9pho","style":"line-height: 22px;","updated":"20240903135836"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"object obj = 1;\t\t//装箱\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240903135235-zu5j5f3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903135235-zu5j5f3","updated":"20240903135453"},"Children":[{"ID":"20240903135235-3tr77g0","Type":"NodeParagraph","Properties":{"id":"20240903135235-3tr77g0","updated":"20240903135242"},"Children":[{"Type":"NodeText","Data":"将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 转为值类型（拆箱）"}]},{"ID":"20240903135418-nekipte","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240903135418-nekipte","style":"line-height: 22px;","updated":"20240903135453"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"object obj = 1;\t\t//装箱\nint i = (int)obj;\t//拆箱\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240903135326-ew7tbdy","Type":"NodeParagraph","Properties":{"id":"20240903135326-ew7tbdy","updated":"20240903135328"},"Children":[{"Type":"NodeText","Data":"其中："}]},{"ID":"20240903135228-3p27gfe","Type":"NodeList","ListData":{},"Properties":{"id":"20240903135228-3p27gfe","updated":"20240903135522"},"Children":[{"ID":"20240903135331-q0zx3zl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903135331-q0zx3zl","updated":"20240903135510"},"Children":[{"ID":"20240903135331-wn6meza","Type":"NodeParagraph","Properties":{"id":"20240903135331-wn6meza","updated":"20240903135510"},"Children":[{"Type":"NodeText","Data":"装箱：把值类型使用引用类型变量存储，栈内存会迁移到堆内存中"}]}]},{"ID":"20240903135332-8vtyd0k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903135332-8vtyd0k","updated":"20240903135522"},"Children":[{"ID":"20240903135332-ruuhl03","Type":"NodeParagraph","Properties":{"id":"20240903135332-ruuhl03","updated":"20240903135522"},"Children":[{"Type":"NodeText","Data":"拆箱：把引用类型存储的值类型数据取出来到值类型变量，堆内存会迁移到栈内存中"}]}]}]},{"ID":"20240903135340-wqmojb8","Type":"NodeParagraph","Properties":{"id":"20240903135340-wqmojb8","updated":"20240903135400"},"Children":[{"Type":"NodeText","Data":"装箱拆箱的问题："}]},{"ID":"20240903135228-eu6zcz5","Type":"NodeList","ListData":{},"Properties":{"id":"20240903135228-eu6zcz5","updated":"20240903140041"},"Children":[{"ID":"20240903135402-spk56aq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903135402-spk56aq","updated":"20240903135950"},"Children":[{"ID":"20240903135402-gidcvj2","Type":"NodeParagraph","Properties":{"id":"20240903135402-gidcvj2","updated":"20240903135402"},"Children":[{"Type":"NodeText","Data":"好处：不确定类型时可以方便参数的存储和传递"}]},{"ID":"20240903135854-2igiqv3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240903135854-2igiqv3","style":"line-height: 22px;","updated":"20240903135950"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"static void Main(string[] args)\n{\n    TestFun(1, 4f, 34.5, \"123123\", false);\n}\n\nstatic void TestFun(params object[] array)\n{\n    //这样就可以确保所有类型的参数都能传进来\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240903135403-dqwam6u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240903135403-dqwam6u","updated":"20240903140041"},"Children":[{"ID":"20240903135403-h1gcgla","Type":"NodeParagraph","Properties":{"id":"20240903135403-h1gcgla","updated":"20240903140041"},"Children":[{"Type":"NodeText","Data":"坏处：存在内存迁移，增加性能消耗，因为有性能损耗，所以最好避免"}]}]}]},{"ID":"20240903135618-zfpnvrq","Type":"NodeParagraph","Properties":{"id":"20240903135618-zfpnvrq","updated":"20250314114240"},"Children":[{"Type":"NodeText","Data":"装箱拆箱常出现在函数参数传递中，后续可以使用 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"泛型"},{"Type":"NodeText","Data":" 解决这个问题，它可以消除大部分情况的装箱拆箱，具体内容可见："},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240907195242-5lbrmqr","TextMarkBlockRefSubtype":"d","TextMarkTextContent":"CS4L5——泛型"}]},{"ID":"20250314114241-qxrc4as","Type":"NodeParagraph","Properties":{"id":"20250314114241-qxrc4as","updated":"20250314114241"}}]}