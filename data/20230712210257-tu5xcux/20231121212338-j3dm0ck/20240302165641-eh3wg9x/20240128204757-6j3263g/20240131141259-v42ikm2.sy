{"ID":"20240131141259-v42ikm2","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240131141259-v42ikm2","title":"UH2S1L10——协同程序","type":"doc","updated":"20250109173835"},"Children":[{"ID":"20240131141259-wx9kphp","Type":"NodeParagraph","Properties":{"id":"20240131141259-wx9kphp","updated":"20250109173756"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20230712214614-4ja3qtk","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"协同程序"},{"Type":"NodeText","Data":" 概念已在Unity基础讲过，这里不再赘述"}]},{"ID":"20240131141510-evpa56n","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131141510-evpa56n","updated":"20240131141755"},"Children":[{"Type":"NodeText","Data":"本章代码关键字"}]},{"ID":"20240131141824-s0j8lk9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131141824-s0j8lk9","style":"line-height: 22px;","updated":"20240131155922"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"coroutine.create()\t\t--创建协程，返回thread类型变量\ncoroutine.wrap()\t\t--创建协程，返回function类型变量\ncoroutine.yield()\t\t--挂起协程，参数用于返回协程\ncoroutine.resume()\t\t--启动thread类型的协程变量，返回协程运行是否成功和协程返回值\ncoroutine.status()\t\t--检测thread类型的协程变量的运行状态\ncoroutine.running()\t\t--返回当前正在运行的协程的协程号\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131141758-u1rcia3","Type":"NodeHeading","HeadingLevel":2,"Properties":{"alias":"coroutine.wrap()","id":"20240131141758-u1rcia3","name":"coroutine.create()","updated":"20250109173804"},"Children":[{"Type":"NodeText","Data":"协程的创建"}]},{"ID":"20240131142308-p48ntao","Type":"NodeParagraph","Properties":{"id":"20240131142308-p48ntao","updated":"20240131142407"},"Children":[{"Type":"NodeText","Data":"使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.create"},{"Type":"NodeText","Data":"​传入作为协程的函数，创建协程，检查类型发现其变量类型为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"thread"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131141842-a2v1635","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131141842-a2v1635","style":"line-height: 22px;","updated":"20240131141803"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"function Fun()\n    print(123)\nend\n\nlocal co = coroutine.create(Fun)\nprint(type(co))\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131142243-ck7w4u9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131142243-ck7w4u9","style":"line-height: 22px;","updated":"20240131141803"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"thread\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131142447-ar3mgt6","Type":"NodeParagraph","Properties":{"id":"20240131142447-ar3mgt6","updated":"20250109173804"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.wrap"},{"Type":"NodeText","Data":"​ 传入作为协程的函数，也可以创建协程，检查类型发现其变量类型为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"function"},{"Type":"NodeText","Data":"​\n一旦你调用这个返回的函数，就进入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine"},{"Type":"NodeText","Data":"​，和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"create"},{"Type":"NodeText","Data":"​ 功能重复"}]},{"ID":"20240131142507-utnzfha","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131142507-utnzfha","style":"line-height: 22px;","updated":"20240131142619"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"function Fun()\n    print(123)\nend\n\nlocal co2 = coroutine.wrap(Fun)\nprint(type(co2))\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131142620-8yg9pk8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131142620-8yg9pk8","style":"line-height: 22px;","updated":"20240131142627"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"function\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131141804-n6as3vg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131141804-n6as3vg","name":"coroutine.resume()","updated":"20250109173835"},"Children":[{"Type":"NodeText","Data":"协程的运行"}]},{"ID":"20240131142801-0tgtkhg","Type":"NodeParagraph","Properties":{"id":"20240131142801-0tgtkhg","updated":"20250109173835"},"Children":[{"Type":"NodeText","Data":"如果使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.create"},{"Type":"NodeText","Data":"​ 创建协程，则需要使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.resume()"},{"Type":"NodeText","Data":"​ 传入协程变量，开启协程"}]},{"ID":"20240131142725-dy8sd34","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131142725-dy8sd34","style":"line-height: 22px;","updated":"20240131141808"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协同程序************\")\nfunction Fun()\n    print(123)\nend\n\nlocal co = coroutine.create(Fun)\nprint(type(co))\n\ncoroutine.resume(co)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131142843-1f49hmw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131142843-1f49hmw","style":"line-height: 22px;","updated":"20240131142856"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"**********协同程序************\nthread\n123\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131142902-prw4ejc","Type":"NodeParagraph","Properties":{"id":"20240131142902-prw4ejc","updated":"20240131142938"},"Children":[{"Type":"NodeText","Data":"如果使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.wrap"},{"Type":"NodeText","Data":"​创建协程，则直接调用返回的函数，开启协程"}]},{"ID":"20240131142940-6uqamoy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131142940-6uqamoy","style":"line-height: 22px;","updated":"20240131143011"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协同程序************\")\nfunction Fun()\n    print(123)\nend\n\nlocal co2 = coroutine.wrap(Fun)\nprint(type(co2))\n\nco2()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131143013-6k0ps36","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131143013-6k0ps36","style":"line-height: 22px;","updated":"20240131143028"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"**********协同程序************\nfunction\n123\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131141808-7efjtyv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131141808-7efjtyv","name":"coroutine.yield()","updated":"20240131141814"},"Children":[{"Type":"NodeText","Data":"协程的挂起"}]},{"ID":"20240131143812-a8d6mml","Type":"NodeParagraph","Properties":{"id":"20240131143812-a8d6mml","updated":"20240131144633"},"Children":[{"Type":"NodeText","Data":"协程函数内部通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.yield"},{"Type":"NodeText","Data":"​函数挂起协程，该函数可以有参数，即挂起后向外部返回什么值\n外部在启动协程后会得到两个值，一个是协程是否运行成功，另一个是协程挂起或"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"return"},{"Type":"NodeText","Data":"​后返回了什么值"}]},{"ID":"20240131144040-65md854","Type":"NodeParagraph","Properties":{"id":"20240131144040-65md854","updated":"20240131144145"},"Children":[{"Type":"NodeText","Data":"协程挂起后需要重新运行协程，协程函数会从上次挂起的地方继续向下执行逻辑，直到再次挂起或执行完毕"}]},{"ID":"20240131144157-8j5zyjk","Type":"NodeParagraph","Properties":{"id":"20240131144157-8j5zyjk","updated":"20240131144846"},"Children":[{"Type":"NodeText","Data":"通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.wrap"},{"Type":"NodeText","Data":"​创建的协程，启动协程时不会返回协程是否运行成功，只会返回挂起或"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"return"},{"Type":"NodeText","Data":"​返回了什么值"}]},{"ID":"20240131143048-5ijnwff","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131143048-5ijnwff","style":"line-height: 22px;","updated":"20240131144800"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协程的挂起************\")\nfunction Fun2()\n    local i = 1\n    while true do\n        print(i)\n        -- 协程的挂起函数\n        coroutine.yield(\"协程挂起: \" .. i)\n        i = i + 1\n    end\nend\n\nlocal co3 = coroutine.create(Fun2)\nlocal isOK, tempI = coroutine.resume(co3)\nprint(isOK, tempI)\nlocal isOK, tempI = coroutine.resume(co3)\nprint(isOK, tempI)\nlocal isOK, tempI = coroutine.resume(co3)\nprint(isOK, tempI)\n\nlocal co4 = coroutine.wrap(Fun2)\nprint(\"返回值: \" .. co4())\nprint(\"返回值: \" .. co4())\nprint(\"返回值: \" .. co4())\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131144235-cd32cll","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131144235-cd32cll","style":"line-height: 22px;","updated":"20240131144811"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"**********协程的挂起************\n1\ntrue\t协程挂起: 1\n2\ntrue\t协程挂起: 2\n3\ntrue\t协程挂起: 3\n1\n返回值: 协程挂起: 1\n2\n返回值: 协程挂起: 2\n3\n返回值: 协程挂起: 3\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131145240-4vfalph","Type":"NodeParagraph","Properties":{"id":"20240131145240-4vfalph","updated":"20240131145429"},"Children":[{"Type":"NodeText","Data":"值得一提的是，当协程函数执行完毕（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"return"},{"Type":"NodeText","Data":"​了）而非挂起时，再次启动协程会失败，如果接收其返回值会得到启动失败的信息\n（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.wrap"},{"Type":"NodeText","Data":"​创建的协程调用执行会直接报错，报错信息也是启动失败的信息）"}]},{"ID":"20240131145430-o6skx5p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131145430-o6skx5p","style":"line-height: 22px;","updated":"20240131145513"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协同程序************\")\nfunction Fun()\n    print(123)\nend\n\nlocal co = coroutine.create(Fun)\ncoroutine.resume(co)\nprint(coroutine.resume(co))\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131145442-a51wpxe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131145442-a51wpxe","style":"line-height: 22px;","updated":"20240131145508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"123\nfalse\tcannot resume dead coroutine\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131145517-ub6nz3m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131145517-ub6nz3m","style":"line-height: 22px;","updated":"20240131145536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协同程序************\")\nfunction Fun()\n    print(123)\nend\n\nlocal co2 = coroutine.wrap(Fun)\nco2()\nprint(co2())\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131145538-7oh31u6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131145538-7oh31u6","style":"line-height: 22px;","updated":"20240131145608"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"lua: e:\\CodeField\\VSC\\Lua_Learn\\tempCodeRunnerFile.lua:8: cannot resume dead coroutine\nstack traceback:\n\t[C]: in function 'co2'\n\te:\\CodeField\\VSC\\Lua_Learn\\tempCodeRunnerFile.lua:8: in main chunk\n\t[C]: ?\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131141816-h517ixw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131141816-h517ixw","name":"coroutine.status()","updated":"20240131141821"},"Children":[{"Type":"NodeText","Data":"协程的状态"}]},{"ID":"20240131144853-rh6m624","Type":"NodeParagraph","Properties":{"id":"20240131144853-rh6m624","updated":"20240131145006"},"Children":[{"Type":"NodeText","Data":"协程对象有三种状态："}]},{"ID":"20240131145006-vydsna4","Type":"NodeList","ListData":{},"Properties":{"id":"20240131145006-vydsna4","updated":"20240131145007"},"Children":[{"ID":"20240131145007-qcff01p","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240131145007-qcff01p","updated":"20240131145007"},"Children":[{"ID":"20240131145007-sj6hiei","Type":"NodeParagraph","Properties":{"id":"20240131145007-sj6hiei","updated":"20240131145016"},"Children":[{"Type":"NodeText","Data":"dead 结束"}]}]},{"ID":"20240131145016-3t22xx4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240131145016-3t22xx4"},"Children":[{"ID":"20240131145016-jl3guxy","Type":"NodeParagraph","Properties":{"id":"20240131145016-jl3guxy","updated":"20240131145029"},"Children":[{"Type":"NodeText","Data":"suspended 暂停"}]}]},{"ID":"20240131145030-01nhdas","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240131145030-01nhdas"},"Children":[{"ID":"20240131145030-o0g5uh4","Type":"NodeParagraph","Properties":{"id":"20240131145030-o0g5uh4","updated":"20240131145038"},"Children":[{"Type":"NodeText","Data":"running 运行中"}]}]}]},{"ID":"20240131145653-ohug8tf","Type":"NodeParagraph","Properties":{"id":"20240131145653-ohug8tf","updated":"20240131155115"},"Children":[{"Type":"NodeText","Data":"通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.status"},{"Type":"NodeText","Data":"​传入要判断的协程，可以得到协程的状态（其中如果要获取running这个状态只能在协程内部获取\n（别忘了装载协程使用全局变量，不然检查不到）"}]},{"ID":"20240131154401-x4ho03n","Type":"NodeParagraph","Properties":{"id":"20240131154401-x4ho03n","updated":"20240131155257"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"code strong text","TextMarkTextContent":"coroutine.status"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"strong text","TextMarkTextContent":"主要用于检测"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"code strong text","TextMarkTextContent":"create"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"strong text","TextMarkTextContent":"创建的协同程序，"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"code strong text","TextMarkTextContent":"wrap"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"strong text","TextMarkTextContent":"创建的无法通过status进行状态检测"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"}]},{"ID":"20240131144456-0olbq1s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131144456-0olbq1s","style":"line-height: 22px;","updated":"20240131155148"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协程的状态************\")\nfunction Fun()\n    print(123)\nend\nlocal co = coroutine.create(Fun)\n\nfunction Fun2()\n    local i = 1\n    while true do\n        print(i)\n        i = i + 1\n        print(coroutine.status(co3))\n        coroutine.yield(\"协程挂起: \" .. i)\n    end\nend\nco3 = coroutine.create(Fun2)\n\ncoroutine.resume(co)\ncoroutine.resume(co3)\n\nprint(coroutine.status(co3))\nprint(coroutine.status(co))\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131150220-gv7mf3p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131150220-gv7mf3p","style":"line-height: 22px;","updated":"20240131155138"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"**********协程的状态************\n123\n1\nrunning\nsuspended\ndead\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131152434-alc0zn5","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131152434-alc0zn5","name":"coroutine.running()","updated":"20240131152553"},"Children":[{"Type":"NodeText","Data":"查看运行中的协程"}]},{"ID":"20240131155317-obz3ijm","Type":"NodeParagraph","Properties":{"id":"20240131155317-obz3ijm","updated":"20240131155915"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"coroutine.running()"},{"Type":"NodeText","Data":"​可以获取当前正在执行的协程的协程号"}]},{"ID":"20240131152545-d1i0aw3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131152545-d1i0aw3","style":"line-height: 22px;","updated":"20240131152553"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"print(\"**********协程的状态************\")\nfunction Fun()\n    print(123)\n    print(coroutine.running())\nend\nlocal co = coroutine.create(Fun)\n\nfunction Fun2()\n    local i = 1\n    while true do\n        print(i)\n        i = i + 1\n        print(coroutine.running())\n        coroutine.yield(\"协程挂起: \" .. i)\n    end\nend\nco3 = coroutine.create(Fun2)\n\ncoroutine.resume(co)\ncoroutine.resume(co3)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240131154842-qn7hxtb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240131154842-qn7hxtb","style":"line-height: 22px;","updated":"20240131152553"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bHVh"},{"Type":"NodeCodeBlockCode","Data":"**********协程的状态************\n123\nthread: 004ED7E0\n1\nthread: 004EE300\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}