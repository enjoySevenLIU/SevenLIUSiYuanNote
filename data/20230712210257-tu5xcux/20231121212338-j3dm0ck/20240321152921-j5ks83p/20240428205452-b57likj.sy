{
	"ID": "20240428205452-b57likj",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240428205452-b57likj",
		"title": "UH4L17——性能优化相关",
		"type": "doc",
		"updated": "20240428211307"
	},
	"Children": [
		{
			"ID": "20240428211015-c0pmoio",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240428211015-c0pmoio",
				"updated": "20240428211021"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "本章代码关键字"
				}
			]
		},
		{
			"ID": "20240428211022-uuqqn0r",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240428211022-uuqqn0r",
				"style": "line-height: 22px;",
				"updated": "20240428211118"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "appDomain.Prewarm()\t\t//提前预热加载某个类或者方法，提高第一次执行时的性能\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240428205452-41tfxoe",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240428205452-41tfxoe",
				"updated": "20240428210523"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ILRuntime性能测试或打包时的注意事项（设置相关）"
				}
			]
		},
		{
			"ID": "20240428210531-gmq212r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240428210531-gmq212r",
				"updated": "20240428210536"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果要进行ILRuntime性能测试，或最终打包，为了达到最好的性能表现，需要注意以下几点"
				}
			]
		},
		{
			"ID": "20240428210531-1hlrdm3",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240428210531-1hlrdm3",
				"updated": "20240428210834"
			},
			"Children": [
				{
					"ID": "20240428210534-hfker7g",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240428210534-hfker7g",
						"updated": "20240428210534"
					},
					"Children": [
						{
							"ID": "20240428210534-tpzukhc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210534-tpzukhc",
								"updated": "20240428210534"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "热更工程生成的DLL包使用Release编译生成"
								}
							]
						},
						{
							"ID": "20240428210713-us5ehm5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210713-us5ehm5",
								"updated": "20240428210713"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Properties": {
										"parent-style": "width: 704px;",
										"style": "width: 694px;"
									},
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "image"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/image-20240428210713-1trnuhb.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeKramdownSpanIAL",
									"Data": "{: style=\"width: 694px;\" parent-style=\"width: 704px;\"}"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210534-1blhnoz",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240428210534-1blhnoz",
						"updated": "20240428210534"
					},
					"Children": [
						{
							"ID": "20240428210534-4mtu6uk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210534-4mtu6uk",
								"updated": "20240428210534"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在Unity编辑器中的执行效率会低于真机，内存占用也会相差数倍，建议真机测试性能和内存​​"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210534-7fc44qv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20240428210534-7fc44qv",
						"updated": "20240428210534"
					},
					"Children": [
						{
							"ID": "20240428210534-0bj98nb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210534-0bj98nb",
								"updated": "20240428210551"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "打包时不要勾选 Development Build（开发构建），若勾选打包后真机测试效率会较低"
								}
							]
						},
						{
							"ID": "20240428210740-ehc28dm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210740-ehc28dm",
								"updated": "20240428210740"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Properties": {
										"parent-style": "width: 375px;",
										"style": "width: 365px;"
									},
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "image"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/image-20240428210734-p40mwri.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeKramdownSpanIAL",
									"Data": "{: style=\"width: 365px;\" parent-style=\"width: 375px;\"}"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210534-y23yhq5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20240428210534-y23yhq5",
						"updated": "20240428210834"
					},
					"Children": [
						{
							"ID": "20240428210534-o6mu37p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210534-o6mu37p",
								"updated": "20240428210803"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果是IL2CPP打包，在 PlayerSetting 中 的 Other Setting 中需要将 C++ Compiler Configuration(C++编译器配置)设置为 Release，\n否则效率较低（Unity2018以后）"
								}
							]
						},
						{
							"ID": "20240428210834-3vv8s3x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210834-3vv8s3x",
								"updated": "20240428210834"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Properties": {
										"parent-style": "width: 743px;",
										"style": "width: 733px;"
									},
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "image"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/image-20240428210834-95qgkzk.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeKramdownSpanIAL",
									"Data": "{: style=\"width: 733px;\" parent-style=\"width: 743px;\"}"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240428210553-gvmyrqk",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240428210553-gvmyrqk",
				"updated": "20240428210602"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ILRuntime性能测试或打包时的注意事项（代码相关）"
				}
			]
		},
		{
			"ID": "20240428210607-vh2do26",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240428210607-vh2do26",
				"updated": "20240428210610"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果要进行ILRuntime性能测试，或最终打包，为了达到最好的性能表现，需要注意一下几点"
				}
			]
		},
		{
			"ID": "20240428210607-7wkc8qj",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240428210607-7wkc8qj",
				"updated": "20240428210649"
			},
			"Children": [
				{
					"ID": "20240428210619-mllrgvk",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240428210619-mllrgvk",
						"updated": "20240428210619"
					},
					"Children": [
						{
							"ID": "20240428210619-oyphslp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-oyphslp",
								"updated": "20240428210619"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "一定要进行CLR绑定，可以大幅提升性能表现"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210619-wspbvhg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240428210619-wspbvhg",
						"updated": "20240428210619"
					},
					"Children": [
						{
							"ID": "20240428210619-jwodk7p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-jwodk7p",
								"updated": "20240428210619"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "一定要注册值类型绑定"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210619-usqppum",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20240428210619-usqppum",
						"updated": "20240428210622"
					},
					"Children": [
						{
							"ID": "20240428210619-hkmsi1q",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-hkmsi1q",
								"updated": "20240428210622"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在ILRuntime中不要频繁使用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "foreach"
								},
								{
									"Type": "NodeText",
									"Data": "​，它会加大开销"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210619-2dezm6c",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20240428210619-2dezm6c",
						"updated": "20240428210619"
					},
					"Children": [
						{
							"ID": "20240428210619-y1qwomp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-y1qwomp",
								"updated": "20240428210619"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "热更调用主工程的开销 小于 主工程调用热更的开销"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210619-71r7ngg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20240428210619-71r7ngg",
						"updated": "20240428210649"
					},
					"Children": [
						{
							"ID": "20240428210619-wbfvx7i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-wbfvx7i",
								"updated": "20240428210649"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "主工程调用热更工程函数时，尽量使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "BeginInvoke"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的形式（无GC Alloc方式）"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210619-rq55vj4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20240428210619-rq55vj4",
						"updated": "20240428210638"
					},
					"Children": [
						{
							"ID": "20240428210619-68n9mus",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-68n9mus",
								"updated": "20240428210638"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "要合理规划热更部分和非热更部分，因为热更部分的内容，效率肯定是比不上原生执行的"
								}
							]
						},
						{
							"ID": "20240428210638-x8l4hu8",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20240428210638-x8l4hu8",
								"updated": "20240428210638"
							},
							"Children": [
								{
									"ID": "20240428210638-dvg4z8c",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20240428210638-dvg4z8c",
										"updated": "20240428210638"
									},
									"Children": [
										{
											"ID": "20240428210638-ln5hllf",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240428210638-ln5hllf",
												"updated": "20240428210638"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "不要想着所有代码都做成热更代码，这样效率肯定会受到影响"
												}
											]
										}
									]
								},
								{
									"ID": "20240428210638-h36nbyo",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20240428210638-h36nbyo",
										"updated": "20240428210638"
									},
									"Children": [
										{
											"ID": "20240428210638-0hb3p29",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240428210638-0hb3p29",
												"updated": "20240428210638"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "消耗较大的独立算法（比如寻路算法等），应写在主工程中供热更使用"
												}
											]
										}
									]
								},
								{
									"ID": "20240428210638-6snorpi",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20240428210638-6snorpi",
										"updated": "20240428210638"
									},
									"Children": [
										{
											"ID": "20240428210638-ppd3pwh",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240428210638-ppd3pwh",
												"updated": "20240428210638"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "稳定不变的独立模块（比如网络通讯模块等），应写在主工程中供热更使用"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20240428210619-dg9mpna",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ny4=",
						"Num": 7
					},
					"Properties": {
						"id": "20240428210619-dg9mpna",
						"updated": "20240428210642"
					},
					"Children": [
						{
							"ID": "20240428210619-pz1v2gq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210619-pz1v2gq",
								"updated": "20240428210642"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "使用 ILRuntime2.0 新加入的寄存器模式优化计算密集的的内容，优化性能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240428210849-pm3xmn0",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240428210849-pm3xmn0",
				"updated": "20240428210850"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如何排查性能问题"
				}
			]
		},
		{
			"ID": "20240428210854-f8v24t7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240428210854-f8v24t7",
				"updated": "20240428210854"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通过Profiler性能调试窗口来排查性能问题（ILRuntime加入了Profiler支持）"
				}
			]
		},
		{
			"ID": "20240428210900-ckj2jb5",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240428210900-ckj2jb5",
				"updated": "20240428210901"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可选的优化方案"
				}
			]
		},
		{
			"ID": "20240428210907-z8egen8",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240428210907-z8egen8",
				"updated": "20240428211307"
			},
			"Children": [
				{
					"ID": "20240428210910-tqug397",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240428210910-tqug397",
						"name": "appDomain.Prewarm()",
						"updated": "20240428210920"
					},
					"Children": [
						{
							"ID": "20240428210910-n28bz74",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210910-n28bz74",
								"updated": "20240428210920"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "ILRuntime中方法的第一次执行会有额外开销，我们可以通过ILRuntime提供的预热加载功能解决，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "appDomain.Prewarm(类名或指定方法)"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210910-gn5xywr",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240428210910-gn5xywr",
						"updated": "20240428211307"
					},
					"Children": [
						{
							"ID": "20240428210910-ysb0a4c",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210910-ysb0a4c",
								"updated": "20240428211215"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "编辑器中有每次额外的内存开销，我们可以定义"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "DISABLE_ILRUNTIME_DEBUG"
								},
								{
									"Type": "NodeText",
									"Data": "​宏来避免，但是会失去 断点调试 和 行号报告 功能"
								}
							]
						},
						{
							"ID": "20240428211307-u4en9y2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428211307-u4en9y2",
								"updated": "20240428211307"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Properties": {
										"parent-style": "width: 604px;",
										"style": "width: 594px;"
									},
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "image"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/image-20240428211307-u9285sg.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeKramdownSpanIAL",
									"Data": "{: style=\"width: 594px;\" parent-style=\"width: 604px;\"}"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				},
				{
					"ID": "20240428210910-yqtcn4g",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20240428210910-yqtcn4g",
						"updated": "20240428210910"
					},
					"Children": [
						{
							"ID": "20240428210910-hhvwv4z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240428210910-hhvwv4z",
								"updated": "20240428210910"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "正式发布时，我们不需要获取调试相关信息，我们可以选择不加载pdb文件，以节省更多内存"
								}
							]
						}
					]
				}
			]
		}
	]
}