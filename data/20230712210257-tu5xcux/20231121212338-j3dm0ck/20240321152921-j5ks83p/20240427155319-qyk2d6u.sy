{
	"ID": "20240427155319-qyk2d6u",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240427155319-qyk2d6u",
		"title": "UH4L11——热更新工程使用MonoBehaviour",
		"type": "doc",
		"updated": "20240427163449"
	},
	"Children": [
		{
			"ID": "20240427155755-fa9zlcw",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20240427155755-fa9zlcw",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "热更新工程使用MonoBehaviour"
				}
			]
		},
		{
			"ID": "20240427155756-ztxgv1g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427155756-ztxgv1g",
				"updated": "20240427155823"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ILRuntime中虽然支持跨域继承"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "MonoBehaviour"
				},
				{
					"Type": "NodeText",
					"Data": "​，但是作者并不建议大家这样做\n我们可以通过类似Lua热更中那样，在主工程中实现用于派发生命周期函数的的公共脚本\n通过委托或事件达到生命周期函数的调用"
				}
			]
		},
		{
			"ID": "20240427155319-a7c3nu5",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240427155319-a7c3nu5",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ILRuntime不推荐直接使用MonoBehaviour"
				}
			]
		},
		{
			"ID": "20240427155547-97ciy31",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427155547-97ciy31",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ILRuntime中支持在热更工程中跨域继承"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "MonoBehaviour"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240427155550-5r2voe9",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240427155550-5r2voe9",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"ID": "20240427155550-e4z4dmo",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240427155550-e4z4dmo",
						"updated": "20240427155550"
					},
					"Children": [
						{
							"ID": "20240427155550-d5jrn1d",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240427155550-d5jrn1d",
								"updated": "20240427155550"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "注册跨域继承适配器"
								}
							]
						}
					]
				},
				{
					"ID": "20240427155550-smh680c",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240427155550-smh680c",
						"updated": "20240427155732"
					},
					"Children": [
						{
							"ID": "20240427155550-1xl6un1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240427155550-1xl6un1",
								"updated": "20240427155732"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "对泛型方法"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "AddComponent"
								},
								{
									"Type": "NodeText",
									"Data": "​进行重定向（较为复杂）"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240427155547-jxy9sp2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427155547-jxy9sp2",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "但是，ILRuntime并不推荐通过跨域继承直接使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "MonoBehaviour"
				},
				{
					"Type": "NodeText",
					"Data": "​\n推荐大家类似"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "block-ref",
					"TextMarkBlockRefID": "20240203131640-6npmb39",
					"TextMarkBlockRefSubtype": "s",
					"TextMarkTextContent": "Lua"
				},
				{
					"Type": "NodeText",
					"Data": "中一样使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "MonoBehaviour"
				},
				{
					"Type": "NodeText",
					"Data": "​\n在主工程中通过委托或事件的形式派发生命周期函数 到 热更中"
				}
			]
		},
		{
			"ID": "20240427155547-y1malgs",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427155547-y1malgs",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "主要原因：\n​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "MonoBehaviour"
				},
				{
					"Type": "NodeText",
					"Data": "​是一个很特殊的类，很多底层逻辑是在C++中处理的\n比如其中"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "public"
				},
				{
					"Type": "NodeText",
					"Data": "​字段的序列化，在Inspector窗口中显示的功能，\n如果在热更工程中去写，底层C++逻辑无法获取到热更工程中C#相关的信息"
				}
			]
		},
		{
			"ID": "20240427155720-81tfk7z",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240427155720-81tfk7z",
				"updated": "20240427155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "派发生命周期函数的形式使用MonoBehaviour"
				}
			]
		},
		{
			"ID": "20240427155750-lyiyq9n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427155750-lyiyq9n",
				"updated": "20240427155816"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在主工程中实现一个脚本，该脚本的主要目的就是派发"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "MonoBehaviour"
				},
				{
					"Type": "NodeText",
					"Data": "​的声明周期函数供热更工程中使用"
				}
			]
		},
		{
			"ID": "20240427162026-0awm190",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240427162026-0awm190",
				"style": "line-height: 22px;",
				"updated": "20240427162922"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "using System;\nusing UnityEngine;\n\npublic class ILRuntimeMono : MonoBehaviour\n{\n    public event Action awakeEvent;\n    public event Action startEvent;\n    public event Action updateEvent;\n\n    void Awake()\n    {\n        awakeEvent?.Invoke();\n    }\n\n    void Start()\n    {\n        startEvent?.Invoke();\n    }\n\n    void Update()\n    {\n        updateEvent?.Invoke();\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240427162830-w6iiq4g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427162830-w6iiq4g",
				"updated": "20240427162922"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "热更新工程内："
				}
			]
		},
		{
			"ID": "20240427162835-403crc0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240427162835-403crc0",
				"style": "line-height: 22px;",
				"updated": "20240427162932"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "public class ILRuntimeMain\n{\n    public static void Main()\n    {\n        GameObject obj = new GameObject();\n        ILRuntimeMono mono = obj.AddComponent\u003cILRuntimeMono\u003e();\n        mono.awakeEvent += () =\u003e\n        {\n            Debug.Log(\"Awake\");\n        };\n        mono.startEvent += () =\u003e\n        {\n            Debug.Log(\"Start\");\n        };\n        mono.updateEvent += () =\u003e\n        {\n            Debug.Log(\"Update\");\n        };\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240427163250-x7rz4wm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427163250-x7rz4wm",
				"updated": "20240427163251"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "值得一提的是，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Awake"
				},
				{
					"Type": "NodeText",
					"Data": "​是一个相对特殊的生命周期函数，它类似于构造函数，在脚本添加的时候就会自动执行\n因此在挂载了脚本后，再向脚本对象添加"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Awake"
				},
				{
					"Type": "NodeText",
					"Data": "​要执行的委托，然后执行是做不到的"
				}
			]
		},
		{
			"ID": "20240427162816-4lkp2id",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427162816-4lkp2id",
				"updated": "20240427162820"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "输出："
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "width: 981px;",
						"style": "width: 971px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240427162820-ho8grbh.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 971px;\" parent-style=\"width: 981px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240427163252-tw5ozvf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427163252-tw5ozvf",
				"updated": "20240427163351"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果想要模拟"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Awake"
				},
				{
					"Type": "NodeText",
					"Data": "​的效果，在挂载了脚本以后直接执行初始化逻辑即可，不需要额外声明事件并添加"
				}
			]
		},
		{
			"ID": "20240427163327-8nsagmj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240427163327-8nsagmj",
				"style": "line-height: 22px;",
				"updated": "20240427163417"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "public static void Main()\n{\n    GameObject obj = new GameObject();\n    ILRuntimeMono mono = obj.AddComponent\u003cILRuntimeMono\u003e();\n    Debug.Log(\"Awake\");\n    //mono.awakeEvent += () =\u003e\n    //{\n    //    Debug.Log(\"Awake\");\n    //};\n    mono.startEvent += () =\u003e\n    {\n        Debug.Log(\"Start\");\n    };\n    mono.updateEvent += () =\u003e\n    {\n        Debug.Log(\"Update\");\n    };\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240427163421-ghbi5m0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240427163421-ghbi5m0",
				"updated": "20240427163449"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "输出："
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "width: 487px;",
						"style": "width: 477px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240427163449-tf5fd8s.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 477px;\" parent-style=\"width: 487px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		}
	]
}