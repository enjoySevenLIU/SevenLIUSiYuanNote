{
	"ID": "20240322202911-xhgiju4",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240322202911-xhgiju4",
		"title": "UH3L8——编辑器功能—设置默认资源",
		"type": "doc",
		"updated": "20241210232747"
	},
	"Children": [
		{
			"ID": "20240322202911-mdtpx4c",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240322202911-mdtpx4c",
				"updated": "20240324143545"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "前置知识点"
				}
			]
		},
		{
			"ID": "20240322202931-e2u6kjp",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20240322202931-e2u6kjp",
				"updated": "20240322203312"
			},
			"Children": [
				{
					"ID": "20240322202932-4y2uiwl",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240322202932-4y2uiwl",
						"updated": "20240322202932"
					},
					"Children": [
						{
							"ID": "20240322202932-0amd22g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240322202932-0amd22g",
								"updated": "20240322202951"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "C"
								},
								{
									"Type": "NodeBackslash",
									"Data": "span",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "#"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "文件操作"
								}
							]
						}
					]
				},
				{
					"ID": "20240322202954-zg5cjqf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240322202954-zg5cjqf",
						"updated": "20240322203312"
					},
					"Children": [
						{
							"ID": "20240322202954-jtde4vr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240322202954-jtde4vr",
								"updated": "20240322203312"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Unity编辑器相关 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code block-ref",
									"TextMarkBlockRefID": "20240317224643-rwv86f4",
									"TextMarkBlockRefSubtype": "s",
									"TextMarkTextContent": "[MenuItem()]"
								},
								{
									"Type": "NodeText",
									"Data": "​、"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code block-ref",
									"TextMarkBlockRefID": "20240322202844-nbn3m7k",
									"TextMarkBlockRefSubtype": "s",
									"TextMarkTextContent": "Selection"
								},
								{
									"Type": "NodeText",
									"Data": "​、"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code block-ref",
									"TextMarkBlockRefID": "20240322203112-qaifufa",
									"TextMarkBlockRefSubtype": "s",
									"TextMarkTextContent": "AssetDatabase"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240324143551-clnhvh2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240324143551-clnhvh2",
				"updated": "20241210232747"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为何要设置默认资源"
				}
			]
		},
		{
			"ID": "20240324144001-kmvl0mp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240324144001-kmvl0mp",
				"updated": "20241210232747"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "发布后，让不需要更新的 AB 包或者第一次启动必须要使用的AB包不从服务器上下载，直接从 StreamingAssets 文件夹内读取"
				}
			]
		},
		{
			"ID": "20240324143646-w03xez2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240324143646-w03xez2",
				"updated": "20241210232742"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "目标"
				}
			]
		},
		{
			"ID": "20240324144243-ns9wgrh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240324144243-ns9wgrh",
				"updated": "20241210232742"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "将编辑器中选中的 AB 包资源文件（无后缀名的文件），复制到 StreamingAssets 文件夹内，打包后可以随游戏程序一起发布作为默认资源"
				}
			]
		},
		{
			"ID": "20240324144546-2uegfyh",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240324144546-2uegfyh",
				"updated": "20241210232735"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "实现流程"
				}
			]
		},
		{
			"ID": "20240324144553-cfgjc6y",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20240324144553-cfgjc6y",
				"updated": "20241210232735"
			},
			"Children": [
				{
					"ID": "20240324144629-nfblwi6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240324144629-nfblwi6",
						"updated": "20241210232703"
					},
					"Children": [
						{
							"ID": "20240324144629-yh1xxo1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240324144629-yh1xxo1",
								"updated": "20241210232703"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "使用特性为菜单栏添加一个选项 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "AB包工具/移动选中资源到StreamingAssets中"
								},
								{
									"Type": "NodeText",
									"Data": "​，从选项里触发该功能 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "MoveABToStreamingAssets()"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				},
				{
					"ID": "20240324144633-0b9yj4p",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20240324144633-0b9yj4p",
						"updated": "20241210232735"
					},
					"Children": [
						{
							"ID": "20240324144633-j0v95lo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240324144633-j0v95lo",
								"updated": "20240324144734"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "MoveABToStreamingAssets"
								},
								{
									"Type": "NodeText",
									"Data": "​内"
								}
							]
						},
						{
							"ID": "20240324144735-qbxo7x3",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20240324144735-qbxo7x3",
								"updated": "20241210232735"
							},
							"Children": [
								{
									"ID": "20240324144734-u27ke3h",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20240324144734-u27ke3h",
										"updated": "20241210232707"
									},
									"Children": [
										{
											"ID": "20240324144734-kc27qg2",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240324144734-kc27qg2",
												"updated": "20241210232707"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "通过编辑器 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20240322202844-nbn3m7k",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "Selection"
												},
												{
													"Type": "NodeText",
													"Data": "​ 类中的方法，获取在Project窗口选中的资源，如果未选中资源就不执行后续逻辑直接返回出去"
												}
											]
										}
									]
								},
								{
									"ID": "20240324144810-yj01izp",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20240324144810-yj01izp",
										"updated": "20241210232718"
									},
									"Children": [
										{
											"ID": "20240324144810-e27shkz",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240324144810-e27shkz",
												"updated": "20241210232718"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "遍历选中的资源对象，通过 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20240406160242-5j3ohai",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "AssetDatabase.GetAssetPath()"
												},
												{
													"Type": "NodeText",
													"Data": "​ 获取资源的路径，根据该路径截取文件名"
												}
											]
										}
									]
								},
								{
									"ID": "20240324144907-heyz0kw",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20240324144907-heyz0kw",
										"updated": "20241210232720"
									},
									"Children": [
										{
											"ID": "20240324144907-hvtfhop",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240324144907-hvtfhop",
												"updated": "20241210232720"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "检查该文件名是否有 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "'.'"
												},
												{
													"Type": "NodeText",
													"Data": "​，如果有说明有后缀名，说明不是AB包，跳过该文件，检查下一个文件"
												}
											]
										}
									]
								},
								{
									"ID": "20240324145014-3hcwzs9",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NC4=",
										"Num": 4
									},
									"Properties": {
										"id": "20240324145014-3hcwzs9",
										"updated": "20241210232731"
									},
									"Children": [
										{
											"ID": "20240324145014-jot11gm",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240324145014-jot11gm",
												"updated": "20241210232731"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "使用 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20240406160242-xon6eih",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "AssetDatabase.CopyAsset()"
												},
												{
													"Type": "NodeText",
													"Data": "​ 来讲AB包文件复制到 StreamingAssets 文件夹下"
												}
											]
										}
									]
								},
								{
									"ID": "20240324145051-4rwfd2k",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NS4=",
										"Num": 5
									},
									"Properties": {
										"id": "20240324145051-4rwfd2k",
										"updated": "20241210232735"
									},
									"Children": [
										{
											"ID": "20240324145051-nico83n",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240324145051-nico83n",
												"updated": "20241210232735"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "读取所有赋值到 StreamingAssets 文件夹下的AB包文件，获取其文件名，大小，MD5码，生成默认资源对比文件到 StreamingAssets 文件夹"
												}
											]
										}
									]
								},
								{
									"ID": "20240324145236-hgpqhq3",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Ni4=",
										"Num": 6
									},
									"Properties": {
										"id": "20240324145236-hgpqhq3"
									},
									"Children": [
										{
											"ID": "20240324145236-a4pul0e",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20240324145236-a4pul0e",
												"updated": "20240324145251"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "刷新编辑器窗口"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240322203052-nwj6d2a",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240322203052-nwj6d2a",
				"style": "line-height: 22px;",
				"updated": "20240324144553"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YyM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "using System.IO;\nusing UnityEditor;\nusing UnityEngine;\n\npublic class MoveABToSA\n{\n    [MenuItem(\"AB包工具/移动选中资源到StreamingAssets中\")]\n    private static void MoveABToStreamingAssets()\n    {\n        //通过编辑器Selection类中的方法，获取在Project窗口选中的资源\n        Object[] selectedAsset = Selection.GetFiltered(typeof(UnityEngine.Object), SelectionMode.DeepAssets);\n        if (selectedAsset.Length == 0)\n            return;\n        //用于拼接本地默认AB包资源消息的字符串\n        string abCompareInfo = \"\";\n        //遍历选中的资源对象\n        foreach (Object asset in selectedAsset)\n        {\n            //通过AssetDatabase类获取资源的路径\n            string assetPath = AssetDatabase.GetAssetPath(asset);\n            //截取路径当中的文件名，用于作为StreamingAsset中的文件名\n            string fileName = assetPath.Substring(assetPath.LastIndexOf('/'));\n            //如果文件名有'.'，说明有后缀名，也就不是AB包，因此我们需要忽略掉\n            if (fileName.IndexOf('.') != -1)\n                continue;\n            //利用AssetDatabase中的API将选中文件复制到目标路径\n            AssetDatabase.CopyAsset(assetPath, \"Assets/StreamingAssets\" + fileName);\n            //获取拷贝到StreamingAssets文件夹中的文件的全部信息\n            FileInfo fileInfo = new FileInfo(Application.streamingAssetsPath + fileName);\n            abCompareInfo += fileInfo.Name + \" \" + fileInfo.Length + \" \" + CreateABCompare.GetMD5(fileInfo.FullName);\n            abCompareInfo += \"|\";\n        }\n        //去掉最后一个|符号，为了之后拆分字符串方便\n        abCompareInfo = abCompareInfo.Substring(0, abCompareInfo.Length - 1);\n        //将本地默认资源的对比消息存入文件\n        File.WriteAllText(Application.streamingAssetsPath + \"/ABCompareInfo.txt\", abCompareInfo);\n        AssetDatabase.Refresh();\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		}
	]
}