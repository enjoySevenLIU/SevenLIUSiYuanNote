{"ID":"20240516124428-4talew2","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240516124428-4talew2","title":"US2S1L9——复合运算","type":"doc","updated":"20250109113201"},"Children":[{"ID":"20240516124428-tpo2pnc","Type":"NodeBlockquote","Properties":{"id":"20240516124428-tpo2pnc","updated":"20240602172721"},"Children":[{"ID":"20240602172055-rgajuog","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240602172055-rgajuog","updated":"20240602172721"},"Children":[{"Type":"NodeText","Data":"回顾各个变换矩阵"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e","Properties":{"updated":"20240602172106"}},{"ID":"20240516124530-sv8120k","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240516124530-sv8120k","updated":"20240602172721"},"Children":[{"ID":"20240516124533-cee7lvs","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240516124533-cee7lvs","updated":"20240602172441"},"Children":[{"ID":"20240516124533-mf09kwh","Type":"NodeParagraph","Properties":{"id":"20240516124533-mf09kwh","updated":"20240516124536"},"Children":[{"Type":"NodeText","Data":"平移矩阵"}]},{"ID":"20240516124557-x6s9zmc","Type":"NodeMathBlock","Properties":{"id":"20240516124557-x6s9zmc","updated":"20240602172441"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\begin{bmatrix}\n  1 \u0026 0 \u0026 0 \u0026 tx \\\\\n  0 \u0026 1 \u0026 0 \u0026 ty \\\\\n  0 \u0026 0 \u0026 1 \u0026 tz \\\\\n  0 \u0026 0 \u0026 0 \u0026 1\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]}]},{"ID":"20240516124537-jpa924j","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240516124537-jpa924j","updated":"20240602172458"},"Children":[{"ID":"20240516124537-napjrt5","Type":"NodeParagraph","Properties":{"id":"20240516124537-napjrt5","updated":"20240516124540"},"Children":[{"Type":"NodeText","Data":"旋转矩阵"}]},{"ID":"20240516124611-sffpv78","Type":"NodeSuperBlock","Properties":{"id":"20240516124611-sffpv78","updated":"20240602172458"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240516124611-c2sa4cw","Type":"NodeSuperBlock","Properties":{"id":"20240516124611-c2sa4cw","updated":"20240516124611"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240516124611-cu4jeb1","Type":"NodeParagraph","Properties":{"id":"20240516124611-cu4jeb1","style":"text-align: center;","updated":"20240516124611"},"Children":[{"Type":"NodeText","Data":"绕 x 轴旋转 β 度，旋转矩阵为："}]},{"ID":"20240516124611-0yy46rs","Type":"NodeMathBlock","Properties":{"id":"20240516124611-0yy46rs","updated":"20240516124611"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\begin{bmatrix}\n  1 \u0026 0 \u0026 0 \u0026 0 \\\\\n  0 \u0026 cos\\beta \u0026 -sin\\beta \u0026 0 \\\\\n  0 \u0026 sin\\beta \u0026 cos\\beta \u0026 0 \\\\\n  0 \u0026 0 \u0026 0 \u0026 1 \\\\\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240516124611-kb94oc2","Type":"NodeSuperBlock","Properties":{"id":"20240516124611-kb94oc2","updated":"20240602172458"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240516124611-0h2yd3g","Type":"NodeParagraph","Properties":{"id":"20240516124611-0h2yd3g","style":"text-align: center;","updated":"20240516124611"},"Children":[{"Type":"NodeText","Data":"绕 y 轴旋转 β 度，旋转矩阵为："}]},{"ID":"20240516124611-9wtb3ji","Type":"NodeMathBlock","Properties":{"id":"20240516124611-9wtb3ji","updated":"20240602172458"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\begin{bmatrix}\n  cos\\beta \u0026 0 \u0026 sin\\beta \u0026 0 \\\\\n  0 \u0026 1 \u0026 0 \u0026 0 \\\\\n  -sin\\beta \u0026 0 \u0026 cos\\beta \u0026 0 \\\\\n  0 \u0026 0 \u0026 0 \u0026 1 \\\\\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240516124611-5bq2srj","Type":"NodeSuperBlock","Properties":{"id":"20240516124611-5bq2srj","updated":"20240516124611"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240516124611-qusbdy5","Type":"NodeParagraph","Properties":{"id":"20240516124611-qusbdy5","style":"text-align: center;","updated":"20240516124611"},"Children":[{"Type":"NodeText","Data":"绕 z 轴旋转 β 度，旋转矩阵为："}]},{"ID":"20240516124611-ssn7bbe","Type":"NodeMathBlock","Properties":{"id":"20240516124611-ssn7bbe","updated":"20240516124611"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\begin{bmatrix}\n  cos\\beta \u0026 -sin\\beta \u0026 0 \u0026 0 \\\\\n  sin\\beta \u0026 cos\\beta \u0026 0 \u0026 0 \\\\\n  0 \u0026 0 \u0026 1 \u0026 0 \\\\\n  0 \u0026 0 \u0026 0 \u0026 1 \\\\\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]},{"ID":"20240516124540-9obk9ep","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240516124540-9obk9ep","updated":"20240602172721"},"Children":[{"ID":"20240516124540-8zjgg0w","Type":"NodeParagraph","Properties":{"id":"20240516124540-8zjgg0w","updated":"20240516124543"},"Children":[{"Type":"NodeText","Data":"缩放矩阵"}]},{"ID":"20240516124617-7lrctpe","Type":"NodeMathBlock","Properties":{"id":"20240516124617-7lrctpe","updated":"20240602172721"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\begin{bmatrix}\n  kx \u0026 0 \u0026 0 \u0026 0 \\\\\n  0 \u0026 ky \u0026 0 \u0026 0 \\\\\n  0 \u0026 0 \u0026 kz \u0026 0 \\\\\n  0 \u0026 0 \u0026 0 \u0026 1 \\\\\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]}]}]}]},{"ID":"20240516124622-schzo52","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240516124622-schzo52","updated":"20250109113145"},"Children":[{"Type":"NodeText","Data":"复合运算"}]},{"ID":"20240516124641-cu95x97","Type":"NodeParagraph","Properties":{"id":"20240516124641-cu95x97","updated":"20240516124806"},"Children":[{"Type":"NodeText","Data":"所谓的"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"复合运算"},{"Type":"NodeText","Data":"，其实就是我们在计算矩阵变换时，可以"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"把平移、旋转、缩放等计算组合起来，"},{"Type":"NodeText","Data":"\n通过结合多矩阵的乘法，来"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"形成一个复杂的变换过程"},{"Type":"NodeText","Data":"。"}]},{"ID":"20240516124746-e61ysr4","Type":"NodeParagraph","Properties":{"id":"20240516124746-e61ysr4","updated":"20240516124751"},"Children":[{"Type":"NodeText","Data":"比如：我们可以将一个模型，先缩放到2倍大小，再绕y轴旋转60°，最后再向x轴平移5个单位。"}]},{"ID":"20240516124741-f1p6q6d","Type":"NodeParagraph","Properties":{"id":"20240516124741-f1p6q6d","updated":"20240516124741"},"Children":[{"Type":"NodeText","Data":"这种复合变换过程，我们可以通过矩阵的串联来实现。\n我们之前的知识点讲过，我们通过列矩阵的形式进行计算时，利用乘法结合律\n可以从右往左去计算：先缩放、后旋转、再平移。"}]},{"ID":"20240516124657-8k7t43z","Type":"NodeMathBlock","Properties":{"id":"20240516124657-8k7t43z","updated":"20250109113145"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"P_{新} = M_{平移}M_{旋转}M_{缩放}P_{老}"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20240516124656-vz9owwi","Type":"NodeParagraph","Properties":{"id":"20240516124656-vz9owwi","updated":"20240516124829"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"简而意之：复合运算就是把各种矩阵变换组合起来，形成一个复杂的变换过程"}]},{"ID":"20240516124841-pclsdo1","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240516124841-pclsdo1","updated":"20240601161722"},"Children":[{"Type":"NodeText","Data":"计算顺序对结果的影响"}]},{"ID":"20240516124849-gydtr4b","Type":"NodeParagraph","Properties":{"id":"20240516124849-gydtr4b","updated":"20240516124926"},"Children":[{"Type":"NodeText","Data":"在进行"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"复合运算时，变换的结果依赖于变换的顺序"}]},{"ID":"20240516124857-pyamaad","Type":"NodeParagraph","Properties":{"id":"20240516124857-pyamaad","updated":"20240516124922"},"Children":[{"Type":"NodeText","Data":"原因："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"矩阵乘法不满足交换律"},{"Type":"NodeText","Data":"\n也就是说，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"不同的变换顺序得到的计算结果也可能是不一样的。"}]},{"ID":"20240516124915-n779n9r","Type":"NodeParagraph","Properties":{"id":"20240516124915-n779n9r","updated":"20240516124915"},"Children":[{"Type":"NodeText","Data":"比如：一个人先往前一步，再左转 和 一个人先左转，再往前一步"}]},{"ID":"20240516124905-xi2ouec","Type":"NodeParagraph","Properties":{"id":"20240516124905-xi2ouec","updated":"20240516124905"},"Children":[{"Type":"NodeText","Data":"得到的结果是不一样的，在矩阵运算的乘法运算中也会出现这样的情况\n主要原因，就是因为矩阵乘法不支持交换律"}]},{"ID":"20240516124943-g1m1yvv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240516124943-g1m1yvv","updated":"20250109113201"},"Children":[{"Type":"NodeText","Data":"Unity 中需要遵守的规则"}]},{"ID":"20240516124955-igbtzuh","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240516124955-igbtzuh","updated":"20250109113157"},"Children":[{"ID":"20240516125000-ecywvjs","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240516125000-ecywvjs","updated":"20240516125000"},"Children":[{"ID":"20240516125000-gdghlcs","Type":"NodeParagraph","Properties":{"id":"20240516125000-gdghlcs","updated":"20240516125000"},"Children":[{"Type":"NodeText","Data":"在进行平移、旋转、缩放的复合运算时\n"}]},{"ID":"20240516125006-smbzn4u","Type":"NodeParagraph","Properties":{"id":"20240516125006-smbzn4u","updated":"20240516125015"},"Children":[{"Type":"NodeText","Data":"绝大多数情况下，我们约定的变换顺序为："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"先缩放、再旋转、后平移"},{"Type":"NodeText","Data":"\n"}]}]},{"ID":"20240516125001-6xb1m00","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240516125001-6xb1m00","updated":"20250109113157"},"Children":[{"ID":"20240516125001-85x3amk","Type":"NodeParagraph","Properties":{"id":"20240516125001-85x3amk","updated":"20250109113157"},"Children":[{"Type":"NodeText","Data":"在进行 x 轴、y 轴、z 轴旋转的复合运算时"}]},{"ID":"20240516125009-pam06iy","Type":"NodeParagraph","Properties":{"id":"20240516125009-pam06iy","updated":"20240516125025"},"Children":[{"Type":"NodeText","Data":"绝大多数情况下，我们约定的变换顺序为："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"z -\u0026gt; x -\u0026gt; y"},{"Type":"NodeText","Data":"\n"}]}]}]},{"ID":"20240516125025-jnxymxi","Type":"NodeParagraph","Properties":{"id":"20240516125025-jnxymxi","updated":"20250109113201"},"Children":[{"Type":"NodeText","Data":"之后我们在 Unity 中进行 Shader 开发时，遵从这两个规则即可"}]},{"ID":"20240601161722-wzr8m33","Type":"NodeParagraph","Properties":{"id":"20240601161722-wzr8m33"}}]}