{"ID":"20250220123804-7uwr17e","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250220123804-7uwr17e","title":"US5L9——表面着色器","type":"doc","updated":"20250227191531"},"Children":[{"ID":"20250220124028-elghevu","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20250220124028-elghevu","updated":"20250227191507"},"Children":[{"Type":"NodeText","Data":"表面着色器"}]},{"ID":"20250220124028-12bccus","Type":"NodeParagraph","Properties":{"id":"20250220124028-12bccus","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"表面着色器（Surface Shader）是 Unity 自己创造的一种着色器代码类型，\n它的本质是对顶点 / 片元着色器的一层封装，它需要的代码量很少，很多工作都帮助我们去完成了"}]},{"ID":"20250220124028-ms8lfba","Type":"NodeParagraph","Properties":{"id":"20250220124028-ms8lfba","updated":"20250220124207"},"Children":[{"Type":"NodeText","Data":"它的优点在于，它帮助我们处理了很多光照细节，我们可以直接使用而无需自己计算实现光照细节，\n它的缺点是渲染的消耗较大，可控性较低。"}]},{"ID":"20250220124028-1u3kyt7","Type":"NodeParagraph","Properties":{"id":"20250220124028-1u3kyt7","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"我们可以在创建 Shader 时，选择创建 Standard Surface Shader"}]},{"ID":"20250220124028-a3cfyio","Type":"NodeParagraph","Properties":{"id":"20250220124028-a3cfyio","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 523px;","style":"width: 513px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240615201013-leatj87.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 513px;\" parent-style=\"width: 523px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250220124028-3mvqgkf","Type":"NodeParagraph","Properties":{"id":"20250220124028-3mvqgkf","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"通过观察该 Shader 文件的内部结构，会发现着色器相关代码被放在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"SubShader"},{"Type":"NodeText","Data":"​ 语句块中（并非 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​ ）的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CGPROGRAM"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ENDCG"},{"Type":"NodeText","Data":"​ 之间"}]},{"ID":"20250220124028-41twp6w","Type":"NodeParagraph","Properties":{"id":"20250220124028-41twp6w","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 901px;","style":"width: 891px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240615201134-2sxcopk.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 891px;\" parent-style=\"width: 901px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250220124028-ffos95g","Type":"NodeParagraph","Properties":{"id":"20250220124028-ffos95g","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"表面着色器的特点就是："}]},{"ID":"20250220124028-scbiqmg","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250220124028-scbiqmg","updated":"20250220124355"},"Children":[{"ID":"20250220124028-5h9uwlt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250220124028-5h9uwlt","updated":"20250220124028"},"Children":[{"ID":"20250220124028-igkpcj5","Type":"NodeParagraph","Properties":{"id":"20250220124028-igkpcj5","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"直接在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"SubShader"},{"Type":"NodeText","Data":"​ 语句块中书写着色器逻辑"}]}]},{"ID":"20250220124028-5gvo1oo","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250220124028-5gvo1oo","updated":"20250220124028"},"Children":[{"ID":"20250220124028-xhnydhb","Type":"NodeParagraph","Properties":{"id":"20250220124028-xhnydhb","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"我们不需要关心也不需要使用多个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​，每个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​ 如何渲染，Unity会在内部帮助我们去处理"}]}]},{"ID":"20250220124028-iapi858","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250220124028-iapi858","updated":"20250220124028"},"Children":[{"ID":"20250220124028-a38n0ma","Type":"NodeParagraph","Properties":{"id":"20250220124028-a38n0ma","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"可以使用 CG 或 HLSL 两种 Shader 语言去编写 Shader 逻辑"}]}]},{"ID":"20250220124028-f0g2k4w","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20250220124028-f0g2k4w","updated":"20250220124028"},"Children":[{"ID":"20250220124028-xajbsf2","Type":"NodeParagraph","Properties":{"id":"20250220124028-xajbsf2","updated":"20250220124028"},"Children":[{"Type":"NodeText","Data":"代码量较少，可控性较低，性能消耗较高"}]}]},{"ID":"20250220124028-ktu8wy6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20250220124028-ktu8wy6","updated":"20250220124355"},"Children":[{"ID":"20250220124028-ghwhbpk","Type":"NodeParagraph","Properties":{"id":"20250220124028-ghwhbpk","updated":"20250220124355"},"Children":[{"Type":"NodeText","Data":"适用于处理需要和各种光源打交道的着色器（主机、PC 平台时更适用，移动平台需要考虑性能消耗）"}]}]}]},{"ID":"20250220124355-fshhm3w","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250220124355-fshhm3w","updated":"20250227191507"},"Children":[{"Type":"NodeText","Data":"表面着色器的结构"}]},{"ID":"20250220124426-4hlyv7j","Type":"NodeParagraph","Properties":{"id":"20250220124426-4hlyv7j","updated":"20250220124504"},"Children":[{"Type":"NodeText","Data":"我们通过实例对比 表面着色器 和 顶点/片元着色器 的区别，最大区别就是，表面着色器中没有显示的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​ 了\n而其中最为关键的几个部分为："}]},{"ID":"20250220124504-bz86jwr","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250220124504-bz86jwr","updated":"20250220124504"},"Children":[{"ID":"20250220124504-dmfg8il","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250220124504-dmfg8il","updated":"20250220124504"},"Children":[{"ID":"20250220124504-hi1w0mc","Type":"NodeParagraph","Properties":{"id":"20250220124504-hi1w0mc","updated":"20250220124504"},"Children":[{"Type":"NodeText","Data":"编译指令"}]},{"ID":"20250220124802-n4u234w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250220124802-n4u234w","updated":"20250220125209"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"// Physically based Standard lighting model, and enable shadows on all light types\n#pragma surface surf Standard fullforwardshadows\n\n// Use shader model 3.0 target, to get nicer looking lighting\n#pragma target 3.0\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20250220124504-5vvbt4v","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250220124504-5vvbt4v","updated":"20250220124504"},"Children":[{"ID":"20250220124504-fbq1j8t","Type":"NodeParagraph","Properties":{"id":"20250220124504-fbq1j8t","updated":"20250220124504"},"Children":[{"Type":"NodeText","Data":"结构体"}]},{"ID":"20250220124818-urs0wt5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250220124818-urs0wt5","updated":"20250220124840"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct Input\n{\n    float2 uv_MainTex;\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20250220124504-bzxmxbx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250220124504-bzxmxbx","updated":"20250220124504"},"Children":[{"ID":"20250220124504-4luplop","Type":"NodeParagraph","Properties":{"id":"20250220124504-4luplop","updated":"20250220124504"},"Children":[{"Type":"NodeText","Data":"自定义函数"}]},{"ID":"20250220124849-1vuzila","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250220124849-1vuzila","updated":"20250220124858"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"void surf (Input IN, inout SurfaceOutputStandard o)\n{\n    // Albedo comes from a texture tinted by color\n    fixed4 c = tex2D (_MainTex, IN.uv_MainTex) * _Color;\n    o.Albedo = c.rgb;\n    // Metallic and smoothness come from slider variables\n    o.Metallic = _Metallic;\n    o.Smoothness = _Glossiness;\n    o.Alpha = c.a;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20250220124950-1g93ylg","Type":"NodeParagraph","Properties":{"id":"20250220124950-1g93ylg","updated":"20250220125540"},"Children":[{"Type":"NodeText","Data":"虽然这个默认创建出来表面着色器内没有任何光照计算内容，但是这个表面着色器依然有光照和阴影效果："}]},{"ID":"20250220125434-ksu96n9","Type":"NodeParagraph","Properties":{"id":"20250220125434-ksu96n9","updated":"20250220125458"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 391px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20250220125434-hwevndr.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 391px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250220125455-ry817pb","Type":"NodeParagraph","Properties":{"id":"20250220125455-ry817pb","updated":"20250220125833"},"Children":[{"Type":"NodeText","Data":"因为当我们编写完表面着色器后，Unity 会自动将其编译为顶点 / 片元着色器，Unity 会将光照处理、反射、折射、阴影、雾效等等相关计算代码自动加入\n点击表面着色器，我们在 Inspector 窗口内可以点击 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Show generated code"},{"Type":"NodeText","Data":"​ 即可查看生成出来的 Shader 代码"}]},{"ID":"20250220125610-ae31ypu","Type":"NodeParagraph","Properties":{"id":"20250220125610-ae31ypu","updated":"20250220125610"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 371px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20250220125610-0j3l69b.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 371px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250227191507-wmes5cs","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250227191507-wmes5cs","updated":"20250227191531"},"Children":[{"Type":"NodeText","Data":"为什么不一开始学习表面着色器"}]},{"ID":"20250227191512-5y0qkv9","Type":"NodeParagraph","Properties":{"id":"20250227191512-5y0qkv9","updated":"20250227191531"},"Children":[{"Type":"NodeText","Data":"表面着色器 是 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240615201317-2q2ssqb","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"顶点/片元着色器"},{"Type":"NodeText","Data":" 的封装，要了解了 顶点/片元着色器，才能了解表面着色器的本质原理\n学会了更“底层”的 顶点/片元着色器 编写，以后学习其它的 Shader 语言，才会更加得心应手！"}]},{"ID":"20250227191523-ekczy57","Type":"NodeParagraph","Properties":{"id":"20250227191523-ekczy57","updated":"20250227191523"}}]}