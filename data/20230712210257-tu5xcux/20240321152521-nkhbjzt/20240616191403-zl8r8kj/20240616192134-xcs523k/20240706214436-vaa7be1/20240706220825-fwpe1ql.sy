{
	"ID": "20240706220825-fwpe1ql",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240706220825-fwpe1ql",
		"title": "US3S1L6-2——Blinn-Phong式高光反射光照模型的逐片元光照",
		"type": "doc",
		"updated": "20240707134137"
	},
	"Children": [
		{
			"ID": "20240706223401-1o308s6",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20240706223401-1o308s6",
				"updated": "20240706223401"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20240706223401-46het88",
					"Type": "NodeHeading",
					"HeadingLevel": 2,
					"Properties": {
						"id": "20240706223401-46het88",
						"updated": "20240706223401"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "知识回顾"
						}
					]
				},
				{
					"ID": "20240706223401-5nevcea",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20240706223401-5nevcea",
						"updated": "20240706223401"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "公式："
						}
					]
				},
				{
					"ID": "20240706223401-d5gltmk",
					"Type": "NodeMathBlock",
					"Properties": {
						"id": "20240706223401-d5gltmk",
						"updated": "20240706223401"
					},
					"Children": [
						{
							"Type": "NodeMathBlockOpenMarker"
						},
						{
							"Type": "NodeMathBlockContent",
							"Data": "高光反射光照颜色 = 光源的颜色 \\times 材质高光反射颜色 \\times \\max(0,\\ \\overrightarrow{标准化后顶点法线方向} \\cdot \\overrightarrow{标准化后半角向量方向})^{光泽度}"
						},
						{
							"Type": "NodeMathBlockCloseMarker"
						}
					]
				},
				{
					"ID": "20240706223401-bdy369r",
					"Type": "NodeList",
					"ListData": {
						"Typ": 1
					},
					"Properties": {
						"id": "20240706223401-bdy369r",
						"updated": "20240706223401"
					},
					"Children": [
						{
							"ID": "20240706223401-s32nhnn",
							"Type": "NodeListItem",
							"ListData": {
								"Typ": 1,
								"Delimiter": 46,
								"Marker": "MS4=",
								"Num": 1
							},
							"Properties": {
								"id": "20240706223401-s32nhnn",
								"updated": "20240706223401"
							},
							"Children": [
								{
									"ID": "20240706223401-lzsdvoy",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20240706223401-lzsdvoy",
										"updated": "20240706223401"
									},
									"Children": [
										{
											"Type": "NodeTextMark",
											"TextMarkType": "inline-math",
											"TextMarkInlineMathContent": "\\overrightarrow{标准化后顶点法线方向} \\cdot \\overrightarrow{标准化后半角向量方向}"
										},
										{
											"Type": "NodeText",
											"Data": " 得到的结果就是 "
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "inline-math",
											"TextMarkInlineMathContent": "\\cos\\theta"
										}
									]
								}
							]
						},
						{
							"ID": "20240706223401-xvt1bvi",
							"Type": "NodeListItem",
							"ListData": {
								"Typ": 1,
								"Delimiter": 46,
								"Marker": "Mi4=",
								"Num": 2
							},
							"Properties": {
								"id": "20240706223401-xvt1bvi",
								"updated": "20240706223401"
							},
							"Children": [
								{
									"ID": "20240706223401-v7ebwme",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20240706223401-v7ebwme",
										"updated": "20240706223401"
									},
									"Children": [
										{
											"Type": "NodeTextMark",
											"TextMarkType": "inline-math",
											"TextMarkInlineMathContent": "\\overrightarrow{半角向量方向} = \\overrightarrow{视角单位向量} + \\overrightarrow{入射光单位向量}"
										}
									]
								}
							]
						},
						{
							"ID": "20240706223401-nns9pju",
							"Type": "NodeListItem",
							"ListData": {
								"Typ": 1,
								"Delimiter": 46,
								"Marker": "My4=",
								"Num": 3
							},
							"Properties": {
								"id": "20240706223401-nns9pju",
								"updated": "20240706223401"
							},
							"Children": [
								{
									"ID": "20240706223401-v0228wk",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20240706223401-v0228wk",
										"updated": "20240706223401"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "光泽度是幂运算，假设光泽度为 "
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "inline-math",
											"TextMarkInlineMathContent": "n"
										},
										{
											"Type": "NodeText",
											"Data": " ，相当于："
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "inline-math",
											"TextMarkInlineMathContent": "(max(0,\\cos\\theta))^n"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240706223405-8i7idf8",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240706223405-8i7idf8",
				"updated": "20240707134137"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "利用Blinn-Phong式高光反射模型实现光照效果（逐片元光照）"
				}
			]
		},
		{
			"ID": "20240706223425-pl98x39",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706223425-pl98x39",
				"updated": "20240706223554"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "关键步骤：基本和"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "block-ref",
					"TextMarkBlockRefID": "20240706220820-63qoxsu",
					"TextMarkBlockRefSubtype": "s",
					"TextMarkTextContent": "逐顶点"
				},
				{
					"Type": "NodeText",
					"Data": "一致"
				}
			]
		},
		{
			"ID": "20240706223425-srd1rql",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706223425-srd1rql",
				"updated": "20240706223439"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "区别："
				}
			]
		},
		{
			"ID": "20240706223425-i484s66",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240706223425-i484s66",
				"updated": "20240706223602"
			},
			"Children": [
				{
					"ID": "20240706223425-ks63o1e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240706223425-ks63o1e",
						"updated": "20240706223425"
					},
					"Children": [
						{
							"ID": "20240706223425-dd87445",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240706223425-dd87445",
								"updated": "20240706223425"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在顶点着色器计算顶点和法线相关数据"
								}
							]
						}
					]
				},
				{
					"ID": "20240706223425-8qq1kjr",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240706223425-8qq1kjr",
						"updated": "20240706223602"
					},
					"Children": [
						{
							"ID": "20240706223425-a0hr6yx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240706223425-a0hr6yx",
								"updated": "20240706223602"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在片元着色器中计算Blinn-Phong式高光反射光照"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240706223604-fra928r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706223604-fra928r",
				"updated": "20240706223614"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Shader实现如下："
				}
			]
		},
		{
			"ID": "20240707132845-2akk0li",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240707132845-2akk0li",
				"style": "line-height: 22px;",
				"updated": "20240707132918"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "Yw=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "Shader \"TeachShader/Lesson42\"\n{\n    Properties\n    {\n        _SpecularColor(\"SpecularColor\", Color) = (1, 1, 1, 1)   //材质高光反射颜色\n        _SpecularNum(\"SpecularNum\", Range(0, 20)) = 5           //光泽度\n    }\n    SubShader\n    {\n        Pass\n        {\n            Tags { \"LightMode\" = \"ForwardBase\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n\n            #include \"UnityCG.cginc\"\n            #include \"Lighting.cginc\"\n\n            struct v2f\n            {\n                float4 svPos : SV_POSITION;     //裁剪空间下的顶点坐标\n                float3 wNormal : NORMAL;        //世界空间下的法线\n                float3 wPos : TEXCOORD0;        //世界空间下的顶点坐标\n            };\n\n            fixed4 _SpecularColor;  //材质高光反射颜色\n            float _SpecularNum;     //光泽度\n\n            v2f vert (appdata_base v)\n            {\n                v2f v2fData;\n                v2fData.svPos = UnityObjectToClipPos(v.vertex);             //顶点转换到裁剪空间\n                v2fData.wNormal = UnityObjectToWorldNormal(v.normal);       //法线转换到世界空间\n                v2fData.wPos = mul(unity_ObjectToWorld, v.vertex).xyz;      //顶点转换到世界空间\n\n                return v2fData;\n            }\n\n            fixed4 frag (v2f i) : SV_Target\n            {\n                float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);  //将摄像机坐标和顶点坐标通过相减，得到观察方向向量，并标准化\n                float3 lightDir = normalize(_WorldSpaceLightPos0.xyz);          //得到世界空间下的指向光源方向的标准化向量\n                float3 halfA = normalize(viewDir + lightDir);                   //将光源方向和观察方向相加得到其半角向量，并标准化\n                //Blinn-Phong高光反射模型的实现，这里的颜色计算只取rgb，不考虑透明度的情况\n                fixed3 color = _LightColor0.rgb * _SpecularColor.rgb * pow(max(0, dot(i.wNormal, halfA)), _SpecularNum);\n              \n                return fixed4(color.rgb, 1);    //因为传递过来的颜色变量不包括透明度，因此这里需要手动指定透明度\n            }\n            ENDCG\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240706223614-8jkvfmo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706223614-8jkvfmo",
				"updated": "20240706225009"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "显示效果（光泽度统一为5）："
				}
			]
		},
		{
			"ID": "20240706225010-2d627ui",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706225010-2d627ui",
				"updated": "20240706225010"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "width: 568px;",
						"style": "width: 558px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240706225010-01ozbi0.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 558px;\" parent-style=\"width: 568px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240706225013-4sysj50",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706225013-4sysj50",
				"updated": "20240707134137"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可见，Blinn-Phong式高光反射模型比Phong式高光反射模型的高光效果更加均匀，面积也更大\n而逐片元光照相比逐顶点光照的高光光斑边缘也更加平滑"
				}
			]
		},
		{
			"ID": "20240706225114-aw0xrqg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240706225114-aw0xrqg"
			}
		}
	]
}