{"ID":"20240625122416-j2gq3qr","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240625122416-j2gq3qr","title":"US3S1L2-1——兰伯特光照模型的逐顶点光照","type":"doc","updated":"20241028142308"},"Children":[{"ID":"20240625122416-sjacv67","Type":"NodeBlockquote","Properties":{"id":"20240625122416-sjacv67","updated":"20241028142308"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240625122526-4ime8yq","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240625122526-4ime8yq","updated":"20241028142308"},"Children":[{"Type":"NodeText","Data":"知识回顾"}]},{"ID":"20240625122533-p35vx2a","Type":"NodeParagraph","Properties":{"id":"20240625122533-p35vx2a","updated":"20240625122547"},"Children":[{"Type":"NodeText","Data":"兰伯特光照模型公式："}]},{"ID":"20240625170823-ayeziif","Type":"NodeMathBlock","Properties":{"id":"20240625170823-ayeziif","updated":"20241028142308"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"Color_{漫反射光}=Color_{光源} \\times Color_{材质的漫反射} \\times \\max(0,\\overrightarrow{标准化后物体表面法线向量} \\cdot \\overrightarrow{标准化后光源方向向量})"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20240625170823-epigcz9","Type":"NodeParagraph","Properties":{"id":"20240625170823-epigcz9","updated":"20240625170823"},"Children":[{"Type":"NodeText","Data":"其中，"},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"\\overrightarrow{标准化后物体表面法线向量} \\cdot \\overrightarrow{标准化后光源方向向量}"},{"Type":"NodeText","Data":" 等于物体表面法线与光源方向向量的夹角的 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"\\cos"},{"Type":"NodeText","Data":" 值"}]},{"ID":"20240625122630-z0nri0e","Type":"NodeParagraph","Properties":{"id":"20240625122630-z0nri0e","updated":"20240625122639"},"Children":[{"Type":"NodeText","Data":"会使用的信息："}]},{"ID":"20240625122554-wj06jbv","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240625122554-wj06jbv","updated":"20240625122627"},"Children":[{"ID":"20240625122554-5i5ocdx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240625122554-5i5ocdx","updated":"20240625122627"},"Children":[{"ID":"20240625122554-tns7awy","Type":"NodeParagraph","Properties":{"id":"20240625122554-tns7awy","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"光源的颜色"}]},{"ID":"20240625122554-dp7x7bs","Type":"NodeParagraph","Properties":{"id":"20240625122554-dp7x7bs","updated":"20240625122627"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Lighting.cginc"},{"Type":"NodeText","Data":"​ 内置文件中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"_LightColor0"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240625122554-3to7tpn","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240625122554-3to7tpn","updated":"20240625122554"},"Children":[{"ID":"20240625122554-dvifq24","Type":"NodeParagraph","Properties":{"id":"20240625122554-dvifq24","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"光源的方向"}]},{"ID":"20240625122554-znjxywi","Type":"NodeParagraph","Properties":{"id":"20240625122554-znjxywi","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"_WorldSpaceLightPos0"},{"Type":"NodeText","Data":"​ 表示光源0在世界坐标系下的位置"}]}]},{"ID":"20240625122554-w58eq3m","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240625122554-w58eq3m","updated":"20240625122554"},"Children":[{"ID":"20240625122554-7anwnl0","Type":"NodeParagraph","Properties":{"id":"20240625122554-7anwnl0","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"向量归一化（标准化）方法 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"normalize()"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240625122554-1sgd6ae","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240625122554-1sgd6ae","updated":"20240625122554"},"Children":[{"ID":"20240625122554-usv0y4q","Type":"NodeParagraph","Properties":{"id":"20240625122554-usv0y4q","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"取最大值方法 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"max()"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240625122554-a28gunf","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20240625122554-a28gunf","updated":"20240625122554"},"Children":[{"ID":"20240625122554-u83o89u","Type":"NodeParagraph","Properties":{"id":"20240625122554-u83o89u","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"点乘方法 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dot"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240625122554-fgbo3d6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20240625122554-fgbo3d6","updated":"20240625122554"},"Children":[{"ID":"20240625122554-r2kkj4i","Type":"NodeParagraph","Properties":{"id":"20240625122554-r2kkj4i","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"兰伯特光照模型环境光变量（用于模拟环境光对物体的影响，避免物体阴影部分完全黑暗）"}]},{"ID":"20240625122554-582vakt","Type":"NodeParagraph","Properties":{"id":"20240625122554-582vakt","updated":"20240625122554"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UNITY_LIGHTMODEL_AMBIENT.rgb"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240625122554-sa83v3q","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20240625122554-sa83v3q","updated":"20240625122621"},"Children":[{"ID":"20240625122554-x87wcua","Type":"NodeParagraph","Properties":{"id":"20240625122554-x87wcua","updated":"20240625122621"},"Children":[{"Type":"NodeText","Data":"将法线从模型空间转换到世界空间 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UnityObjectToWorldNormal"},{"Type":"NodeText","Data":"​"}]}]}]}]},{"ID":"20240625122628-ebdj92v","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240625122628-ebdj92v","updated":"20240625131802"},"Children":[{"Type":"NodeText","Data":"利用兰伯特光照模型实现光照效果（逐顶点光照）"}]},{"ID":"20240625122710-87zgupj","Type":"NodeParagraph","Properties":{"id":"20240625122710-87zgupj","updated":"20240625125239"},"Children":[{"Type":"NodeText","Data":"关键步骤："}]},{"ID":"20240625122714-d8t9jv4","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240625122714-d8t9jv4","updated":"20240625122714"},"Children":[{"ID":"20240625122714-qd5fwz1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240625122714-qd5fwz1","updated":"20240625122714"},"Children":[{"ID":"20240625122714-4gg3yza","Type":"NodeParagraph","Properties":{"id":"20240625122714-4gg3yza","updated":"20240625122714"},"Children":[{"Type":"NodeText","Data":"材质漫反射颜色属性声明"}]},{"ID":"20240625125241-351l1an","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625125241-351l1an","style":"line-height: 22px;","updated":"20240625125304"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Properties\n{\n    _MainColor(\"MainColor\", Color) = (1, 1, 1, 1)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240625122714-6a72dlf","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240625122714-6a72dlf","updated":"20240625122714"},"Children":[{"ID":"20240625122714-27duz1u","Type":"NodeParagraph","Properties":{"id":"20240625122714-27duz1u","updated":"20240625123121"},"Children":[{"Type":"NodeText","Data":"渲染标签 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240615190945-timyw8m","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"Tags"},{"Type":"NodeText","Data":"​ 设置：将 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240615191133-56z8a1m","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"LightMode"},{"Type":"NodeText","Data":"​ 光照模式 设置为 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240615191302-uvos7ed","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"ForwardBase"},{"Type":"NodeText","Data":"​ 向前渲染（通常用于不透明物体的基本渲染）"}]},{"ID":"20240625125244-yp6i16w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625125244-yp6i16w","style":"line-height: 22px;","updated":"20240625125319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Tags { \"LightMode\"=\"ForwardBase\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240625122714-74oo6rk","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240625122714-74oo6rk","updated":"20240625122714"},"Children":[{"ID":"20240625122714-8eosier","Type":"NodeParagraph","Properties":{"id":"20240625122714-8eosier","updated":"20240625125251"},"Children":[{"Type":"NodeText","Data":"引用内置文件 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240616181725-7p5bld3","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"UnityCG.cginc"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240616181725-lhyuacy","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"Lighting.cginc"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240625125251-n59twrp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625125251-n59twrp","style":"line-height: 22px;","updated":"20240625125327"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"#include \"UnityCG.cginc\"\n#include \"Lighting.cginc\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240625122714-ab2yz36","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240625122714-ab2yz36","updated":"20240625122714"},"Children":[{"ID":"20240625122714-h6t3l24","Type":"NodeParagraph","Properties":{"id":"20240625122714-h6t3l24","updated":"20240625122714"},"Children":[{"Type":"NodeText","Data":"结构体声明"}]},{"ID":"20240625125330-9mmybxw","Type":"NodeParagraph","Properties":{"id":"20240625125330-9mmybxw","updated":"20240625125521"},"Children":[{"Type":"NodeText","Data":"对于输入到顶点着色器的参数，可以直接使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UnityCG.cginc"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"block-ref code","TextMarkBlockRefID":"20240616182612-6zz8ivk","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"appdata_base"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240625125532-nqa0n3r","Type":"NodeParagraph","Properties":{"id":"20240625125532-nqa0n3r","updated":"20240625130906"},"Children":[{"Type":"NodeText","Data":"对于从顶点着色器输出到片元着色器的参数，需要我们自己声明结构体 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"v2f"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240625125249-806lctx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625125249-806lctx","style":"line-height: 22px;","updated":"20240625130651"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct v2f\n{\n    float4 pos : SV_POSITION;\n    fixed3 color : COLOR;       //这里只传递颜色的rgb，而不传递透明度，故使用fixed3\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240625122714-a2a0k4l","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20240625122714-a2a0k4l","updated":"20240625122714"},"Children":[{"ID":"20240625122714-urcw81t","Type":"NodeParagraph","Properties":{"id":"20240625122714-urcw81t","updated":"20240625122714"},"Children":[{"Type":"NodeText","Data":"基于公式实现逻辑"}]},{"ID":"20240625125246-rmk0f9x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625125246-rmk0f9x","style":"line-height: 22px;","updated":"20240625130843"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"fixed4 _MainColor;  //材质的漫反射颜色\n\nv2f vert (appdata_base v)\n{\n    v2f v2fData;\n    v2fData.pos = UnityObjectToClipPos(v.vertex);               //首先将模型空间下的顶点转换到裁剪空间下\n\n    float3 normal = UnityObjectToWorldNormal(v.normal);         //将模型空间下的法线转换到世界空间下\n    float3 lightDir = normalize(_WorldSpaceLightPos0.xyz);      //光源0在世界坐标系下的位置标准化，用于和法线计算夹角\n\n    //兰伯特光照模型的实现，这里的颜色计算只取rgb，不考虑透明度的情况\n    fixed3 color = _LightColor0.rgb * _MainColor.rgb * max(0, dot(normal, lightDir));\n    v2fData.color = color;                                      //将计算完毕的颜色赋值给结构体成员\n\n    return v2fData;                                             //将顶点着色器计算结果传递给片元着色器\n}\n\nfixed4 frag (v2f i) : SV_Target\n{\n    return fixed4(i.color.rgb, 1);      //因为传递过来的颜色变量不包括透明度，因此这里需要手动指定透明度\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240625131046-ovkaclx","Type":"NodeParagraph","Properties":{"id":"20240625131046-ovkaclx","updated":"20240625131109"},"Children":[{"Type":"NodeText","Data":"使用这样的Shader的材质显示效果如下："}]},{"ID":"20240625131802-fmmrzdy","Type":"NodeParagraph","Properties":{"id":"20240625131802-fmmrzdy","updated":"20240625131802"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 327px;","style":"width: 317px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240625131802-bghqw05.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 317px;\" parent-style=\"width: 327px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240625131158-cl9enkh","Type":"NodeParagraph","Properties":{"id":"20240625131158-cl9enkh","updated":"20240625131532"},"Children":[{"Type":"NodeText","Data":"可以看到，被光源照射到的地方会显示颜色，而阴影部分是全黑的"}]},{"ID":"20240625122710-sjyuas2","Type":"NodeParagraph","Properties":{"id":"20240625122710-sjyuas2","style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);","updated":"20240625131407"},"Children":[{"Type":"NodeText","Data":"注意：为了阴影出不全黑，需要加上兰伯特环境光颜色公共变量 "},{"Type":"NodeTextMark","Properties":{"parent-style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);"},"TextMarkType":"code","TextMarkTextContent":"UNITY_LIGHTMODEL_AMBIENT"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240625123422-7l3hktq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625123422-7l3hktq","style":"line-height: 22px;","updated":"20240625131501"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"v2f vert (appdata_base v)\n{\n    v2f v2fData;\n    v2fData.pos = UnityObjectToClipPos(v.vertex);               //首先将模型空间下的顶点转换到裁剪空间下\n\n    float3 normal = UnityObjectToWorldNormal(v.normal);         //将模型空间下的法线转换到世界空间下\n    float3 lightDir = normalize(_WorldSpaceLightPos0.xyz);      //光源0在世界坐标系下的位置标准化，用于和法线计算夹角\n\n    //兰伯特光照模型的实现，这里的颜色计算只取rgb，不考虑透明度的情况\n    fixed3 color = _LightColor0.rgb * _MainColor.rgb * max(0, dot(normal, lightDir));\n    v2fData.color = UNITY_LIGHTMODEL_AMBIENT.rgb + color;       //为了让阴影不全黑，需要加上兰伯特环境光颜色公共变量\n\n    return v2fData;                                             //将顶点着色器计算结果传递给片元着色器\n}s\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240625131409-qqa8nne","Type":"NodeParagraph","Properties":{"id":"20240625131409-qqa8nne","updated":"20240625131414"},"Children":[{"Type":"NodeText","Data":"使用这样的Shader的材质显示效果如下："}]},{"ID":"20240625131449-p31hiwd","Type":"NodeParagraph","Properties":{"id":"20240625131449-p31hiwd","updated":"20240625131449"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 317px;","style":"width: 307px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240625131449-uwnv2kv.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 307px;\" parent-style=\"width: 317px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240625131506-1n9eig9","Type":"NodeParagraph","Properties":{"id":"20240625131506-1n9eig9","updated":"20240625131542"},"Children":[{"Type":"NodeText","Data":"可以看到，阴影部分不再是全黑色的"}]},{"ID":"20240625131559-02uwhmj","Type":"NodeParagraph","Properties":{"id":"20240625131559-02uwhmj","updated":"20240625131606"},"Children":[{"Type":"NodeText","Data":"完整的Shader代码如下："}]},{"ID":"20240625131607-kx3g5qr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240625131607-kx3g5qr","style":"line-height: 22px;","updated":"20240625131631"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Shader \"TeachShader/Lesson29\"\n{\n    Properties\n    {\n        _MainColor(\"MainColor\", Color) = (1, 1, 1, 1)\n    }\n    SubShader\n    {\n        Tags { \"LightMode\"=\"ForwardBase\" }\t//设置光照模式\n\n        Pass\n        {\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n\n            #include \"UnityCG.cginc\"\n            #include \"Lighting.cginc\"\n\n        \n            fixed4 _MainColor;  //材质的漫反射颜色\n\n            struct v2f\n            {\n                float4 pos : SV_POSITION;\n                fixed3 color : COLOR;       //这里只传递颜色的rgb，而不传递透明度，故使用fixed3\n            };\n\n            v2f vert (appdata_base v)\n            {\n                v2f v2fData;\n                v2fData.pos = UnityObjectToClipPos(v.vertex);               //首先将模型空间下的顶点转换到裁剪空间下\n\n                float3 normal = UnityObjectToWorldNormal(v.normal);         //将模型空间下的法线转换到世界空间下\n                float3 lightDir = normalize(_WorldSpaceLightPos0.xyz);      //光源0在世界坐标系下的位置标准化，用于和法线计算夹角\n\n                //兰伯特光照模型的实现，这里的颜色计算只取rgb，不考虑透明度的情况\n                fixed3 color = _LightColor0.rgb * _MainColor.rgb * max(0, dot(normal, lightDir));\n                v2fData.color = UNITY_LIGHTMODEL_AMBIENT.rgb + color;       //为了让阴影不全黑，需要加上兰伯特环境光颜色公共变量\n\n                return v2fData;                                             //将顶点着色器计算结果传递给片元着色器\n            }\n\n            fixed4 frag (v2f i) : SV_Target\n            {\n                return fixed4(i.color.rgb, 1);      //因为传递过来的颜色变量不包括透明度，因此这里需要手动指定透明度\n            }\n            ENDCG\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240625131636-61gxxxq","Type":"NodeParagraph","Properties":{"id":"20240625131636-61gxxxq"}}]}