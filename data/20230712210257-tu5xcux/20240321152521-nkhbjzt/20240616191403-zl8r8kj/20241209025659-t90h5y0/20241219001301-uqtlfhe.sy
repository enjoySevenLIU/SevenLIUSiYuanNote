{
	"ID": "20241219001301-uqtlfhe",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20241219001301-uqtlfhe",
		"title": "US3S8L4——反射效果",
		"type": "doc",
		"updated": "20241222172227"
	},
	"Children": [
		{
			"ID": "20241222172101-vwdsshd",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20241222172101-vwdsshd",
				"updated": "20241222172227"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "本章代码关键字"
				}
			]
		},
		{
			"ID": "20241222172108-tf8zvat",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241222172108-tf8zvat",
				"style": "line-height: 22px;",
				"updated": "20241222172227"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "Yw=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "reflect()\t// 计算反射光线方法\ntexCUBE()\t// 立方体纹理采样方法\nlerp()\t\t// 插值，在这里用于将光照效果和反射效果进行插值结合处理\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241219001301-p5itsu3",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20241219001301-p5itsu3",
				"updated": "20241221165827"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射效果"
				}
			]
		},
		{
			"ID": "20241219001512-ik7v2mt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001512-ik7v2mt",
				"updated": "20241219001517"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射效果指光的反射，是一种光学现象。指光在两种物质分界面上改变传播方向又返回原来物质中的现象，就叫做光的反射。"
				}
			]
		},
		{
			"ID": "20241219001516-3k2fjtg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001516-3k2fjtg",
				"updated": "20241219001516"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "比如：光遇到水面、玻璃、金属等许多物体的表面都会发生反射"
				}
			]
		},
		{
			"ID": "20241219001537-jxs70fq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001537-jxs70fq",
				"updated": "20241219001537"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 258px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241219001537-bj819j5.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 258px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241219001539-100mubi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001539-100mubi",
				"updated": "20241219001552"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 Unity Shader 中，反射效果模拟了物体表面反射环境光的特性使得物体看起来像镜子或金属表面，能够反射周围环境的图像。"
				}
			]
		},
		{
			"ID": "20241219001608-l89w69h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001608-l89w69h",
				"updated": "20241219001621"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 289px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241219001608-73xjcht.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 289px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 329px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241219001621-ygdtf0t.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 329px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241219001625-h5cc9n2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20241219001625-h5cc9n2",
				"updated": "20241221165827"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射效果的原理"
				}
			]
		},
		{
			"ID": "20241219001636-j31y9n0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001636-j31y9n0",
				"updated": "20241219003914"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射效果的原理就是利用立方体纹理（CubeMap 或 RenderTexture）进行环境映射\n我们利用摄像机 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "看向物体表面顶点的方向向量"
				},
				{
					"Type": "NodeText",
					"Data": " 作为入射光，结合 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "顶点法线向量"
				},
				{
					"Type": "NodeText",
					"Data": " 可以算出反射向量\n然后利用反射方向向量在立方体纹理中进行采样，得到最终反射的颜色。"
				}
			]
		},
		{
			"ID": "20241221165739-lvfsij2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221165739-lvfsij2",
				"updated": "20241221165827"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "简单来说，就是根据 视角方向 和 顶点法线，计算得到反射向量，使用反射向量从立方体纹理内取值"
				}
			]
		},
		{
			"ID": "20241219001735-9cd4o8i",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001735-9cd4o8i",
				"updated": "20241219001756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 307px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241219001735-duv1wbr.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 307px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 230px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241209030051-43c2sv3.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 230px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241219001805-e7aeys6",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20241219001805-e7aeys6",
				"updated": "20241219001910"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20241219001910-ncfx0p4",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20241219001910-ncfx0p4",
						"updated": "20241219001910"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "光路可逆原则：如果光在某一路径上从点A传播到点B，那么光在同一路径上可以从点B传播回点A。\n换句话说，光的传播路径在没有任何变化的情况下可以被反向利用。"
						}
					]
				}
			]
		},
		{
			"ID": "20241219001912-k8sulyo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219001912-k8sulyo",
				"updated": "20241219003853"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因此，根据光路可逆原则，我们就可以根据视角方向计算出光线方向"
				}
			]
		},
		{
			"ID": "20241219001953-pyqsr67",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20241219001953-pyqsr67",
				"updated": "20241221170927"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射的基础实现"
				}
			]
		},
		{
			"ID": "20241219002108-nrv4a3f",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241219002108-nrv4a3f",
				"name": "texCUBE()",
				"updated": "20241221170927"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射和立方体纹理采样"
				}
			]
		},
		{
			"ID": "20241219004428-ro8js0p",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241219004428-ro8js0p",
				"updated": "20241221162221"
			},
			"Children": [
				{
					"ID": "20241219004429-6gxj8gn",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241219004429-6gxj8gn",
						"updated": "20241219004608"
					},
					"Children": [
						{
							"ID": "20241219004429-ew1j5qe",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219004429-ew1j5qe",
								"updated": "20241219004608"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "反射函数 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code block-ref",
									"TextMarkBlockRefID": "20240616175114-dacx6fu",
									"TextMarkBlockRefSubtype": "s",
									"TextMarkTextContent": "reflect()"
								},
								{
									"Type": "NodeText",
									"Data": "​，通过 反向视角所在方向 和 法线向量，得到反射向量"
								}
							]
						}
					]
				},
				{
					"ID": "20241219004432-y3hayow",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241219004432-y3hayow",
						"updated": "20241221162221"
					},
					"Children": [
						{
							"ID": "20241219004432-dc43fa9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219004432-dc43fa9",
								"updated": "20241219015508"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "立方体纹理采样函数，CG 中提供了内置函数 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code block-ref",
									"TextMarkBlockRefID": "20240616175319-dnvqux2",
									"TextMarkBlockRefSubtype": "s",
									"TextMarkTextContent": "texCUBE()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 用于进行立方体纹理采样，\n通过 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "texCUBE(立方体纹理, 反射方向向量)"
								},
								{
									"Type": "NodeText",
									"Data": "​ 便可以得到在立方体纹理中的采样结果"
								}
							]
						},
						{
							"ID": "20241221162148-072gvqi",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241221162148-072gvqi",
								"style": "line-height: 22px;",
								"updated": "20241221162221"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "samplerCUBE _Cube;\nfloat _Reflectivity;\n\nfixed4 frag(v2f i): SV_TARGET\n{\n    fixed4 cubemapColor = texCUBE(_Cube, i.worldReflection);\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241219002554-32cdca3",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241219002554-32cdca3",
				"updated": "20241221193640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "实现反射效果"
				}
			]
		},
		{
			"ID": "20241219002611-jy4s4t1",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20241219002611-jy4s4t1",
				"updated": "20241219005338"
			},
			"Children": [
				{
					"ID": "20241219002626-u7r1lkm",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20241219002626-u7r1lkm",
						"updated": "20241219005338"
					},
					"Children": [
						{
							"ID": "20241219002626-65atv2b",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219002626-65atv2b",
								"updated": "20241219002626"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "属性声明\n"
								}
							]
						},
						{
							"ID": "20241219002628-2ckadoh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219002628-2ckadoh",
								"updated": "20241219002659"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "我们将声明 2 个关键属性"
								}
							]
						},
						{
							"ID": "20241219002640-m4h336d",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241219002640-m4h336d",
								"updated": "20241219005338"
							},
							"Children": [
								{
									"ID": "20241219002640-ebp7n5b",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241219002640-ebp7n5b",
										"updated": "20241219005338"
									},
									"Children": [
										{
											"ID": "20241219002640-2uteukj",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002640-2uteukj",
												"updated": "20241219005338"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "立方体纹理（此属性既可以使用 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20241217130146-dlxcckc",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "Cubemap"
												},
												{
													"Type": "NodeText",
													"Data": "​，也可以使用 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20240411155939-z0goj0j",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "RenderTexture"
												},
												{
													"Type": "NodeText",
													"Data": "​）"
												}
											]
										}
									]
								},
								{
									"ID": "20241219002640-m4flz6h",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241219002640-m4flz6h",
										"updated": "20241219002640"
									},
									"Children": [
										{
											"ID": "20241219002640-xecx9ei",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002640-xecx9ei",
												"updated": "20241219002657"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "反射率（范围限定在 0"
												},
												{
													"Type": "NodeBackslash",
													"Data": "span",
													"Children": [
														{
															"Type": "NodeText",
															"Data": "~"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "1 之间）"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241219003705-617nvls",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241219003705-617nvls",
								"style": "line-height: 22px;",
								"updated": "20241219004902"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "Properties\n{\n    _Cube(\"Cubemap\", Cube) = \"\"{}                   // 立方体纹理\n    _Reflectivity(\"Reflectivity\", Range(0, 1)) = 1  // 反射率\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20241219002626-2qik4ur",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20241219002626-2qik4ur",
						"updated": "20241219005034"
					},
					"Children": [
						{
							"ID": "20241219002626-31l8v0j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219002626-31l8v0j",
								"updated": "20241219002626"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "顶点着色器"
								}
							]
						},
						{
							"ID": "20241219003411-go7o9lv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219003411-go7o9lv",
								"updated": "20241219003652"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "反射向量会在顶点着色器内完成计算，这样效率更高，相比片元着色器内计算效果差异不大"
								}
							]
						},
						{
							"ID": "20241219002703-vj1wido",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219002703-vj1wido",
								"updated": "20241219002708"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "关键步骤："
								}
							]
						},
						{
							"ID": "20241219002708-bcsl7ra",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241219002708-bcsl7ra",
								"updated": "20241219002708"
							},
							"Children": [
								{
									"ID": "20241219002708-r8g5d2a",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241219002708-r8g5d2a",
										"updated": "20241219002708"
									},
									"Children": [
										{
											"ID": "20241219002708-658o0ob",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002708-658o0ob",
												"updated": "20241219002712"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "顶点坐标转裁剪坐标\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241219002712-0kco0my",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241219002712-0kco0my",
										"updated": "20241219002712"
									},
									"Children": [
										{
											"ID": "20241219002712-r0bm24l",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002712-r0bm24l",
												"updated": "20241219002714"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "顶点法线转世界坐标\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241219002714-77di1lf",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20241219002714-77di1lf",
										"updated": "20241219002714"
									},
									"Children": [
										{
											"ID": "20241219002714-1mftzw1",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002714-1mftzw1",
												"updated": "20241219002716"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "顶点坐标转世界坐标\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241219002716-urotc4y",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NC4=",
										"Num": 4
									},
									"Properties": {
										"id": "20241219002716-urotc4y",
										"updated": "20241219002716"
									},
									"Children": [
										{
											"ID": "20241219002716-zhs085u",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002716-zhs085u",
												"updated": "20241219002734"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "世界空间下视角方向计算"
												}
											]
										}
									]
								},
								{
									"ID": "20241219002718-cfe3rcl",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NS4=",
										"Num": 5
									},
									"Properties": {
										"id": "20241219002718-cfe3rcl",
										"updated": "20241219002718"
									},
									"Children": [
										{
											"ID": "20241219002718-b7iu9gt",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002718-b7iu9gt",
												"updated": "20241219004629"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "通过逆向视角方向得到反射方向"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241219004624-u1g13pg",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241219004624-u1g13pg",
								"style": "line-height: 22px;",
								"updated": "20241219005034"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "struct v2f\n{\n    float4 pos: SV_POSITION;            // 裁剪空间下的顶点坐标\n    float3 worldReflection: TEXCOORD0;  // 世界空间下的反射向量\n};\n\nv2f vert(appdata_base v)\n{\n    v2f data;\n    data.pos = UnityObjectToClipPos(v.vertex);                  // 顶点坐标转裁剪坐标\n    float3 worldNormal = UnityObjectToWorldNormal(v.normal);    // 顶点法线转世界坐标\n    fixed3 worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;   // 顶点坐标装世界坐标\n    fixed3 worldViewDir = UnityWorldSpaceViewDir(worldPos);     // 计算世界空间下视角所在方向\n    data.worldReflection = reflect(-worldViewDir, worldNormal); // 通过反向视角方向得到反射方向\n\n    return data;\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20241219002626-y6jpd2o",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20241219002626-y6jpd2o",
						"updated": "20241219005011"
					},
					"Children": [
						{
							"ID": "20241219002626-qek78sj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219002626-qek78sj",
								"updated": "20241219002626"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "片元着色器\n"
								}
							]
						},
						{
							"ID": "20241219002722-kk0ki9s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241219002722-kk0ki9s",
								"updated": "20241219002725"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "关键步骤："
								}
							]
						},
						{
							"ID": "20241219002725-mtyvn57",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241219002725-mtyvn57",
								"updated": "20241219004932"
							},
							"Children": [
								{
									"ID": "20241219002725-c1vmzwu",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241219002725-c1vmzwu",
										"updated": "20241219002725"
									},
									"Children": [
										{
											"ID": "20241219002725-yx37wxq",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002725-yx37wxq",
												"updated": "20241219002731"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "立方体纹理采样(利用 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "texCUBE"
												},
												{
													"Type": "NodeText",
													"Data": "​ 函数)"
												}
											]
										}
									]
								},
								{
									"ID": "20241219002727-s83m8wy",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241219002727-s83m8wy",
										"updated": "20241219004932"
									},
									"Children": [
										{
											"ID": "20241219002727-hemip2h",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241219002727-hemip2h",
												"updated": "20241219004932"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "结合 反射率 返回最终颜色"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241219004829-va0t8h7",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241219004829-va0t8h7",
								"style": "line-height: 22px;",
								"updated": "20241219005011"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "samplerCUBE _Cube;\nfloat _Reflectivity;\n\nfixed4 frag(v2f i): SV_TARGET\n{\n    fixed4 cubemapColor = texCUBE(_Cube, i.worldReflection);\n    return cubemapColor * _Reflectivity;\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241219004923-o1607cq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219004923-o1607cq",
				"updated": "20241219005049"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "完整 Shader 代码如下："
				}
			]
		},
		{
			"ID": "20241219005049-wkc2008",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241219005049-wkc2008",
				"style": "line-height: 22px;",
				"updated": "20241219005103"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "Yw=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "Shader \"Unlit/Lesson75_ReflectBase\"\n{\n    Properties\n    {\n        _Cube(\"Cubemap\", Cube) = \"\"{}                   // 立方体纹理\n        _Reflectivity(\"Reflectivity\", Range(0, 1)) = 1  // 反射率\n    }\n    SubShader\n    {\n        Tags { \"RenderType\" = \"Opaque\" \"Queue\" = \"Geometry\" }\n\n        Pass\n        {\n            Tags { \"LightMode\" = \"ForwardBase\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n\n            #include \"UnityCG.cginc\"\n            #include \"Lighting.cginc\"\n\n            samplerCUBE _Cube;\n            float _Reflectivity;\n\n            struct v2f\n            {\n                float4 pos: SV_POSITION;            // 裁剪空间下的顶点坐标\n                float3 worldReflection: TEXCOORD0;  // 世界空间下的反射向量\n            };\n\n            v2f vert(appdata_base v)\n            {\n                v2f data;\n                data.pos = UnityObjectToClipPos(v.vertex);                  // 顶点坐标转裁剪坐标\n                float3 worldNormal = UnityObjectToWorldNormal(v.normal);    // 顶点法线转世界坐标\n                fixed3 worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;   // 顶点坐标装世界坐标\n                fixed3 worldViewDir = UnityWorldSpaceViewDir(worldPos);     // 计算世界空间下视角所在方向\n                data.worldReflection = reflect(-worldViewDir, worldNormal); // 通过反向视角方向得到反射方向\n\n                return data;\n            }\n\n            fixed4 frag(v2f i): SV_TARGET\n            {\n                fixed4 cubemapColor = texCUBE(_Cube, i.worldReflection);\n                return cubemapColor * _Reflectivity;\n            }\n            ENDCG\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241219005110-4dr3enz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219005110-4dr3enz",
				"updated": "20241219015316"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "将 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "CubeMap"
				},
				{
					"Type": "NodeText",
					"Data": "​ 或者 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "RenderTexture"
				},
				{
					"Type": "NodeText",
					"Data": "​ 设置到使用反射 Shader 的材质的 Cube 属性上\n（如果使用 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "RenderTexture"
				},
				{
					"Type": "NodeText",
					"Data": "​，该 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "RenderTexture"
				},
				{
					"Type": "NodeText",
					"Data": "​ 可能需要在合适的时机动态更新，因为 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "RenderTexture"
				},
				{
					"Type": "NodeText",
					"Data": "​ 不能持久化纹理数据，数据会在保存时丢失）"
				}
			]
		},
		{
			"ID": "20241221155303-iv8cq7n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221155303-iv8cq7n",
				"updated": "20241221193640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果要实时的生成反射效果，需要在运行时实时为物体生成立方体贴图，代码可参考："
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "block-ref",
					"TextMarkBlockRefID": "20241217130310-bkya54n",
					"TextMarkBlockRefSubtype": "d",
					"TextMarkTextContent": "在运行时动态生成立方体纹理"
				}
			]
		},
		{
			"ID": "20241219005450-sl8iht1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219005450-sl8iht1",
				"updated": "20241219012045"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "显示效果："
				}
			]
		},
		{
			"ID": "20241219012046-jbydye3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241219012046-jbydye3",
				"updated": "20241219012046"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 545px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241219012046-9fl56x2.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 545px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241219012132-uwsyyty",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20241219012132-uwsyyty",
				"updated": "20241221191012"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "反射结合漫反射和阴影"
				}
			]
		},
		{
			"ID": "20241221155725-mmqmne6",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241221155725-mmqmne6",
				"name": "lerp()",
				"updated": "20241221160143"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "插值计算"
				}
			]
		},
		{
			"ID": "20241221155734-kn99awb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221155734-kn99awb",
				"updated": "20241221155756"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "CG 中提供了内置函数 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code block-ref",
					"TextMarkBlockRefID": "20240616174041-82jjlbg",
					"TextMarkBlockRefSubtype": "s",
					"TextMarkTextContent": "lerp"
				},
				{
					"Type": "NodeText",
					"Data": "​ 用于进行插值计算"
				}
			]
		},
		{
			"ID": "20241221155857-sqt0lps",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241221155857-sqt0lps",
				"style": "line-height: 22px;",
				"updated": "20241221155902"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "Yw=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "lerp(a, b, t)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241221155856-robazlo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221155856-robazlo",
				"updated": "20241221155936"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "参数："
				}
			]
		},
		{
			"ID": "20241221155937-1yyen84",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241221155937-1yyen84",
				"updated": "20241221155958"
			},
			"Children": [
				{
					"ID": "20241221155937-2hijol1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241221155937-2hijol1",
						"updated": "20241221155949"
					},
					"Children": [
						{
							"ID": "20241221155937-2ybdns0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221155937-2ybdns0",
								"updated": "20241221155949"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "a"
								},
								{
									"Type": "NodeText",
									"Data": "​：插值起点值"
								}
							]
						}
					]
				},
				{
					"ID": "20241221155938-vdnl42c",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241221155938-vdnl42c",
						"updated": "20241221155947"
					},
					"Children": [
						{
							"ID": "20241221155938-byc52a3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221155938-byc52a3",
								"updated": "20241221155947"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "b"
								},
								{
									"Type": "NodeText",
									"Data": "​：插值终点值"
								}
							]
						}
					]
				},
				{
					"ID": "20241221155939-3r52wzx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241221155939-3r52wzx",
						"updated": "20241221155958"
					},
					"Children": [
						{
							"ID": "20241221155939-p3qjfw8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221155939-p3qjfw8",
								"updated": "20241221155958"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "t"
								},
								{
									"Type": "NodeText",
									"Data": "​：插值因子，0"
								},
								{
									"Type": "NodeBackslash",
									"Data": "span",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "~"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "1 之间"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241221155927-hw143ie",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221155927-hw143ie",
				"updated": "20241221160034"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "内部计算公式："
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "inline-math",
					"TextMarkInlineMathContent": "a + t \\times (b - a)"
				}
			]
		},
		{
			"ID": "20241221160034-lnxqc9j",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241221160034-lnxqc9j",
				"updated": "20241221160122"
			},
			"Children": [
				{
					"ID": "20241221160034-jmp60qi",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241221160034-jmp60qi",
						"updated": "20241221160034"
					},
					"Children": [
						{
							"ID": "20241221160034-vyj2m2l",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160034-vyj2m2l",
								"updated": "20241221160044"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "t = 0"
								},
								{
									"Type": "NodeText",
									"Data": " 时，插值结果为 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "a"
								},
								{
									"Type": "NodeText",
									"Data": "\n"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160037-periczo",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241221160037-periczo",
						"updated": "20241221160037"
					},
					"Children": [
						{
							"ID": "20241221160037-oi5uozx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160037-oi5uozx",
								"updated": "20241221160048"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "t = 1"
								},
								{
									"Type": "NodeText",
									"Data": " 时，插值结果为 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "b"
								},
								{
									"Type": "NodeText",
									"Data": "\n"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160049-1o38eqh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241221160049-1o38eqh",
						"updated": "20241221160122"
					},
					"Children": [
						{
							"ID": "20241221160049-rqcqof3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160049-rqcqof3",
								"updated": "20241221160122"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "t"
								},
								{
									"Type": "NodeText",
									"Data": " 在 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "0 \\sim 1"
								},
								{
									"Type": "NodeText",
									"Data": " 之间变化时，返回一个 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "a"
								},
								{
									"Type": "NodeText",
									"Data": " 到 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "inline-math",
									"TextMarkInlineMathContent": "b"
								},
								{
									"Type": "NodeText",
									"Data": " 之间的一个线性插值结果"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241221155906-0jeauuh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221155906-0jeauuh",
				"updated": "20241221160142"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们将利用该函数来决定反射效果的程度，用它在漫反射颜色和反射颜色之间进行插值控制反射程度"
				}
			]
		},
		{
			"ID": "20241221160143-dfjhq1o",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241221160143-dfjhq1o",
				"updated": "20241221164710"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "实现带漫反射的反射效果"
				}
			]
		},
		{
			"ID": "20241221160214-g5dke1d",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20241221160214-g5dke1d",
				"updated": "20241221164654"
			},
			"Children": [
				{
					"ID": "20241221160223-ujv9ku3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20241221160223-ujv9ku3",
						"updated": "20241221160223"
					},
					"Children": [
						{
							"ID": "20241221160223-7ec7oyq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160223-7ec7oyq",
								"updated": "20241221160251"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "复用上文的反射基础效果代码"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160214-dquvd9i",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20241221160214-dquvd9i",
						"updated": "20241221160214"
					},
					"Children": [
						{
							"ID": "20241221160214-9b63ux4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160214-9b63ux4",
								"updated": "20241221160214"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "属性声明\n"
								}
							]
						},
						{
							"ID": "20241221160218-f8guoc4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160218-f8guoc4",
								"updated": "20241221160348"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "我们将加入 2 个关键属性"
								}
							]
						},
						{
							"ID": "20241221160344-o0dk77q",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241221160344-o0dk77q",
								"updated": "20241221160344"
							},
							"Children": [
								{
									"ID": "20241221160344-zalkd44",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241221160344-zalkd44",
										"updated": "20241221160344"
									},
									"Children": [
										{
											"ID": "20241221160344-1rd3cn0",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221160344-1rd3cn0",
												"updated": "20241221160345"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "漫反射颜色\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241221160345-yq34y4c",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241221160345-yq34y4c",
										"updated": "20241221160345"
									},
									"Children": [
										{
											"ID": "20241221160345-lc108lq",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221160345-lc108lq",
												"updated": "20241221160345"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "反射颜色"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241221160349-k1dd8v3",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241221160349-k1dd8v3",
								"style": "line-height: 22px;",
								"updated": "20241221160549"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "Properties\n{\n    _Color(\"Color\", Color) = {1, 1, 1, 1}               // 漫反射颜色\n    _ReflectColor(\"ReflectColor\", Color) = {1, 1, 1, 1} // 反射颜色\n    _Cube(\"Cubemap\", Cube) = \"\"{}                       // 立方体纹理\n    _Reflectivity(\"Reflectivity\", Range(0, 1)) = 1      // 反射率\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160214-27ykepa",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20241221160214-27ykepa",
						"updated": "20241221160214"
					},
					"Children": [
						{
							"ID": "20241221160214-kxyvcxl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160214-kxyvcxl",
								"updated": "20241221160556"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "v2f"
								},
								{
									"Type": "NodeText",
									"Data": "​ 结构体\n"
								}
							]
						},
						{
							"ID": "20241221160558-hnifhc0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160558-hnifhc0",
								"updated": "20241221160637"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "因为要在片元着色器中处理光和阴影，因此 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "v2f"
								},
								{
									"Type": "NodeText",
									"Data": "​ 结构体需要加入："
								}
							]
						},
						{
							"ID": "20241221160637-qmktxr0",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241221160637-qmktxr0",
								"updated": "20241221160637"
							},
							"Children": [
								{
									"ID": "20241221160637-c471xhn",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241221160637-c471xhn",
										"updated": "20241221160637"
									},
									"Children": [
										{
											"ID": "20241221160637-iwe5bjy",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221160637-iwe5bjy",
												"updated": "20241221160639"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "世界空间法线\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241221160639-8cclqp9",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241221160639-8cclqp9",
										"updated": "20241221160639"
									},
									"Children": [
										{
											"ID": "20241221160639-c5dkzno",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221160639-c5dkzno",
												"updated": "20241221160641"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "世界空间顶点位置\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241221160641-w7go7b0",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20241221160641-w7go7b0",
										"updated": "20241221160641"
									},
									"Children": [
										{
											"ID": "20241221160641-eq5u17n",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221160641-eq5u17n",
												"updated": "20241221161218"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "阴影坐标宏 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20241205122905-6p8sv6d",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "SHADOW_COORDS()"
												},
												{
													"Type": "NodeText",
													"Data": "​"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241221160646-8hrsnbq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160646-8hrsnbq",
								"updated": "20241221160946"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "此外，还需要添加 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "#pragma multi_complie_fwdbase"
								},
								{
									"Type": "NodeText",
									"Data": "​ 和 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "#include \u0026quot;AutoLight.cginc\u0026quot;"
								},
								{
									"Type": "NodeText",
									"Data": "​，这部分知识回顾详见："
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "block-ref",
									"TextMarkBlockRefID": "20241119133639-97xfgnu",
									"TextMarkBlockRefSubtype": "d",
									"TextMarkTextContent": "US3S6——阴影"
								}
							]
						},
						{
							"ID": "20241221160921-3vcejvx",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241221160921-3vcejvx",
								"style": "line-height: 22px;",
								"updated": "20241221161324"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "#pragma vertex vert\n#pragma fragment frag\n#pragma multi_compile_fwdbase\n\n#include \"UnityCG.cginc\"\n#include \"Lighting.cginc\"\n#include \"AutoLight.cginc\"\n\nfixed4 _Color;\nfixed4 _ReflectColor;\nsamplerCUBE _Cube;\nfloat _Reflectivity;\n\nstruct v2f\n{\n    float4 pos: SV_POSITION;            // 裁剪空间下的顶点坐标\n    fixed3 worldNormal: NORMAL;         // 世界空间下法线\n    fixed3 worldPos: TEXCOORD0;         // 世界空间下顶点坐标\n    float3 worldReflection: TEXCOORD1;  // 世界空间下的反射向量\n    SHADOW_COORDS(2)                    // 阴影坐标宏\n};\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160214-imzg70d",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20241221160214-imzg70d",
						"updated": "20241221160214"
					},
					"Children": [
						{
							"ID": "20241221160214-lht3f6p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160214-lht3f6p",
								"updated": "20241221160214"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "顶点着色器\n"
								}
							]
						},
						{
							"ID": "20241221161329-wy55g3s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221161329-wy55g3s",
								"updated": "20241221161329"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "关键步骤：\n"
								}
							]
						},
						{
							"ID": "20241221161331-ru3q73m",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241221161331-ru3q73m",
								"updated": "20241221161331"
							},
							"Children": [
								{
									"ID": "20241221161331-fle9fny",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241221161331-fle9fny",
										"updated": "20241221161331"
									},
									"Children": [
										{
											"ID": "20241221161331-ek8we8r",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161331-ek8we8r",
												"updated": "20241221161333"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "顶点坐标转裁剪坐标\n"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161334-0j47pyw",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241221161334-0j47pyw",
										"updated": "20241221161334"
									},
									"Children": [
										{
											"ID": "20241221161334-rozlvdk",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161334-rozlvdk",
												"updated": "20241221161339"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "顶点法线转世界坐标"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161334-1mv8z55",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20241221161334-1mv8z55",
										"updated": "20241221161334"
									},
									"Children": [
										{
											"ID": "20241221161334-yxsmfyo",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161334-yxsmfyo",
												"updated": "20241221161341"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "顶点坐标转世界坐标"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161335-hjhyxhm",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NC4=",
										"Num": 4
									},
									"Properties": {
										"id": "20241221161335-hjhyxhm",
										"updated": "20241221161335"
									},
									"Children": [
										{
											"ID": "20241221161335-fq4bxsq",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161335-fq4bxsq",
												"updated": "20241221161342"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "世界空间下 视角方向计算"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161335-vi3ek9z",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NS4=",
										"Num": 5
									},
									"Properties": {
										"id": "20241221161335-vi3ek9z",
										"updated": "20241221161335"
									},
									"Children": [
										{
											"ID": "20241221161335-skavyjg",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161335-skavyjg",
												"updated": "20241221161343"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "视角反向逆向得到反射方向"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161335-98dq8tc",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Ni4=",
										"Num": 6
									},
									"Properties": {
										"id": "20241221161335-98dq8tc",
										"updated": "20241221161335"
									},
									"Children": [
										{
											"ID": "20241221161335-twioqub",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161335-twioqub",
												"updated": "20241221161547"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "阴影相关计算 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20241205122917-b0wqa08",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "TRANSFER_SHADOW"
												},
												{
													"Type": "NodeText",
													"Data": "​"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241221161819-ftkck69",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241221161819-ftkck69",
								"style": "line-height: 22px;",
								"updated": "20241221161834"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "v2f vert(appdata_base v)\n{\n    v2f data;\n    data.pos = UnityObjectToClipPos(v.vertex);                          // 顶点坐标转裁剪坐标\n    data.worldNormal = UnityObjectToWorldNormal(v.normal);              // 顶点法线转世界坐标\n    data.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;             // 顶点坐标装世界坐标\n    fixed3 worldViewDir = UnityWorldSpaceViewDir(data.worldPos);        // 计算世界空间下视角所在方向\n    data.worldReflection = reflect(-worldViewDir, data.worldNormal);    // 通过反向视角方向得到反射方向\n    TRANSFER_SHADOW(data)                                               // 阴影转换计算\n\n    return data;\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160214-vl08zxh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20241221160214-vl08zxh",
						"updated": "20241221160214"
					},
					"Children": [
						{
							"ID": "20241221160214-5d43ny8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160214-5d43ny8",
								"updated": "20241221160214"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "片元着色器\n"
								}
							]
						},
						{
							"ID": "20241221161922-n34wkax",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221161922-n34wkax",
								"updated": "20241221161929"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "关键步骤："
								}
							]
						},
						{
							"ID": "20241221161929-bkibpom",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20241221161929-bkibpom",
								"updated": "20241221161929"
							},
							"Children": [
								{
									"ID": "20241221161929-znb0t7b",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20241221161929-znb0t7b",
										"updated": "20241221161929"
									},
									"Children": [
										{
											"ID": "20241221161929-b8n08le",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161929-b8n08le",
												"updated": "20241221162028"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "得到光的方向 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "UnityWorldSpaceDir()"
												},
												{
													"Type": "NodeText",
													"Data": "​"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161932-8bgdgg7",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20241221161932-8bgdgg7",
										"updated": "20241221161932"
									},
									"Children": [
										{
											"ID": "20241221161932-acg5xif",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161932-acg5xif",
												"updated": "20241221161935"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "兰伯特漫反射颜色计算"
												}
											]
										},
										{
											"ID": "20241221162041-ql3xkla",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221162041-ql3xkla",
												"updated": "20241221162106"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "具体计算方法详见："
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "block-ref",
													"TextMarkBlockRefID": "20240625114859-ag9w64z",
													"TextMarkBlockRefSubtype": "d",
													"TextMarkTextContent": "US3S1L2——兰伯特光照模型"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161936-d8p0t3p",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20241221161936-d8p0t3p",
										"updated": "20241221161936"
									},
									"Children": [
										{
											"ID": "20241221161936-q6itaeg",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161936-q6itaeg",
												"updated": "20241221162536"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "立方体纹理采样(利用 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20241219002108-nrv4a3f",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "texCUBE"
												},
												{
													"Type": "NodeText",
													"Data": "​ 函数)"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161937-4gunr32",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NC4=",
										"Num": 4
									},
									"Properties": {
										"id": "20241221161937-4gunr32",
										"updated": "20241221161937"
									},
									"Children": [
										{
											"ID": "20241221161937-0033dti",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161937-0033dti",
												"updated": "20241221163329"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "光照衰减和阴影相关的衰减值 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "block-ref code",
													"TextMarkBlockRefID": "20241206124737-uvu1xxw",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "UNITY_LIGNT_ATTENUATION()"
												},
												{
													"Type": "NodeText",
													"Data": "​"
												}
											]
										}
									]
								},
								{
									"ID": "20241221161939-l3ruvka",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NS4=",
										"Num": 5
									},
									"Properties": {
										"id": "20241221161939-l3ruvka",
										"updated": "20241221161939"
									},
									"Children": [
										{
											"ID": "20241221161939-p3tgaw6",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20241221161939-p3tgaw6",
												"updated": "20241221162931"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "最终颜色计算（利用 "
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code block-ref",
													"TextMarkBlockRefID": "20241221155725-mmqmne6",
													"TextMarkBlockRefSubtype": "s",
													"TextMarkTextContent": "lerp"
												},
												{
													"Type": "NodeText",
													"Data": "​ 函数）"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20241221164617-miv1ivl",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241221164617-miv1ivl",
								"style": "line-height: 22px;",
								"updated": "20241221164626"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "fixed4 frag(v2f i): SV_TARGET\n{\n    // 漫反射计算\n    fixed3 worldLightDir = normalize(UnityWorldSpaceLightDir(i.worldPos));\n    fixed3 diffuse = _LightColor0.rgb * _Color.rgb * max(0, dot(normalize(i.worldNormal), worldLightDir));\n    // 立方体纹理计算\n    fixed3 cubemapColor = texCUBE(_Cube, i.worldReflection).rgb * _ReflectColor.rgb;\n    // 计算光照衰减和阴影相关的衰减值\n    UNITY_LIGHT_ATTENUATION(atten, i, i.worldPos)\n    // 利用插值计算，在 漫反射颜色 和 反射颜色 之间进行插值，0和1就是极限状态，0代表没有反射效果，1代表只要反射效果，0~1就是两者的叠加\n    fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb + lerp(diffuse, cubemapColor, _Reflectivity) * atten;\n    return fixed4(color, 1);\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20241221160214-3d0o72s",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20241221160214-3d0o72s",
						"updated": "20241221164654"
					},
					"Children": [
						{
							"ID": "20241221160214-0gte81z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241221160214-0gte81z",
								"updated": "20241221163640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "添加 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "FallBack \u0026quot;Reflective/VertexLit\u0026quot;"
								},
								{
									"Type": "NodeText",
									"Data": "​，实现投射阴影"
								}
							]
						},
						{
							"ID": "20241221164628-ahf53jo",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20241221164628-ahf53jo",
								"style": "line-height: 22px;",
								"updated": "20241221164654"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "Yw=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "Shader \"Unlit/Lesson76_Reflection\"\n{\n    Properties {/*...*/}\n    SubShader {/*...*/}\n\n    Fallback \"Reflective/VertexLit\"\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241221164315-vqvd195",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221164315-vqvd195",
				"updated": "20241221164507"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "显示效果（左为结合了漫反射光照和阴影效果的反射Shader，反射率为0.5，右为纯反射Shader）："
				}
			]
		},
		{
			"ID": "20241221164313-jnb5y9y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221164313-jnb5y9y",
				"updated": "20241221164313"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"style": "width: 566px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20241221164313-0u7bdgq.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 566px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241221164422-4jv8aaj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221164422-4jv8aaj",
				"updated": "20241221164603"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可见，加入漫反射和阴影计算后，物体可以受到光照影响，还可以投射和接收阴影"
				}
			]
		},
		{
			"ID": "20241221164656-1r6c3ig",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241221164656-1r6c3ig",
				"updated": "20241221164705"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "完整 Shader 代码如下："
				}
			]
		},
		{
			"ID": "20241221164705-bt2qc98",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241221164705-bt2qc98",
				"style": "line-height: 22px;",
				"updated": "20241221164710"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "Yw=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "Shader \"Unlit/Lesson76_Reflection\"\n{\n    Properties\n    {\n        _Color(\"Color\", Color) = (1, 1, 1, 1)               // 漫反射颜色\n        _ReflectColor(\"ReflectColor\", Color) = (1, 1, 1, 1) // 反射颜色\n        _Cube(\"Cubemap\", Cube) = \"\"{}                       // 立方体纹理\n        _Reflectivity(\"Reflectivity\", Range(0, 1)) = 1      // 反射率\n    }\n    SubShader\n    {\n        Tags { \"RenderType\" = \"Opaque\" \"Queue\" = \"Geometry\" }\n\n        Pass\n        {\n            Tags { \"LightMode\" = \"ForwardBase\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n            #pragma multi_compile_fwdbase\n\n            #include \"UnityCG.cginc\"\n            #include \"Lighting.cginc\"\n            #include \"AutoLight.cginc\"\n\n            fixed4 _Color;\n            fixed4 _ReflectColor;\n            samplerCUBE _Cube;\n            float _Reflectivity;\n\n            struct v2f\n            {\n                float4 pos: SV_POSITION;            // 裁剪空间下的顶点坐标\n                fixed3 worldNormal: NORMAL;         // 世界空间下法线\n                float3 worldPos: TEXCOORD0;         // 世界空间下顶点坐标\n                float3 worldReflection: TEXCOORD1;  // 世界空间下的反射向量\n                SHADOW_COORDS(2)                    // 阴影坐标宏\n            };\n\n            v2f vert(appdata_base v)\n            {\n                v2f data;\n                data.pos = UnityObjectToClipPos(v.vertex);                          // 顶点坐标转裁剪坐标\n                data.worldNormal = UnityObjectToWorldNormal(v.normal);              // 顶点法线转世界坐标\n                data.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;             // 顶点坐标装世界坐标\n                fixed3 worldViewDir = UnityWorldSpaceViewDir(data.worldPos);        // 计算世界空间下视角所在方向\n                data.worldReflection = reflect(-worldViewDir, data.worldNormal);    // 通过反向视角方向得到反射方向\n                TRANSFER_SHADOW(data)                                               // 阴影转换计算\n\n                return data;\n            }\n\n            fixed4 frag(v2f i): SV_TARGET\n            {\n                // 漫反射计算\n                fixed3 worldLightDir = normalize(UnityWorldSpaceLightDir(i.worldPos));\n                fixed3 diffuse = _LightColor0.rgb * _Color.rgb * max(0, dot(normalize(i.worldNormal), worldLightDir));\n                // 立方体纹理计算\n                fixed3 cubemapColor = texCUBE(_Cube, i.worldReflection).rgb * _ReflectColor.rgb;\n                // 计算光照衰减和阴影相关的衰减值\n                UNITY_LIGHT_ATTENUATION(atten, i, i.worldPos)\n                // 利用插值计算，在 漫反射颜色 和 反射颜色 之间进行插值，0和1就是极限状态，0代表没有反射效果，1代表只要反射效果，0~1就是两者的叠加\n                fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb + lerp(diffuse, cubemapColor, _Reflectivity) * atten;\n                return fixed4(color, 1);\n            }\n            ENDCG\n        }\n    }\n\n    Fallback \"Reflective/VertexLit\"\n}\n\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		}
	]
}