{"ID":"20241104081257-pg6aq1e","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241104081257-pg6aq1e","title":"US3S2L9——渐变纹理基础实现","type":"doc","updated":"20241104085049"},"Children":[{"ID":"20241104081257-mmv7lfp","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241104081257-mmv7lfp","updated":"20241104081946"},"Children":[{"Type":"NodeText","Data":"渐变纹理基础Shader实现"}]},{"ID":"20241104081709-lsftqt7","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104081709-lsftqt7","updated":"20241104081946"},"Children":[{"Type":"NodeText","Data":"Shader 属性相关"}]},{"ID":"20241104081945-gknzvxv","Type":"NodeSuperBlock","Properties":{"id":"20241104081945-gknzvxv","updated":"20241104081946"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20241104081718-8h77ur3","Type":"NodeList","ListData":{},"Properties":{"id":"20241104081718-8h77ur3","updated":"20241104081946"},"Children":[{"ID":"20241104081719-6git2k6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241104081719-6git2k6","updated":"20241104081719"},"Children":[{"ID":"20241104081719-hz3ezfn","Type":"NodeParagraph","Properties":{"id":"20241104081719-hz3ezfn","updated":"20241104081719"},"Children":[{"Type":"NodeText","Data":"漫反射颜色\n"}]}]},{"ID":"20241104081721-iy5721l","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241104081721-iy5721l","updated":"20241104081721"},"Children":[{"ID":"20241104081721-pt857o7","Type":"NodeParagraph","Properties":{"id":"20241104081721-pt857o7","updated":"20241104081721"},"Children":[{"Type":"NodeText","Data":"渐变纹理\n"}]}]},{"ID":"20241104081722-59oh99s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241104081722-59oh99s","updated":"20241104081722"},"Children":[{"ID":"20241104081722-39sat41","Type":"NodeParagraph","Properties":{"id":"20241104081722-39sat41","updated":"20241104081722"},"Children":[{"Type":"NodeText","Data":"高光反射颜色\n"}]}]},{"ID":"20241104081723-z13s5o9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241104081723-z13s5o9","updated":"20241104081723"},"Children":[{"ID":"20241104081723-ldx4qa1","Type":"NodeParagraph","Properties":{"id":"20241104081723-ldx4qa1","updated":"20241104081723"},"Children":[{"Type":"NodeText","Data":"光泽度"}]}]}]},{"ID":"20241104081941-im4nrfg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104081941-im4nrfg","style":"line-height: 22px;","updated":"20241104081946"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Properties\n{\n    _MainColor(\"MainColor\", Color) = (1, 1, 1, 1)\n    _RampTex(\"RampTex\", 2D) = \"\"{}\n    _SpecularColor(\"SpecularColor\", Color) = (1, 1, 1, 1)\n    _SpecularNum(\"SpecularNum\", Range(8, 256)) = 18;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20241104082147-p129e07","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104082147-p129e07","updated":"20241104082156"},"Children":[{"Type":"NodeText","Data":"结构体相关"}]},{"ID":"20241104082154-5r0guib","Type":"NodeList","ListData":{},"Properties":{"id":"20241104082154-5r0guib","updated":"20241104082156"},"Children":[{"ID":"20241104082156-wsbthas","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241104082156-wsbthas","updated":"20241104082156"},"Children":[{"ID":"20241104082156-1bf4r8n","Type":"NodeParagraph","Properties":{"id":"20241104082156-1bf4r8n","updated":"20241104082156"},"Children":[{"Type":"NodeText","Data":"顶点着色器中传入：\n"}]},{"ID":"20241104082201-bib5qzl","Type":"NodeParagraph","Properties":{"id":"20241104082201-bib5qzl","updated":"20241104082234"},"Children":[{"Type":"NodeText","Data":"可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240616181725-7p5bld3","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"UnityCG.cginc"},{"Type":"NodeText","Data":"​ 中的 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240616182612-6zz8ivk","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"appdata_base"},{"Type":"NodeText","Data":"​，其中包含了我们需要的顶点、法线相关数据"}]},{"ID":"20241104082236-c8khusc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104082236-c8khusc","style":"line-height: 22px;","updated":"20241104082304"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"// UnityCG.cginc​内定义，无需自己再定义\nstruct appdata_base {\n    float4 vertex : POSITION;\t\t\t//模型空间中的顶点位置\n    float3 normal : NORMAL;\t\t\t\t//顶点法线\n    float4 texcoord : TEXCOORD0;\t\t//第一组纹理坐标\n    UNITY_VERTEX_INPUT_INSTANCE_ID\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241104082159-d189iza","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241104082159-d189iza","updated":"20241104082159"},"Children":[{"ID":"20241104082159-w4g60yv","Type":"NodeParagraph","Properties":{"id":"20241104082159-w4g60yv","updated":"20241104082202"},"Children":[{"Type":"NodeText","Data":"片元着色器中传入："}]},{"ID":"20241104082203-2034b69","Type":"NodeParagraph","Properties":{"id":"20241104082203-2034b69","updated":"20241104082205"},"Children":[{"Type":"NodeText","Data":"自定义一个结构体，其中包含 裁剪空间下坐标、世界空间下顶点坐标、世界空间下法线方向"}]},{"ID":"20241104082306-ewji18q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104082306-ewji18q","style":"line-height: 22px;","updated":"20241104082653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct v2f\n{\n    float4 pos: SV_POSITION;        //裁剪空间下坐标\n    float3 worldPos: TEXCOORD0;     //世界空间下顶点坐标\n    float3 worldNormal: TEXCOORD1;  //世界空间下法线方向\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241104082707-cgdonys","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104082707-cgdonys","updated":"20241104082933"},"Children":[{"Type":"NodeText","Data":"顶点着色器回调函数内容"}]},{"ID":"20241104082249-epgdi5v","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241104082249-epgdi5v","updated":"20241104082726"},"Children":[{"ID":"20241104082726-5ula3sz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241104082726-5ula3sz","updated":"20241104082726"},"Children":[{"ID":"20241104082726-bd48men","Type":"NodeParagraph","Properties":{"id":"20241104082726-bd48men","updated":"20241104082726"},"Children":[{"Type":"NodeText","Data":"顶点坐标模型转裁剪"}]}]},{"ID":"20241104082726-tqwu0a9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241104082726-tqwu0a9","updated":"20241104082726"},"Children":[{"ID":"20241104082726-y8tj1qj","Type":"NodeParagraph","Properties":{"id":"20241104082726-y8tj1qj","updated":"20241104082726"},"Children":[{"Type":"NodeText","Data":"顶点坐标模型转世界"}]}]},{"ID":"20241104082726-xecqnju","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241104082726-xecqnju","updated":"20241104082726"},"Children":[{"ID":"20241104082726-yspfn58","Type":"NodeParagraph","Properties":{"id":"20241104082726-yspfn58","updated":"20241104082726"},"Children":[{"Type":"NodeText","Data":"法线从模型转世界"}]}]}]},{"ID":"20241104082728-m1166ed","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104082728-m1166ed","style":"line-height: 22px;","updated":"20241104082933"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"// appdata_base 是 UnityCG.cginc 内定义，无需自己再定义\nstruct appdata_base {\n    float4 vertex : POSITION;\t\t\t//模型空间中的顶点位置\n    float3 normal : NORMAL;\t\t\t\t//顶点法线\n    float4 texcoord : TEXCOORD0;\t\t//第一组纹理坐标\n    UNITY_VERTEX_INPUT_INSTANCE_ID\n};\n\nstruct v2f\n{\n    float4 pos: SV_POSITION;        //裁剪空间下坐标\n    float3 worldPos: TEXCOORD0;     //世界空间下顶点坐标\n    float3 worldNormal: TEXCOORD1;  //世界空间下法线方向\n};\n\nv2f vert (appdata_base v)\n{\n    v2f data;\n    data.pos = UnityObjectToClipPos(v.vertex);\n    data.worldPos = mul(unity_ObjectToWorld, v.vertex);\n    data.worldNormal = UnityObjectToWorldNormal(v.normal);\n    return data;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241104082759-71vrxqi","Type":"NodeParagraph","Properties":{"id":"20241104082759-71vrxqi","updated":"20241104082846"},"Children":[{"Type":"NodeText","Data":"这里并不需要去计算 uv 坐标，因为渐变纹理的 uv 坐标是通过半兰伯特光照模型的后半部分得到的"}]},{"ID":"20241104082858-h5a8d1q","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104082858-h5a8d1q","updated":"20241104085049"},"Children":[{"Type":"NodeText","Data":"片元着色器回调函数内容"}]},{"ID":"20241104084600-tgmda60","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241104084600-tgmda60","updated":"20241104085049"},"Children":[{"ID":"20241104084626-1d3y3mg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241104084626-1d3y3mg","updated":"20241104084626"},"Children":[{"ID":"20241104084626-d8grg8k","Type":"NodeParagraph","Properties":{"id":"20241104084626-d8grg8k","updated":"20241104084626"},"Children":[{"Type":"NodeText","Data":"计算光的方向"}]}]},{"ID":"20241104084626-vt95e6p","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241104084626-vt95e6p","updated":"20241104085044"},"Children":[{"ID":"20241104084626-g1vtc0o","Type":"NodeParagraph","Properties":{"id":"20241104084626-g1vtc0o","updated":"20241104084626"},"Children":[{"Type":"NodeText","Data":"计算半兰伯特光照后半部分公式值\n"}]},{"ID":"20241104084628-30il1w6","Type":"NodeMathBlock","Properties":{"id":"20241104084628-30il1w6","updated":"20241104085044"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"halfLambertNum = (\\overrightarrow{标准化后物体表面法线向量} \\cdot \\overrightarrow{标准化后光源方向向量}) \\times 0.5 + 0.5"},{"Type":"NodeMathBlockCloseMarker"}]}]},{"ID":"20241104084626-yss3cav","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241104084626-yss3cav","updated":"20241104085049"},"Children":[{"ID":"20241104084626-h6gwqjb","Type":"NodeParagraph","Properties":{"id":"20241104084626-h6gwqjb","updated":"20241104084626"},"Children":[{"Type":"NodeText","Data":"利用该值从渐变纹理中取出对应颜色，参与漫反射光照计算 得出漫反射颜色\n"}]},{"ID":"20241104084633-gw8xfs9","Type":"NodeMathBlock","Properties":{"id":"20241104084633-gw8xfs9","updated":"20241104085049"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"Color_{渐变纹理} = tex2D(halfLambertNum, halfLambertNum )\\\\\ndiffuseColor = Color_{光源} \\times Color_{材质的漫反射} \\times Color_{渐变纹理}"},{"Type":"NodeMathBlockCloseMarker"}]}]},{"ID":"20241104084626-yeg2z2o","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241104084626-yeg2z2o","updated":"20241104084626"},"Children":[{"ID":"20241104084626-xgqejtr","Type":"NodeParagraph","Properties":{"id":"20241104084626-xgqejtr","updated":"20241104084626"},"Children":[{"Type":"NodeText","Data":"计算Blinn Phong光照模型，其中的漫反射光照颜色使用上一步计算出来的颜色"}]}]}]},{"ID":"20241104082940-lu0kby5","Type":"NodeParagraph","Properties":{"id":"20241104082940-lu0kby5","updated":"20241104084556"},"Children":[{"Type":"NodeText","Data":"显示效果："}]},{"ID":"20241104084557-ka9v235","Type":"NodeParagraph","Properties":{"id":"20241104084557-ka9v235","updated":"20241104084557"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241104084557-abpr3pi.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}