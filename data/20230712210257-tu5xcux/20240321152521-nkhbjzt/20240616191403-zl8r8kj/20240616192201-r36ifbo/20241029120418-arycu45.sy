{"ID":"20241029120418-arycu45","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241029120418-arycu45","title":"US3S2L4——凹凸纹理基本概念","type":"doc","updated":"20241030132545"},"Children":[{"ID":"20241029120554-qevci90","Type":"NodeBlockquote","Properties":{"id":"20241029120554-qevci90","updated":"20241029124245"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241029120555-o8kuwhz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029120555-o8kuwhz","updated":"20241029124245"},"Children":[{"Type":"NodeText","Data":"纹理知识回顾"}]},{"ID":"20241029120604-y0jffia","Type":"NodeParagraph","Properties":{"id":"20241029120604-y0jffia","updated":"20241029124245"},"Children":[{"Type":"NodeText","Data":"单张纹理是模型的“皮”，它决定了模型的颜色表现，\n在建模时通过纹理隐射技术将顶点和纹理图片建立联系，在模型数据中记录顶点对应的UV坐标，\n进行Shader开发时，利用UV坐标即可从纹理图片中取出对应位置的颜色给片元“上色”"}]}]},{"ID":"20241029120418-9njh1wi","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241029120418-9njh1wi","updated":"20241029132936"},"Children":[{"Type":"NodeText","Data":"凹凸纹理"}]},{"ID":"20241029124300-n7cuger","Type":"NodeParagraph","Properties":{"id":"20241029124300-n7cuger","updated":"20241029124338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"纹理"},{"Type":"NodeText","Data":" 除了可以用来进行 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"颜色映射"},{"Type":"NodeText","Data":" 外，另外一种常见的应用就是进行 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"凹凸映射"},{"Type":"NodeText","Data":"\n凹凸映射的目的是使用一张纹理来修改模型表面的法线，让我们不需要增加顶点，而让模型看起来有凹凸效果。"}]},{"ID":"20241029124316-zmnao0r","Type":"NodeParagraph","Properties":{"id":"20241029124316-zmnao0r","updated":"20241029124427"},"Children":[{"Type":"NodeText","Data":"原理："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"光照的计算"},{"Type":"NodeText","Data":"都会利用"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"法线"},{"Type":"NodeText","Data":"参与计算，决定最终的颜色表现效果。\n那么在 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"计算 “假” 凹凸面时，使用“真”凹凸面的法线"},{"Type":"NodeText","Data":" 参与计算，呈现出来的效果可以以假乱真"}]},{"ID":"20241029124638-91i72a2","Type":"NodeParagraph","Properties":{"id":"20241029124638-91i72a2","updated":"20241029124801"},"Children":[{"Type":"NodeText","Data":"左图是真实凹凸表面的光线，右图是不使用真凹凸表面的光线，\n想要在非凹凸面上体现凹凸感，就需要通过"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"法线改变光线方向，通过光照模拟出凹凸感"}]},{"ID":"20241029124452-rap00ke","Type":"NodeParagraph","Properties":{"id":"20241029124452-rap00ke","updated":"20241029124636"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029124452-c1hu4x8.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029124636-5imczh5","Type":"NodeParagraph","Properties":{"id":"20241029124636-5imczh5","updated":"20241029124843"},"Children":[{"Type":"NodeText","Data":"凹凸纹理最大的作用就是让模型可以 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在不添加顶点（不增加面）的情况下"},{"Type":"NodeText","Data":"\n让模型看起来同样充满细节（凹凸感），是一种视觉上的“欺骗”技术"}]},{"ID":"20241029124925-ul4oayv","Type":"NodeParagraph","Properties":{"id":"20241029124925-ul4oayv","updated":"20241029125008"},"Children":[{"Type":"NodeText","Data":"下图就是在凹凸纹理的运用，通过一张凹凸纹理改变光照效果，让模型的表面看起来凹凸不平"}]},{"ID":"20241029124815-ev1fbmr","Type":"NodeParagraph","Properties":{"id":"20241029124815-ev1fbmr","updated":"20241029124815"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029124815-ensd2kz.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029124858-edm9019","Type":"NodeParagraph","Properties":{"id":"20241029124858-edm9019","updated":"20241029124901"},"Children":[{"Type":"NodeText","Data":"要进行凹凸映射，目前有两种主流方式："}]},{"ID":"20241029124901-icmju49","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241029124901-icmju49","updated":"20241029132936"},"Children":[{"ID":"20241029124921-536r33h","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241029124921-536r33h","updated":"20241029124921"},"Children":[{"ID":"20241029124921-uc2q1xe","Type":"NodeParagraph","Properties":{"id":"20241029124921-uc2q1xe","updated":"20241029132854"},"Children":[{"Type":"NodeText","Data":"高度纹理贴图：RGB都存储高度值，表现为一张灰度图，由于需要更多额外计算，我们一般不使用"}]}]},{"ID":"20241029124921-cpvubpz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241029124921-cpvubpz","updated":"20241029132936"},"Children":[{"ID":"20241029124921-1y7uud6","Type":"NodeParagraph","Properties":{"id":"20241029124921-1y7uud6","updated":"20241029132900"},"Children":[{"Type":"NodeText","Data":"法线纹理贴图：RGB分别存储法线的XYZ值，有相对模型空间（彩色）和切线空间（蓝色）两种法线贴图"}]},{"ID":"20241029132901-r8qet35","Type":"NodeParagraph","Properties":{"id":"20241029132901-r8qet35","updated":"20241029132936"},"Children":[{"Type":"NodeText","Data":"切线空间法线贴图虽然要产生额外计算，但是能让法线贴图更加的通用，灵活，因此纹理贴图常使用 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"切线空间法线贴图"}]}]}]},{"ID":"20241029132833-cyopilk","Type":"NodeParagraph","Properties":{"id":"20241029132833-cyopilk","updated":"20241029132846"},"Children":[{"Type":"NodeText","Data":"通过高度纹理 或 法线纹理在不添加顶点（不增加面）的情况下让模型看起来同样充满细节（凹凸感）\n原理：计算 “假” 凹凸面时，使用 “真” 凹凸面的法线参与计算"}]},{"ID":"20241029125026-hhqjwr6","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029125026-hhqjwr6","updated":"20241029125409"},"Children":[{"Type":"NodeText","Data":"高度纹理贴图"}]},{"ID":"20241029125040-9piyedi","Type":"NodeParagraph","Properties":{"id":"20241029125040-9piyedi","updated":"20241029125201"},"Children":[{"Type":"NodeText","Data":"高度纹理贴图一般简称高度图，它"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"存储了模型表面上每个点的高度信息"},{"Type":"NodeText","Data":"。\n通常它使用灰度图像，其中不同灰度值表示不同高度。\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"较亮区域通常对应较高的点，较暗的区域对应较低的点。"}]},{"ID":"20241029125057-8p12u9w","Type":"NodeParagraph","Properties":{"id":"20241029125057-8p12u9w","updated":"20241029125208"},"Children":[{"Type":"NodeText","Data":"它"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"主要用于模拟物体表面的位移。"}]},{"ID":"20241029125105-97zg4bg","Type":"NodeParagraph","Properties":{"id":"20241029125105-97zg4bg","updated":"20241029125120"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029125105-cs7vcwj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 251px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029125120-uwppo34.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 251px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029125129-nrhw0xs","Type":"NodeParagraph","Properties":{"id":"20241029125129-nrhw0xs","updated":"20241029125301"},"Children":[{"Type":"NodeText","Data":"存储规则：图片中的某一个像素点的 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"RGB 值是相同的，都表示高度值"},{"Type":"NodeText","Data":"，A值一般情况下为1。"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"高度值范围一般为0~1，0代表最低，1代表最高"}]},{"ID":"20241029125229-z3sbav0","Type":"NodeList","ListData":{},"Properties":{"id":"20241029125229-z3sbav0","updated":"20241029125358"},"Children":[{"ID":"20241029125230-jvpy3up","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029125230-jvpy3up","updated":"20241029125358"},"Children":[{"ID":"20241029125230-oqkbqvg","Type":"NodeParagraph","Properties":{"id":"20241029125230-oqkbqvg","updated":"20241029125358"},"Children":[{"Type":"NodeText","Data":"优点：可以通过高度图"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"很明确的知道模型表面的凹凸情况（通过观察黑白程度来决定凹凸情况）"}]}]},{"ID":"20241029125230-btwni36","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029125230-btwni36","updated":"20241029125331"},"Children":[{"ID":"20241029125230-b39qrzi","Type":"NodeParagraph","Properties":{"id":"20241029125230-b39qrzi","updated":"20241029125331"},"Children":[{"Type":"NodeText","Data":"缺点："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"无法在 Shader 中直接得到模型表面点的法线信息"},{"Type":"NodeText","Data":"，而是需要通过额外的计算得到，因此会"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"增加性能消耗"},{"Type":"NodeText","Data":"，所以我们几乎很少使用它。"}]}]}]},{"ID":"20241029125227-0ezfkzc","Type":"NodeParagraph","Properties":{"id":"20241029125227-0ezfkzc","updated":"20241029125227"},"Children":[{"Type":"NodeText","Data":"我们在使用凹凸纹理时，一般都会使用法线纹理贴图"}]},{"ID":"20241029125409-qcpkn5a","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029125409-qcpkn5a","updated":"20241030132545"},"Children":[{"Type":"NodeText","Data":"法线纹理贴图"}]},{"ID":"20241029125413-rg3aa64","Type":"NodeParagraph","Properties":{"id":"20241029125413-rg3aa64","updated":"20241029125440"},"Children":[{"Type":"NodeText","Data":"法线纹理贴图一般简称法线贴图 或 法线纹理，它存储了模型表面上每个点的法线方向。"}]},{"ID":"20241029125511-9lh9oak","Type":"NodeParagraph","Properties":{"id":"20241029125511-9lh9oak","updated":"20241029125511"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029125511-7stk7pg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029125442-wjm505s","Type":"NodeParagraph","Properties":{"id":"20241029125442-wjm505s","updated":"20241029125541"},"Children":[{"Type":"NodeText","Data":"存储规则：图片中的 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"RGB 值分别存储法线的X、Y、Z分量值"},{"Type":"NodeText","Data":"，A值可以用于存储其他信息，比如材质光滑度等。"}]},{"ID":"20241029125431-yupqs5i","Type":"NodeList","ListData":{},"Properties":{"id":"20241029125431-yupqs5i","updated":"20241029125437"},"Children":[{"ID":"20241029125434-1ke4wbj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029125434-1ke4wbj","updated":"20241029125437"},"Children":[{"ID":"20241029125434-kpdrwbi","Type":"NodeParagraph","Properties":{"id":"20241029125434-kpdrwbi","updated":"20241029125437"},"Children":[{"Type":"NodeText","Data":"优点：从法线贴图中取出的数据便是法线信息，可以直接简单处理后就参与光照计算，性能表现更好"}]}]},{"ID":"20241029125435-k98co39","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029125435-k98co39","updated":"20241029125435"},"Children":[{"ID":"20241029125435-p4oa6ls","Type":"NodeParagraph","Properties":{"id":"20241029125435-p4oa6ls","updated":"20241029125435"},"Children":[{"Type":"NodeText","Data":"缺点：我们无法直观的看出模型表面的凹凸情况"}]}]}]},{"ID":"20241029125626-ibn94p4","Type":"NodeParagraph","Properties":{"id":"20241029125626-ibn94p4","updated":"20241029125643"},"Children":[{"Type":"NodeText","Data":"由于法线纹理贴图是我们之后实现“凹凸感”的主要方式，因此我们需要更详细的了解它的存储规则"}]},{"ID":"20241029125632-hd4avc1","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241029125632-hd4avc1","updated":"20241029125632"},"Children":[{"ID":"20241029125632-ahm74x5","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241029125632-ahm74x5","updated":"20241029125632"},"Children":[{"ID":"20241029125632-15ao80t","Type":"NodeParagraph","Properties":{"id":"20241029125632-15ao80t","updated":"20241029125635"},"Children":[{"Type":"NodeText","Data":"读取分量数据的规则"}]}]},{"ID":"20241029125635-6hohbrw","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241029125635-6hohbrw","updated":"20241029125635"},"Children":[{"ID":"20241029125635-gg7mrfk","Type":"NodeParagraph","Properties":{"id":"20241029125635-gg7mrfk","updated":"20241029125635"},"Children":[{"Type":"NodeText","Data":"两种法线纹理贴图的存储方式"}]}]}]},{"ID":"20241029125648-psjmimw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029125648-psjmimw","updated":"20241030132545"},"Children":[{"Type":"NodeText","Data":"法线纹理贴图读取分量数据的规则"}]},{"ID":"20241029125653-vsdak08","Type":"NodeParagraph","Properties":{"id":"20241029125653-vsdak08","updated":"20241029130039"},"Children":[{"Type":"NodeText","Data":"由于法线方向 XYZ 分量范围在 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"[-1,1]"},{"Type":"NodeText","Data":" 之间，而像素颜色 RGB 分量范围在 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"[0,1]"},{"Type":"NodeText","Data":" 之间，因此我们需要做一个映射计算"}]},{"ID":"20241029125755-0j5ngno","Type":"NodeParagraph","Properties":{"id":"20241029125755-0j5ngno","updated":"20241029130454"},"Children":[{"Type":"NodeText","Data":"存储图片时："},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"像素颜色分量 = (法线方向分量 + 1) \\div 2"},{"Type":"NodeText","Data":"\n"}]},{"ID":"20241029125753-2um91wu","Type":"NodeParagraph","Properties":{"id":"20241029125753-2um91wu","updated":"20241029125753"},"Children":[{"Type":"NodeText","Data":"因此当我们取出像素分量使用时需要进行逆运算"}]},{"ID":"20241029125754-g22azeu","Type":"NodeParagraph","Properties":{"id":"20241029125754-g22azeu","updated":"20241030132545"},"Children":[{"Type":"NodeText","Data":"读取数据时："},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"法线方向分量 = 像素颜色分量 \\times 2 - 1"},{"Type":"NodeText","Data":"\n"}]},{"ID":"20241029125748-orcpxe2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029125748-orcpxe2","updated":"20241029133225"},"Children":[{"Type":"NodeText","Data":"两种法线纹理贴图的存储方式"}]},{"ID":"20241029130158-t7m6pce","Type":"NodeParagraph","Properties":{"id":"20241029130158-t7m6pce","updated":"20241029130237"},"Children":[{"Type":"NodeText","Data":"法线纹理贴图中主要存储法线信息，而法线信息其实就是个方向向量，而"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"方向向量就得有相对坐标系"},{"Type":"NodeText","Data":"\n因此，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"法线贴图的存储方式按相对坐标系有两种方式"},{"Type":"NodeText","Data":"："}]},{"ID":"20241029130247-lv7oowe","Type":"NodeSuperBlock","Properties":{"id":"20241029130247-lv7oowe","updated":"20241029130247"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20241029130210-dbmeo24","Type":"NodeList","ListData":{},"Properties":{"id":"20241029130210-dbmeo24","updated":"20241029130247"},"Children":[{"ID":"20241029130210-qdatv2e","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130210-qdatv2e","updated":"20241029130210"},"Children":[{"ID":"20241029130210-4ii49cz","Type":"NodeParagraph","Properties":{"id":"20241029130210-4ii49cz","updated":"20241029130210"},"Children":[{"Type":"NodeText","Data":"基于模型空间的法线纹理\n"}]}]},{"ID":"20241029130211-tw8wnmm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130211-tw8wnmm","updated":"20241029130211"},"Children":[{"ID":"20241029130211-kux5usr","Type":"NodeParagraph","Properties":{"id":"20241029130211-kux5usr","updated":"20241029130211"},"Children":[{"Type":"NodeText","Data":"基于切线空间的法线纹理"}]}]}]},{"ID":"20241029130242-yjsoyyv","Type":"NodeParagraph","Properties":{"id":"20241029130242-yjsoyyv","updated":"20241029130247"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029125511-7stk7pg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20241029130249-d0knfn4","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241029130249-d0knfn4","updated":"20241029133225"},"Children":[{"Type":"NodeText","Data":"基于模型空间的法线纹理"}]},{"ID":"20241029130307-9eh4b2w","Type":"NodeParagraph","Properties":{"id":"20241029130307-9eh4b2w","updated":"20241029130340"},"Children":[{"Type":"NodeText","Data":"模型数据中自带的法线数据，是定义在模型空间中的，因此最直接的存储法线贴图数据的方式，就是存储基于模型空间下的法线信息。"}]},{"ID":"20241029130323-i1re5z1","Type":"NodeBlockquote","Properties":{"id":"20241029130323-i1re5z1","style":"background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);","updated":"20241029131740"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241029130327-wdnps53","Type":"NodeParagraph","Properties":{"id":"20241029130327-wdnps53","updated":"20241029131740"},"Children":[{"Type":"NodeText","Data":"注意：模型数据中的法线数据是 “真” 数据，也就是基于模型的真实存在的面得到的法线信息\n法线贴图中对的法线数据是 “假” 数据，是通过人为添加或修改的法线数据，原本模型的面上不存在这些人为添加法线对应的凹凸面"}]}]},{"ID":"20241029130347-w5lvr27","Type":"NodeParagraph","Properties":{"id":"20241029130347-w5lvr27","updated":"20241029130642"},"Children":[{"Type":"NodeText","Data":"如下图所示，由于模型空间中每个点存储的法线方向是各式各样的，比如："}]},{"ID":"20241029130634-2gyx5yp","Type":"NodeSuperBlock","Properties":{"id":"20241029130634-2gyx5yp","updated":"20241029131139"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20241029130403-bak8yzm","Type":"NodeList","ListData":{},"Properties":{"id":"20241029130403-bak8yzm","updated":"20241029131139"},"Children":[{"ID":"20241029130526-dd643c5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130526-dd643c5","updated":"20241029131139"},"Children":[{"ID":"20241029130526-guprtei","Type":"NodeParagraph","Properties":{"id":"20241029130526-guprtei","updated":"20241029131139"},"Children":[{"Type":"NodeText","Data":"法线 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0,1,0)"},{"Type":"NodeText","Data":" 映射到像素后 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"像素分量 = (法线分量 + 1) \\div 2"},{"Type":"NodeText","Data":" 是 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0.5,1,0.5)"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-success-background); color: var(--b3-card-success-color);"},"TextMarkType":"text","TextMarkTextContent":"绿色"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-success-background); color: var(--b3-card-success-color);\"}"},{"Type":"NodeText","Data":"\n"}]}]},{"ID":"20241029130527-dhh12qq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130527-dhh12qq","updated":"20241029130659"},"Children":[{"ID":"20241029130527-lx6i0ve","Type":"NodeParagraph","Properties":{"id":"20241029130527-lx6i0ve","updated":"20241029130659"},"Children":[{"Type":"NodeText","Data":"法线 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0,-1,0)"},{"Type":"NodeText","Data":" 映射到像素后 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"像素分量 = (法线分量 + 1) \\div 2"},{"Type":"NodeText","Data":" 是 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0.5,0,0.5)"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-font-background10); color: var(--b3-font-color10);"},"TextMarkType":"text","TextMarkTextContent":"紫色"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-font-background10); color: var(--b3-font-color10);\"}"}]}]}]},{"ID":"20241029130628-7fdr906","Type":"NodeParagraph","Properties":{"id":"20241029130628-7fdr906","style":"width: 33%; flex: 0 0 auto;","updated":"20241029130628"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029130628-dvps3tp.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20241029130409-iu5drx5","Type":"NodeParagraph","Properties":{"id":"20241029130409-iu5drx5","updated":"20241029133225"},"Children":[{"Type":"NodeText","Data":"因此，基于模型空间的法线纹理一般是五颜六色的，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"这种法线纹理贴图数据取出来直接参与 Shader 计算即可"},{"Type":"NodeText","Data":"\n对于不需要变形的静态物体来说非常有用，因为法线方向不会随着物体的变化而变化。"}]},{"ID":"20241029130543-t7rguag","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241029130543-t7rguag","updated":"20241029134247"},"Children":[{"Type":"NodeText","Data":"基于切线空间的法线纹理"}]},{"ID":"20241029130757-ezzbnxw","Type":"NodeParagraph","Properties":{"id":"20241029130757-ezzbnxw","updated":"20241029133229"},"Children":[{"Type":"NodeText","Data":"虽然基于模型空间的法线纹理贴图看起来很符合计算需求，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"但是在实际开发时，美术同学给到我们的法线贴图一般都是基于切线空间的"}]},{"ID":"20241029130807-9qubbpj","Type":"NodeParagraph","Properties":{"id":"20241029130807-9qubbpj","updated":"20241029131125"},"Children":[{"Type":"NodeText","Data":"每个顶点都有自己的切线空间，它的 XYZ 轴 及 原点 代表的信息分别如下："}]},{"ID":"20241029130857-d1fkk1g","Type":"NodeSuperBlock","Properties":{"id":"20241029130857-d1fkk1g","updated":"20241029134247"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20241029130822-5vgojfu","Type":"NodeList","ListData":{},"Properties":{"id":"20241029130822-5vgojfu","updated":"20241029134247"},"Children":[{"ID":"20241029130822-e28mpwr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130822-e28mpwr","updated":"20241029130822"},"Children":[{"ID":"20241029130822-dv7rhno","Type":"NodeParagraph","Properties":{"id":"20241029130822-dv7rhno","updated":"20241029130822"},"Children":[{"Type":"NodeText","Data":"原点：顶点本身\n"}]}]},{"ID":"20241029130823-8lw4vkp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130823-8lw4vkp","updated":"20241029134247"},"Children":[{"ID":"20241029130823-a2u6cqx","Type":"NodeParagraph","Properties":{"id":"20241029130823-a2u6cqx","updated":"20241029134247"},"Children":[{"Type":"NodeText","Data":"X 轴：顶点切线（通常指向纹理UV坐标的的U方向（水平方向））"}]}]},{"ID":"20241029130823-evjvdbh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130823-evjvdbh","updated":"20241029130911"},"Children":[{"ID":"20241029130823-tsn9lbf","Type":"NodeParagraph","Properties":{"id":"20241029130823-tsn9lbf","updated":"20241029130911"},"Children":[{"Type":"NodeText","Data":"Z 轴：法线方向（顶点的原法线）"}]}]},{"ID":"20241029130824-0xpyx08","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029130824-0xpyx08","updated":"20241029130910"},"Children":[{"ID":"20241029130824-md9yxq9","Type":"NodeParagraph","Properties":{"id":"20241029130824-md9yxq9","updated":"20241029130910"},"Children":[{"Type":"NodeText","Data":"Y 轴：X 和 Z 的叉乘结果，也被称为副切线"}]}]}]},{"ID":"20241029130855-iq5v2bt","Type":"NodeParagraph","Properties":{"id":"20241029130855-iq5v2bt","updated":"20241029130858"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029130855-fcoqeqr.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20241029130859-6rp6z53","Type":"NodeParagraph","Properties":{"id":"20241029130859-6rp6z53","updated":"20241029131013"},"Children":[{"Type":"NodeText","Data":"在切线空间下，如果该顶点的法线不变化（不需要“凹凸感”）\n那么它的坐标是 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0,0,1)"},{"Type":"NodeText","Data":"，因为在切线空间下，Z 轴就是原法线方向，因此："}]},{"ID":"20241029131021-334lct0","Type":"NodeParagraph","Properties":{"id":"20241029131021-334lct0","updated":"20241029131210"},"Children":[{"Type":"NodeText","Data":"法线 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0,0,1)"},{"Type":"NodeText","Data":" 映射到像素后 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"像素分量 = (法线分量 + 1) \\div 2"},{"Type":"NodeText","Data":" 是 "},{"Type":"NodeTextMark","TextMarkType":"inline-math","TextMarkInlineMathContent":"(0.5,0.5,1)"},{"Type":"NodeText","Data":" 也就是 "},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-info-background); color: var(--b3-card-info-color);"},"TextMarkType":"text","TextMarkTextContent":"浅蓝色"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-info-background); color: var(--b3-card-info-color);\"}"}]},{"ID":"20241029131222-pkuh346","Type":"NodeParagraph","Properties":{"id":"20241029131222-pkuh346","updated":"20241029131947"},"Children":[{"Type":"NodeText","Data":"这个浅蓝色就是 切线空间下法线贴图 存在大片蓝色的原因，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"因为大部分顶点的法线和模型本身法线是一致的，只有凹凸部分的颜色才会有些许差异"}]},{"ID":"20241029131212-73kziwu","Type":"NodeParagraph","Properties":{"id":"20241029131212-73kziwu","updated":"20241029134037"},"Children":[{"Type":"NodeText","Data":"这种法线纹理贴图数据取出来后需要进行坐标空间转换，再参与 Shader 计算\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"由于切线空间下的法线信息与模型的局部坐标系无关，所以可以在不同的物体上重复使用相同的纹理"}]},{"ID":"20241029131246-1ojxroa","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241029131246-1ojxroa","updated":"20241029134402"},"Children":[{"Type":"NodeText","Data":"使用切线空间下的法线纹理贴图的原因"}]},{"ID":"20241029131951-bpj1psx","Type":"NodeParagraph","Properties":{"id":"20241029131951-bpj1psx","updated":"20241029132010"},"Children":[{"Type":"NodeText","Data":"之所以在实际开发时要使用切线空间下的法线贴图，原因有以下几点："}]},{"ID":"20241029132010-20w27l4","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241029132010-20w27l4","updated":"20241029134402"},"Children":[{"ID":"20241029132010-9y4zlbg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241029132010-9y4zlbg","updated":"20241029132456"},"Children":[{"ID":"20241029132010-mhetwk6","Type":"NodeParagraph","Properties":{"id":"20241029132010-mhetwk6","updated":"20241029132456"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以用于不同模型"},{"Type":"NodeText","Data":" —— 基于某个模型的模型空间的法线贴图只能适配在单一模型上，无法用于其他模型"}]}]},{"ID":"20241029132012-xga9z9n","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241029132012-xga9z9n","updated":"20241029134402"},"Children":[{"ID":"20241029132012-l8scy4d","Type":"NodeParagraph","Properties":{"id":"20241029132012-l8scy4d","updated":"20241029134402"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"方便处理模型变形"},{"Type":"NodeText","Data":" —— 基于顶点空间的法线贴图可以贴在不同或者变形模型的各种面上（因为切线空间的法线信息和模型的局部坐标系无关）"}]}]},{"ID":"20241029132012-nqqgozx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241029132012-nqqgozx","updated":"20241029132646"},"Children":[{"ID":"20241029132012-a5eztvd","Type":"NodeParagraph","Properties":{"id":"20241029132012-a5eztvd","updated":"20241029132646"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以复用"},{"Type":"NodeText","Data":" —— 一个砖块，6个面贴图都是一样的，可以只用一张法线贴图即可用于6个面计算\n"}]}]},{"ID":"20241029132012-dpaf7oh","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241029132012-dpaf7oh","updated":"20241029132746"},"Children":[{"ID":"20241029132012-bx2r6j4","Type":"NodeParagraph","Properties":{"id":"20241029132012-bx2r6j4","updated":"20241029132746"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以压缩"},{"Type":"NodeText","Data":" —— 可以只存储两个轴的分量（Y 轴可通过 XZ 轴叉乘得到）"}]}]},{"ID":"20241029132013-4qz13lt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241029132013-4qz13lt","updated":"20241029132657"},"Children":[{"ID":"20241029132013-u6wn3gm","Type":"NodeParagraph","Properties":{"id":"20241029132013-u6wn3gm","updated":"20241029132657"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"方便制作UV动画"},{"Type":"NodeText","Data":" —— UV坐标改变可以实现凹凸移动效果，如果是模型空间下法线贴图表现会有问题"}]}]}]},{"ID":"20241029132007-qbzg3km","Type":"NodeParagraph","Properties":{"id":"20241029132007-qbzg3km","updated":"20241029132007"},"Children":[{"Type":"NodeText","Data":"等等"}]}]}