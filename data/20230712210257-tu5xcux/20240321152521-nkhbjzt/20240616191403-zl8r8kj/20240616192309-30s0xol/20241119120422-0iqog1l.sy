{"ID":"20241119120422-0iqog1l","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241119120422-0iqog1l","title":"US3S3L2——设置深度写入和渲染队列","type":"doc","updated":"20241120130601"},"Children":[{"ID":"20241119120423-ojnq98n","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241119120423-ojnq98n","updated":"20241119120916"},"Children":[{"Type":"NodeText","Data":"Unity Shader 中设置深度写入"}]},{"ID":"20241119120723-nq2x7ez","Type":"NodeParagraph","Properties":{"id":"20241119120723-nq2x7ez","updated":"20241119120742"},"Children":[{"Type":"NodeText","Data":"深度写入默认是开启的，我们需要通过 渲染状态中的 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240612204920-0vut5cr","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"ZWrite off"},{"Type":"NodeText","Data":"​ 指令主动关闭深度写入"}]},{"ID":"20241119120747-sxijwvq","Type":"NodeParagraph","Properties":{"id":"20241119120747-sxijwvq","updated":"20241119120849"},"Children":[{"Type":"NodeText","Data":"当我们把它写在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​ 渲染通道中时，它只会影响该 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241119120750-6gojc8k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119120750-6gojc8k","updated":"20241119120834"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Pass\n{\n    Tags { \"LightMode\" = \"ForwardBase\" }\n    ZWrite off\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241119120748-vp7o9e8","Type":"NodeParagraph","Properties":{"id":"20241119120748-vp7o9e8","updated":"20241119120857"},"Children":[{"Type":"NodeText","Data":"若我们把它写在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"SubShader"},{"Type":"NodeText","Data":"​ 语句块中，它将影响其中的所有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241119120859-p8k2gpv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119120859-p8k2gpv","updated":"20241119120916"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"SubShader\n{\n    ZWrite off\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241119120745-0ceqlhc","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241119120745-0ceqlhc","updated":"20241120130601"},"Children":[{"Type":"NodeText","Data":"Unity Shader 中设置渲染队列"}]},{"ID":"20241119120949-gpd9sp7","Type":"NodeParagraph","Properties":{"id":"20241119120949-gpd9sp7","updated":"20241119121000"},"Children":[{"Type":"NodeText","Data":"我们知道，"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240612194041-x2l9cdo","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"渲染队列"},{"Type":"NodeText","Data":" 非常的重要，它会影响最终的渲染效果。\n在 Unity Shader 中我们可以通过渲染标签主动的设置物体的渲染顺序"}]},{"ID":"20241119121022-jbr6hn4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119121022-jbr6hn4","updated":"20241119121030"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Tags { \"Queue\" = \"标签值\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241119121001-36lmi5l","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241119121001-36lmi5l","updated":"20241119121113"},"Children":[{"ID":"20241119121036-yfm6xuv","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241119121036-yfm6xuv","updated":"20241119121057"},"Children":[{"ID":"20241119121036-p91kq8k","Type":"NodeParagraph","Properties":{"id":"20241119121036-p91kq8k","updated":"20241119121057"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Background"},{"Type":"NodeText","Data":"​（背景，队列号：1000）最早被渲染的物体的队列，一般用来渲染天空盒或者背景"}]}]},{"ID":"20241119121036-0zl7cl2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241119121036-0zl7cl2","updated":"20241119121113"},"Children":[{"ID":"20241119121036-88jgfxh","Type":"NodeParagraph","Properties":{"id":"20241119121036-88jgfxh","updated":"20241119121113"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Geometry"},{"Type":"NodeText","Data":"​（几何，队列号：2000）不透明的几何体通常使用该队列，不设置时的默认队列"}]}]},{"ID":"20241119121036-jp8nxb8","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241119121036-jp8nxb8","updated":"20241119121036"},"Children":[{"ID":"20241119121036-9caet1i","Type":"NodeParagraph","Properties":{"id":"20241119121036-9caet1i","updated":"20241119121216"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AlphaTest"},{"Type":"NodeText","Data":"​（透明测试，队列号：2450） 需要透明度测试的物体使用的队列"}]}]},{"ID":"20241119121036-p87u58j","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241119121036-p87u58j","updated":"20241119121036"},"Children":[{"ID":"20241119121036-nl6dcze","Type":"NodeParagraph","Properties":{"id":"20241119121036-nl6dcze","updated":"20241119121222"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Transparent"},{"Type":"NodeText","Data":"​（透明的，队列号：3000） 半透明物体的渲染队列，"}]},{"ID":"20241119121227-b5ydg0k","Type":"NodeParagraph","Properties":{"id":"20241119121227-b5ydg0k","updated":"20241119121227"},"Children":[{"Type":"NodeText","Data":"该队列中几何体按照由远到近的顺序进行绘制，所有进行透明混合的几何体都应该使用该队列"}]}]},{"ID":"20241119121036-982lkdz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241119121036-982lkdz","updated":"20241119121036"},"Children":[{"ID":"20241119121036-zokjtod","Type":"NodeParagraph","Properties":{"id":"20241119121036-zokjtod","updated":"20241119121221"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Overlay"},{"Type":"NodeText","Data":"​（覆盖，队列号：4000） 用是放在最后渲染的队列，于叠加渲染的效果"}]}]},{"ID":"20241119121036-08shdtq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20241119121036-08shdtq","updated":"20241119121036"},"Children":[{"ID":"20241119121036-x1ssnn6","Type":"NodeParagraph","Properties":{"id":"20241119121036-x1ssnn6","updated":"20241119121300"},"Children":[{"Type":"NodeText","Data":"自定义队列，基于 Unity 预先定义好的这些渲染队列标签来进行加减运算来定义自己的渲染队列"}]},{"ID":"20241119121239-pg02acv","Type":"NodeParagraph","Properties":{"id":"20241119121239-pg02acv","updated":"20241119121248"},"Children":[{"Type":"NodeText","Data":"如："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Tags { \u0026quot;Queue\u0026quot; = \u0026quot;Geometry+1\u0026quot; }"},{"Type":"NodeText","Data":"​ 代表的队列号就是 2001"}]}]}]},{"ID":"20241119121305-6uxxig7","Type":"NodeParagraph","Properties":{"id":"20241119121305-6uxxig7","updated":"20241119121406"},"Children":[{"Type":"NodeText","Data":"渲染队列一般都定义在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"SubShader"},{"Type":"NodeText","Data":"​ 语句块中，影响之后的所有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pass"},{"Type":"NodeText","Data":"​ 渲染通道\n使用该 Shader（着色器）的物体，就会根据你设置的渲染队列在特定的时间进行渲染\n在使用 渲染队列 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Queue"},{"Type":"NodeText","Data":"​ 时，一般会搭配 忽视投影器 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240612201956-u2lews3","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"IgnoreProjector"},{"Type":"NodeText","Data":"​ 和 渲染类型 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240612194126-oxujlu2","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"RenderType"},{"Type":"NodeText","Data":"​ 一起使用"}]},{"ID":"20241119121355-xsgqyh0","Type":"NodeBlockquote","Properties":{"id":"20241119121355-xsgqyh0","updated":"20241119121647"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241119121631-eu3vzd6","Type":"NodeParagraph","Properties":{"id":"20241119121631-eu3vzd6","updated":"20241119121642"},"Children":[{"Type":"NodeText","Data":"忽视投影器作用：物体是否受到 Projector（投影机）的投射，Projector 是 Unity 中的一个功能"}]},{"ID":"20241119121631-anhb8qf","Type":"NodeParagraph","Properties":{"id":"20241119121631-anhb8qf","updated":"20241119121647"},"Children":[{"Type":"NodeText","Data":"投影器（Projector）是 Unity 中的一种特殊的光源，\n它用于在场景中投射纹理（Texture）或简单的几何形状（如圆形 或方形）来模拟光照、阴影或其他视觉效果。"}]},{"ID":"20241119121631-qbz1w5a","Type":"NodeParagraph","Properties":{"id":"20241119121631-qbz1w5a","updated":"20241119121631"},"Children":[{"Type":"NodeText","Data":"忽略 Projector（一般 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20241119120422-0iqog1l","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"半透明 Shader"},{"Type":"NodeText","Data":" 需要开启该标签）"}]},{"ID":"20241119121631-cxv8yv3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119121631-cxv8yv3","style":"line-height: 22px;","updated":"20241119121631"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"Tags { \"IgnoreProjector\" = \"True\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241119121631-34ej6ed","Type":"NodeParagraph","Properties":{"id":"20241119121631-34ej6ed","updated":"20241119121631"},"Children":[{"Type":"NodeText","Data":"不忽略 Projector（默认值）"}]},{"ID":"20241119121631-1jrk535","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119121631-1jrk535","style":"line-height: 22px;","updated":"20241119121631"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"Tags { \"IgnoreProjector\" = \"False\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241119121722-rlowweh","Type":"NodeBlockquote","Properties":{"id":"20241119121722-rlowweh","updated":"20241120130601"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241119121724-sr4yob6","Type":"NodeParagraph","Properties":{"id":"20241119121724-sr4yob6","updated":"20241119121730"},"Children":[{"Type":"NodeText","Data":"渲染类型作用：对着色器进行分类，"},{"Type":"NodeTextMark","TextMarkType":"strong u","TextMarkTextContent":"之后可以用于着色器替换功能"},{"Type":"NodeText","Data":"\n摄像机上有对应的API，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以指定这个渲染类型来替换成别的着色器"}]},{"ID":"20241119121724-i2uq1m4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119121724-i2uq1m4","style":"line-height: 22px;","updated":"20241119121724"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YyM="},{"Type":"NodeCodeBlockCode","Data":"Tags{ \"RenderType\" = \"标签值\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241119121734-i839tj5","Type":"NodeParagraph","Properties":{"id":"20241119121734-i839tj5","updated":"20241119121739"},"Children":[{"Type":"NodeText","Data":"标签值包括："}]},{"ID":"20241119121753-l9158l8","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241119121753-l9158l8","updated":"20241120130601"},"Children":[{"ID":"20241119121753-xjjrvp3","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241119121753-xjjrvp3","updated":"20241119121820"},"Children":[{"ID":"20241119121753-rsn33z3","Type":"NodeParagraph","Properties":{"id":"20241119121753-rsn33z3","updated":"20241119121809"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Opaque"},{"Type":"NodeText","Data":"​ - 不透明的，用于普通Shader，比如：不透明、自发光、反射等"}]}]},{"ID":"20241119121753-19kcjyt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241119121753-19kcjyt","updated":"20241119121823"},"Children":[{"ID":"20241119121753-0sjjziw","Type":"NodeParagraph","Properties":{"id":"20241119121753-0sjjziw","updated":"20241119121807"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Transparent"},{"Type":"NodeText","Data":"​ - 透明的，用于半透明Shader，比如：透明、粒子"}]}]},{"ID":"20241119121753-bxoheh6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241119121753-bxoheh6","updated":"20241120130601"},"Children":[{"ID":"20241119121753-u8pngn0","Type":"NodeParagraph","Properties":{"id":"20241119121753-u8pngn0","updated":"20241120130601"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"TransparentCutout"},{"Type":"NodeText","Data":"​ - 透明切割，用于"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20241120123139-akw3b29","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"透明测试"},{"Type":"NodeText","Data":"Shader，比如：植物叶子"}]}]},{"ID":"20241119121753-eq4na5a","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241119121753-eq4na5a","updated":"20241119121829"},"Children":[{"ID":"20241119121753-xr6thmj","Type":"NodeParagraph","Properties":{"id":"20241119121753-xr6thmj","updated":"20241119121801"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Background"},{"Type":"NodeText","Data":"​ - 背景，用于天空盒Shader"}]}]},{"ID":"20241119121753-xnng5pz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241119121753-xnng5pz","updated":"20241119121832"},"Children":[{"ID":"20241119121753-6olfb1l","Type":"NodeParagraph","Properties":{"id":"20241119121753-6olfb1l","updated":"20241119121756"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Overlay"},{"Type":"NodeText","Data":"​ - 覆盖，用于GUI纹理、Halo（光环）、Flare（光晕）"}]}]}]}]},{"ID":"20241119121923-z9pv2si","Type":"NodeParagraph","Properties":{"id":"20241119121923-z9pv2si","updated":"20241119122044"},"Children":[{"Type":"NodeText","Data":"因此，透明物体的 Shader 的 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240615190945-timyw8m","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"Tags"},{"Type":"NodeText","Data":"​ 一般设置为："}]},{"ID":"20241119122044-ac0ub71","Type":"NodeList","ListData":{},"Properties":{"id":"20241119122044-ac0ub71","updated":"20241119123734"},"Children":[{"ID":"20241119122045-fnv03kg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241119122045-fnv03kg","updated":"20241119122143"},"Children":[{"ID":"20241119122045-ht71oae","Type":"NodeParagraph","Properties":{"id":"20241119122045-ht71oae","updated":"20241119122143"},"Children":[{"Type":"NodeText","Data":"透明测试类：需要透明度测试的物体，如植物叶子"}]},{"ID":"20241119121937-1w7z38m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119121937-1w7z38m","updated":"20241119122040"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Tags { \"Queue\" = \"AlphaTest\" \"IgnoreProjector\" = \"True\" \"RenderType\" = \"TransparentCutout\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241119122050-0go9rma","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241119122050-0go9rma","updated":"20241119123734"},"Children":[{"ID":"20241119122050-j2rsbjg","Type":"NodeParagraph","Properties":{"id":"20241119122050-j2rsbjg","updated":"20241119123734"},"Children":[{"Type":"NodeText","Data":"透明类：用于半透明Shader，比如：玻璃、粒子"}]},{"ID":"20241119122104-3ygkgnm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241119122104-3ygkgnm","updated":"20241119122120"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"Tags { \"Queue\" = \"Transparent\" \"IgnoreProjector\" = \"True\" \"RenderType\" = \"​Transparent​\" }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]}